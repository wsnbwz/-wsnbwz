<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Squid代理服务器-2</title>
      <link href="/2023/06/06/Squid%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8-0/"/>
      <url>/2023/06/06/Squid%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8-0/</url>
      
        <content type="html"><![CDATA[<h1 id="Squid"><a href="#Squid" class="headerlink" title="Squid"></a>Squid</h1><h2 id="一、相关知识"><a href="#一、相关知识" class="headerlink" title="一、相关知识"></a>一、相关知识</h2><p>Squid cache（简称为Squid）是一个流行的自由软件（GNU通用公共许可证）的代理服务器和Web缓存服务器。Squid有广泛的用途，从作为网页服务器的前置cache服务器缓存相关请求来提高Web服务器的速度，到为一组人共享网络资源而缓存万维网，域名系统和其他网络搜索，到通过过滤流量帮助网络安全，到局域网通过代理上网。Squid主要设计用于在Unix一类系统运行。</p><p>squid可以做代理也可以做缓存。</p><p>squid不仅可以做正向代理，又可以做反向代理。</p><p>正向代理，squid后面是客户端，客户端上网要通过Squid去上；反向代理，squid后面是服务器，服务器返回给用户数据需要走squid。</p><p>正向代理用在企业的办公环境中，员工上网需要通过squid代理来上网，这样可以节省网络带宽资源。而反向代理用来搭建网站静态项(图片、html、流媒体、js、css等)的缓存服务器，它用于网站架构中。</p><h2 id="二、实验目标"><a href="#二、实验目标" class="headerlink" title="二、实验目标"></a>二、实验目标</h2><p><strong>正向代理</strong></p><p><strong>反向代理</strong></p><p><strong>透明模式</strong></p><h2 id="三、实验实施"><a href="#三、实验实施" class="headerlink" title="三、实验实施"></a>三、实验实施</h2><h3 id="1、实验规划"><a href="#1、实验规划" class="headerlink" title="1、实验规划"></a>1、实验规划</h3><table><thead><tr><th>IP地址</th><th>主机名</th><th>操作系统</th><th>网卡</th></tr></thead><tbody><tr><td>外网：192.168.10.10<br />内网：192.168.20.10</td><td>Server-Squid</td><td>Centos8</td><td>外网：ens160 <br />内网：ens224</td></tr><tr><td>192.168.10.20</td><td>Server-web</td><td>Centos8</td><td>外网：ens160</td></tr><tr><td>192.168.20.40</td><td>Client</td><td>Windows10</td><td>Ethernet0</td></tr></tbody></table><h3 id="2、实验步骤"><a href="#2、实验步骤" class="headerlink" title="2、实验步骤"></a>2、实验步骤</h3><h4 id="2-1正向代理"><a href="#2-1正向代理" class="headerlink" title="2.1正向代理"></a>2.1正向代理</h4><p>现状：客户端既不能访问外网，也不能访问web服务器。</p><p>目标：让客户端能访问外网，同时也能访问web服务器。</p><h5 id="2-2-1、安装squid服务器"><a href="#2-2-1、安装squid服务器" class="headerlink" title="2.2.1、安装squid服务器"></a>2.2.1、安装squid服务器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">在代理服务器上<br>[root@Server ~]<span class="hljs-comment"># yum -y install squid</span><br></code></pre></td></tr></table></figure><h5 id="2-2-3、配置squid"><a href="#2-2-3、配置squid" class="headerlink" title="2.2.3、配置squid"></a>2.2.3、配置squid</h5><p><strong>vim &#x2F;etc&#x2F;squid&#x2F;squid.conf</strong></p><p><strong>找到如下配置</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/squid/squid.conf</span><br><span class="hljs-comment"># And finally deny all other access to this proxy</span><br>http_access allow all<span class="hljs-comment"># 允许所有网段的请求</span><br>http_access deny all<br><span class="hljs-comment"># Squid normally listens to port 3128</span><br>http_port 8888<span class="hljs-comment"># squid的http代理端口</span><br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041454953.png" alt="image-20221004145415921"></p><h5 id="2-2-4、重启服务、开放防火墙"><a href="#2-2-4、重启服务、开放防火墙" class="headerlink" title="2.2.4、重启服务、开放防火墙"></a>2.2.4、重启服务、开放防火墙</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl restart squid</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-port=8888/tcp --permanent</span><br>success<br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload </span><br>success<br></code></pre></td></tr></table></figure><p>2.2.5、win10客户端测试</p><p>查看win10当前网络</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041500309.png" alt="image-20221004150051280"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041500914.png" alt="image-20221004150022787"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041501517.png" alt="image-20221004150155462"></p><p><strong>关闭代理发现就无法访问</strong></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041529759.png" alt="image-20221004152935712"></p><p><strong>在squid服务器查看Client客户端访问日志</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># tail -f /var/log/squid/access.log </span><br>1664895783.233    102 192.168.20.40 TCP_MISS/206 131934 GET http://au.download.windowsupdate.com/d/msdownload/update/software/updt/2022/07/windows10.0-kb5016592-x64-ndp48_a847c55457c11e744ff9c4ec211c0c5e661276ac.cab - HIER_DIRECT/124.225.45.242 application/vnd.ms-cab-compressed<br>1664895783.246    115 192.168.20.40 TCP_MISS/206 131934 GET http://au.download.windowsupdate.com/d/msdownload/update/software/updt/2022/07/windows10.0-kb5016592-x64-ndp48_a847c55457c11e744ff9c4ec211c0c5e661276ac.cab - HIER_DIRECT/124.225.45.242 application/vnd.ms-cab-compressed<br>1664895783.509     94 192.168.20.40 TCP_MISS/206 131934 GET http://au.download.windowsupdate.com/d/msdownload/update/software/updt/2022/07/windows10.0-kb5016592-x64-ndp48_a847c55457c11e744ff9c4ec211c0c5e661276ac.cab - <br></code></pre></td></tr></table></figure><p><strong>正向代理到此结束</strong></p><h4 id="2-2、反向代理"><a href="#2-2、反向代理" class="headerlink" title="2.2、反向代理"></a>2.2、反向代理</h4><p>Squid 反向代理常用于服务器端，客户端访问 Squid 代理服务器的 80 端口，Squid 代理服务器根据配置去请求后端的 web 服务器，然后将请求到的信息保存在本地并回传给客户端，当又有客户端请求相同资源时，Squid 代理服务器直接将缓存中的信息回传给客户端。</p><p>现状：客户端既不能访问外网，也不能访问web服务器。</p><p>目标：让客户端能访问squid服务器80端口，从而代理访问web服务器。</p><h5 id="2-2-1、配置squid"><a href="#2-2-1、配置squid" class="headerlink" title="2.2.1、配置squid"></a>2.2.1、配置squid</h5><p><strong>vim &#x2F;etc&#x2F;squid&#x2F;squid.conf</strong></p><p><strong>找到如下配置</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/squid/squid.conf</span><br><span class="hljs-comment"># And finally deny all other access to this proxy</span><br>http_access allow all<span class="hljs-comment"># 允许所有网段的请求</span><br>http_access deny all<br><span class="hljs-comment"># Squid normally listens to port 3128</span><br>http_port 192.168.20.10:80 accel vhost vport    <span class="hljs-comment"># squid的http代理端口</span><br>cache_peer 192.168.10.20 parent  80 0 no-query originserver name=web1<br></code></pre></td></tr></table></figure><p>参数解释</p><blockquote><hr><p>http_port 192.168.10.20:80 accel vhost vport<br>squid 从一个缓存应用变成了供 Web 服务器使用的加速应用，这个时候 squid 在 80 端口监听请求，同时和 web server 的请求端口 vhost vport 绑定。这个时候请求到了 squid，squid 是不用转发请求的，而是直接要么从缓存中拿数据要么向绑定的端口直接请求数据。<br>accel：反向代理加速模式<br>vhost：支持域名或主机名来表示代理节点</p><p>vport：支持 IP 和端口来表示代理节点</p><p>cache_peer 192.168.10.30 parent 80 0 no-query originserver round-robin max_conn&#x3D;30 weight&#x3D;1 name&#x3D;web1<br>parent：代表父节点，上下关系，非平级关系<br>80：代理内部 web 服务器的 80 端口<br>0：没有使用 ICP（电信运营商），表示就一台 squid 服务器<br>no-query：不做查询操作，直接获取数据<br>originserver：指定是源服务器<br>ronud-robin：指定 squid 通过轮询的方式将请求分发到其中一台父节点<br>max_conn：指定最大连接数<br>weight：指定权重<br>name：设置别名</p></blockquote><p>别的写法-可以参考，我是以最简单的方法写的</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041720604.png" alt="image-20221004172027561"></p><h5 id="2-2-2重启服务、放行防火墙"><a href="#2-2-2重启服务、放行防火墙" class="headerlink" title="2.2.2重启服务、放行防火墙"></a>2.2.2重启服务、放行防火墙</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl restart squid</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-port=80/tcp --permanent </span><br>success<br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload </span><br>success<br></code></pre></td></tr></table></figure><h5 id="2-2-3、测试"><a href="#2-2-3、测试" class="headerlink" title="2.2.3、测试"></a>2.2.3、测试</h5><p>反向代理是针对服务器的，所以客户端win10不需要设置代理</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210041730167.png" alt="image-20221004173049057"></p><p><strong>反向代理完成</strong></p><h4 id="2-3、透明代理"><a href="#2-3、透明代理" class="headerlink" title="2.3、透明代理"></a>2.3、透明代理</h4><p>传统代理需要客户端在浏览器上指定代理服务器的ip比较麻烦。</p><p>透明代理不需要在浏览器指定，需要将网关设为代理服务器。</p><p>什么是squid透明代理？<br>透明代理提供的服务功能与传统代理是一致的，但是其“透明”的实现依赖于默认路由和防火墙的重定向策略，因此更适用于局域网主机服务，而不适合为Internet中的客户机提供服务。</p><h5 id="2-3-1、开启路由转发功能"><a href="#2-3-1、开启路由转发功能" class="headerlink" title="2.3.1、开启路由转发功能"></a>2.3.1、开启路由转发功能</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># echo &quot;net.ipv4.ip_forward = 1&quot; &gt;&gt; /etc/sysctl.conf </span><br>[root@Server ~]<span class="hljs-comment"># sysctl -p                                          </span><br>net.ipv4.ip_forward = 1<br></code></pre></td></tr></table></figure><h5 id="2-3-2、修改Squid配置支持透明模式"><a href="#2-3-2、修改Squid配置支持透明模式" class="headerlink" title="2.3.2、修改Squid配置支持透明模式"></a>2.3.2、修改Squid配置支持透明模式</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># And finally deny all other access to this proxy</span><br>http_access allow all<br>http_access deny all<br><br><span class="hljs-comment"># Squid normally listens to port 3128</span><br><span class="hljs-comment"># 透明代理在3.1版以后使用 transparent 参数，但是3.4.5还需要另外占用一个端口，将透明代理和http代理分开使用，3128可以继续做http代理用，3219可以做透明代理用。</span><br>http_port 3128<span class="hljs-comment"># 不要在默认监听端口上加</span><br>http_port 192.168.20.10:3128 transparent<span class="hljs-comment"># 添加透明端口</span><br></code></pre></td></tr></table></figure><h5 id="2-3-4、配置firewalld规则"><a href="#2-3-4、配置firewalld规则" class="headerlink" title="2.3.4、配置firewalld规则"></a>2.3.4、配置firewalld规则</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl start fiewalld    #开启防火墙</span><br><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --zone=external --add-interface=ens224  # 将ens224加到内网区域</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --zone=internal --add-interface=ens160  # 将ens160加到外网</span><br><br><span class="hljs-comment"># 添加到外网</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --zone=external --add-service=http   --permanent</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --zone=external --add-service=https  --permanent</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --zone=external --add-port=3129/tcp --permanent</span><br><br><span class="hljs-comment"># 转换</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --direct --add-rule ipv4 nat PREROUTING 0 -i ens224 -p tcp --dport 80 -j REDIRECT --to-ports 3129  转换</span><br><br><span class="hljs-comment"># 变成永久性的策略</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --runtime-to-permanent</span><br></code></pre></td></tr></table></figure><h5 id="2-3-5、重启服务"><a href="#2-3-5、重启服务" class="headerlink" title="2.3.5、重启服务"></a>2.3.5、重启服务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl restart squid</span><br></code></pre></td></tr></table></figure><h5 id="2-3-6、测试"><a href="#2-3-6、测试" class="headerlink" title="2.3.6、测试"></a>2.3.6、测试</h5><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210042157721.png" alt="image-20221004215743636"></p><p><strong>浏览器访问web服务器</strong></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210042158004.png" alt="image-20221004215818966"></p><p><strong>关闭squid服务器测试还能否访问web服务器</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl stop squid</span><br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210042200013.png" alt="image-20221004220027974"></p><p><strong>再次打开squid服务器测试，并查看log日志</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl restart squid</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># tail -f /var/log/squid/access.log </span><br>1664920917.217      3 192.168.20.40 TCP_MISS/403 200067 GET http://192.168.10.20/ - ORIGINAL_DST/192.168.10.20 text/html<br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210042202214.png" alt="image-20221004220225175"></p>]]></content>
      
      
      <categories>
          
          <category> 代理服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件共享服务Samba</title>
      <link href="/2023/06/06/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1Samba/"/>
      <url>/2023/06/06/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1Samba/</url>
      
        <content type="html"><![CDATA[<h1 id="Samba"><a href="#Samba" class="headerlink" title="Samba"></a>Samba</h1><h2 id="一、相关知识"><a href="#一、相关知识" class="headerlink" title="一、相关知识"></a>一、相关知识</h2><p>Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，由服务器及客户端程序构成。SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。SMB协议是客户机&#x2F;服务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置“NetBIOS over TCP&#x2F;IP”使得Samba不但能与局域网络主机分享资源，还能与全世界的电脑分享资源。</p><h2 id="二、实验目标"><a href="#二、实验目标" class="headerlink" title="二、实验目标"></a>二、实验目标</h2><ul><li>本地用户</li><li>匿名用户</li><li>虚拟用户</li></ul><h2 id="三、实验实施"><a href="#三、实验实施" class="headerlink" title="三、实验实施"></a>三、实验实施</h2><h3 id="1、实验规划"><a href="#1、实验规划" class="headerlink" title="1、实验规划"></a>1、实验规划</h3><table><thead><tr><th>IP地址</th><th>主机名</th><th>操作系统</th></tr></thead><tbody><tr><td>192.168.10.10</td><td>Server</td><td>Centos8</td></tr><tr><td>192.168.10.40</td><td>Client</td><td>Win7</td></tr></tbody></table><h3 id="2、实验步骤"><a href="#2、实验步骤" class="headerlink" title="2、实验步骤"></a>2、实验步骤</h3><h4 id="2-1、安装Samba服务"><a href="#2-1、安装Samba服务" class="headerlink" title="2.1、安装Samba服务"></a>2.1、安装Samba服务</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment">#  yum install -y samba        //安装samba 服务</span><br> <br>yum list samba            //列出软件包的信息<br>yum remove samba          //卸载软件包<br>yum check-update samba    //检查是否有可更新的软件包<br>yum update samba          //更新samba软件包<br></code></pre></td></tr></table></figure><h4 id="2-2、启动服务"><a href="#2-2、启动服务" class="headerlink" title="2.2、启动服务"></a>2.2、启动服务</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl enable smb --now</span><br>Created symlink /etc/systemd/system/multi-user.target.wants/smb.service → /usr/lib/systemd/system/smb.service.<br>[root@Server ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><h4 id="2-3、配置Samba服务本地用户访问"><a href="#2-3、配置Samba服务本地用户访问" class="headerlink" title="2.3、配置Samba服务本地用户访问"></a>2.3、配置Samba服务本地用户访问</h4><h5 id="2-3-1、创建用户-x2F-共享路径"><a href="#2-3-1、创建用户-x2F-共享路径" class="headerlink" title="2.3.1、创建用户&#x2F;共享路径"></a>2.3.1、创建用户&#x2F;共享路径</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># useradd test1</span><br>[root@Server ~]<span class="hljs-comment"># useradd test2</span><br>[root@Server ~]<span class="hljs-comment"># echo Qwer123.|passwd --stdin test1</span><br>更改用户 test1 的密码 。<br>passwd：所有的身份验证令牌已经成功更新.<br>[root@Server ~]<span class="hljs-comment"># echo Qwer123.|passwd --stdin test2</span><br>更改用户 test2 的密码 。<br>passwd：所有的身份验证令牌已经成功更新.<br><br><span class="hljs-comment"># 创建samba用户，并给每个用户设置密码，要在系统创建完成后才能创建samba用户</span><br>[root@Server home]<span class="hljs-comment"># smbpasswd -a test1    # 也可以用pdbebit 命令</span><br>New SMB password:<br>Retype new SMB password:<br>Added user test1.<br>[root@Server home]<span class="hljs-comment"># smbpasswd -a test2 # 也可以用pdbebit 命令</span><br>New SMB password:<br>Retype new SMB password:<br>Added user test2.+<br><br><span class="hljs-comment"># 创建共享目录并设置权限</span><br>[root@Server ~]<span class="hljs-comment"># mkdir /samba/local/</span><br>[root@Server ~]<span class="hljs-comment"># chmod 777 /samba/local/</span><br></code></pre></td></tr></table></figure><h5 id="2-3-2、pdbebit-参数说明"><a href="#2-3-2、pdbebit-参数说明" class="headerlink" title="2.3.2、pdbebit 参数说明"></a>2.3.2、pdbebit 参数说明</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">-a, --create                       新建samba用户<br> -r, --modify                       修改samba用户<br> -x, --delete                       删除samba用户<br> -L, --list                         列出全部samba用户，读取passdb.tdb数据库文件<br> -v, --verbose                      显示详细信息<br> -c, --account-control=STRING       账户控制值<br>-w, --smbpasswd-style              以smbpasswd格式输出<br> -u, --user=USER                    使用的用户<br> -N, --account-desc=STRING          设置账户描述<br> -f, --fullname=STRING              设置全名<br> -h, --homedir=STRING               设置家目录<br> -D, --drive=STRING                 设置家设备<br> -S, --script=STRING                设置登陆脚本<br> -p, --profile=STRING               设置配置文件路径<br> -I, --domain=STRING                设置用户域名<br> -U, --user SID=STRING              设置用户SID或RID<br> -M, --machine SID=STRING           设置设备SID或RID<br> -m, --machine                      账户是一个设备账户<br> -b, --backend=STRING               使用不同的passdb作为默认后端<br> -i, --import=STRING                指定后段导入用户账户<br> -e, --<span class="hljs-built_in">export</span>=STRING                导出用户账户到指定后端<br> --policies-reset                   恢复默认策略<br> -P, --account-policy=STRING        帐户策略的值(如最大密码有效期)<br> -C, --value=LONG                   设置账号策略值<br> --force-initialized-passwords      强制初始化passdb后端<br> -z, --bad-password-count-reset     重置错误密码<br> -Z, --logon-hours-reset            重置登陆时间<br> --time-format=STRING               时间参数的格式<br> -t, --password-from-stdin          从标准输入获取密码<br> -K, --kickoff-time=STRING          设置开始时间<br> --set-nt-hash=STRING               从nt-hash设置密码<br> -d, --debuglevel=DEBUGLEVEL        设置debug级别<br> -s, --configfile=CONFIGFILE        使用备用配置文件<br> -l, --log-basename=LOGFILEBASE     设置日志文件的基本名称<br> -V, --version                      输出版本号<br> --option=name=value                从命令行设置smb.conf选项<br> -?, --<span class="hljs-built_in">help</span>                         显示帮助信息<br> --usage                            显示简要的使用信息<br><br></code></pre></td></tr></table></figure><h5 id="2-3-3、配置Samba配置文件、-x2F-etc-x2F-samba-x2F-smb-conf"><a href="#2-3-3、配置Samba配置文件、-x2F-etc-x2F-samba-x2F-smb-conf" class="headerlink" title="2.3.3、配置Samba配置文件、&#x2F;etc&#x2F;samba&#x2F;smb.conf"></a>2.3.3、配置Samba配置文件、&#x2F;etc&#x2F;samba&#x2F;smb.conf</h5><p>samba服务的配置文件在<code>/etc/samba/smb.conf</code>，其中里面主要包含三个部分（配置简介、全局变量、共享服务配置），这里对配置文件的内容详细不做解释，只对用到的做解释。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 在最下方插入</span><br>[<span class="hljs-built_in">local</span>]<br>        comment = <span class="hljs-built_in">local</span> user<span class="hljs-comment"># 注释，说明改共享文件的信息 </span><br>        path = /samba/local   <span class="hljs-comment"># 共享文件路径</span><br>        writable = <span class="hljs-built_in">yes</span>  <span class="hljs-comment"># 允许写入</span><br>        browseable = <span class="hljs-built_in">yes</span> <span class="hljs-comment"># 允许访问</span><br><span class="hljs-comment"># 默认没有限制指定用户访问就是允许所有用户访问</span><br></code></pre></td></tr></table></figure><p><strong>检验配置文件是否有参数写错</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server samba]<span class="hljs-comment"># testparm </span><br>Load smb config files from /etc/samba/smb.conf<br>Loaded services file OK.<br>Weak crypto is allowed<br><br>Server role: ROLE_STANDALONE<br><br>Press enter to see a dump of your service definitions<br><br><span class="hljs-comment"># Global parameters</span><br>[global]<br>        map to guest = Bad User<br>        printcap name = cups<br>        security = USER<br>        username map = /etc/samba/smbusers<br>        workgroup = SAMBA<br>        idmap config * : backend = tdb<br>        cups options = raw<br><br><br>[homes]<br>        browseable = No<br>        comment = Home Directories<br>        inherit acls = Yes<br>        <span class="hljs-built_in">read</span> only = No<br>        valid <span class="hljs-built_in">users</span> = %S %D%w%S<br><br><br>[printers]<br>        browseable = No<br>        comment = All Printers<br>        create mask = 0600<br>        path = /var/tmp<br>        printable = Yes<br><br><br>[<span class="hljs-built_in">print</span>$]<br>        comment = Printer Drivers<br>        create mask = 0664<br>        directory mask = 0775<br>        force group = @printadmin<br>        path = /var/lib/samba/drivers<br>        write list = @printadmin root<br><br><br>[<span class="hljs-built_in">local</span>]<br>        comment = <span class="hljs-built_in">local</span> user<br>        path = /samba/local<br>        <span class="hljs-built_in">read</span> only = No<br><br></code></pre></td></tr></table></figure><h5 id="2-3-4、在iptables和selinux中放行smb服务"><a href="#2-3-4、在iptables和selinux中放行smb服务" class="headerlink" title="2.3.4、在iptables和selinux中放行smb服务"></a>2.3.4、在iptables和selinux中放行smb服务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server samba]<span class="hljs-comment"># setsebool -P samba_export_all_rw=1</span><br>[root@Server samba]<span class="hljs-comment"># setsebool -P samba_export_all_ro=1</span><br>[root@Server samba]<span class="hljs-comment"># getsebool -a | grep samba</span><br>samba_domain_controller --&gt; off<br>samba_enable_home_dirs --&gt; off<br>samba_export_all_ro --&gt; on（如果只读共享的文件只开此项就行）<br>samba_export_all_rw --&gt; on（如果读写，只开此项就行，修改文件时要看文件的<span class="hljs-built_in">chmod</span>属性。）<br>samba_share_nfs --&gt; off<br>use_samba_home_dirs --&gt; off<br>virt_use_samba --&gt; off<br><br><span class="hljs-comment"># 如不想共享文件可运行如下语句</span><br><br>[root@Server samba]<span class="hljs-comment"># setsebool -P samba_export_all_rw=0</span><br>[root@Server samba]<span class="hljs-comment"># setsebool -P samba_export_all_ro=0</span><br></code></pre></td></tr></table></figure><p>放行防火墙并重启服务</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 放行防火墙</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-service=samba --permanent</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload </span><br><span class="hljs-comment"># 重启服务</span><br>[root@Server ~]<span class="hljs-comment"># systemctl restart smb </span><br></code></pre></td></tr></table></figure><h5 id="2-3-5、win7测试"><a href="#2-3-5、win7测试" class="headerlink" title="2.3.5、win7测试"></a>2.3.5、win7测试</h5><p><img src="C:/Users/Administrator/Pictures/md/1.png" alt="image-20221003144746991"></p><p><img src="C:/Users/Administrator/Pictures/md/2.png" alt="image-20221003144937216"></p><p><img src="C:/Users/Administrator/Pictures/md/3.png" alt="image-20221003144650825"></p><p><img src="C:/Users/Administrator/Pictures/md/4.png" alt="image-20221003144704243"></p><h4 id="2-4、配置Samba匿名用户访问"><a href="#2-4、配置Samba匿名用户访问" class="headerlink" title="2.4、配置Samba匿名用户访问"></a>2.4、配置Samba匿名用户访问</h4><h5 id="2-4-1、创建共享目录并设置权限"><a href="#2-4-1、创建共享目录并设置权限" class="headerlink" title="2.4.1、创建共享目录并设置权限"></a>2.4.1、创建共享目录并设置权限</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 创建共享目录并设置权限</span><br>[root@Server ~]<span class="hljs-comment"># mkdir /samba/guest</span><br>[root@Server ~]<span class="hljs-comment"># chmod 777 /samba/guest</span><br></code></pre></td></tr></table></figure><h5 id="2-4-2、配置samba配置文件"><a href="#2-4-2、配置samba配置文件" class="headerlink" title="2.4.2、配置samba配置文件"></a>2.4.2、配置samba配置文件</h5><ol><li>在[global]下添加 map to guest &#x3D; Bad User，并写入新的共享服务信息，输入正确的时候颜色提示绿色</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[global]<br>        workgroup = SAMBA<br>        security = user<br>        passdb backend = tdbsam<br>        printing = cups<br>        printcap name = cups<br>        load printers = <span class="hljs-built_in">yes</span><br>        cups options = raw<br>        <span class="hljs-comment"># 添加一下行，意思就是配置了这一串就不用用户名密码也可以访问了</span><br>        map to guest = bad User<br>        <br><span class="hljs-comment"># 配置共享目录-最底部添加</span><br>[guest]<br>        comment = fictitious user<span class="hljs-comment"># 注释，说明改共享文件的信息</span><br>        path = /samba/guest<span class="hljs-comment"># 共享目录的路径 绝对路径</span><br>        public = <span class="hljs-built_in">yes</span><span class="hljs-comment"># 是否允许匿名访问</span><br></code></pre></td></tr></table></figure><h5 id="2-4-3、重启服务"><a href="#2-4-3、重启服务" class="headerlink" title="2.4.3、重启服务"></a>2.4.3、重启服务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 放行防火墙-之前放行过的话，不需要重复放行</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-service=samba --permanent</span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload </span><br><span class="hljs-comment"># 重启服务</span><br>[root@Server ~]<span class="hljs-comment"># systemctl restart smb </span><br></code></pre></td></tr></table></figure><h5 id="2-4-4、测试"><a href="#2-4-4、测试" class="headerlink" title="2.4.4、测试"></a>2.4.4、测试</h5><p><img src="C:/Users/Administrator/Pictures/md/5.png" alt="image-20221003151404871"></p><p><strong>直接就进入这里没有显示登录界面</strong></p><p><img src="C:/Users/Administrator/Pictures/md/6.png" alt="image-20221003151348297"></p><p><img src="C:/Users/Administrator/Pictures/md/7.png" alt="image-20221003151532918"></p><p><strong>我们会发现需要进入local共享文件的话需要登陆</strong></p><p><img src="C:/Users/Administrator/Pictures/md/8.png" alt="image-20221003151636118"></p><p><strong>到此匿名用户完成</strong></p><h4 id="2-5，配置Samba虚拟用户访问"><a href="#2-5，配置Samba虚拟用户访问" class="headerlink" title="2.5，配置Samba虚拟用户访问"></a>2.5，配置Samba虚拟用户访问</h4><h5 id="2-5-1、创建用户映射虚拟用户"><a href="#2-5-1、创建用户映射虚拟用户" class="headerlink" title="2.5.1、创建用户映射虚拟用户"></a>2.5.1、创建用户映射虚拟用户</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server samba]<span class="hljs-comment"># useradd guest</span><br>[root@Server samba]<span class="hljs-comment"># echo Qwer123.|passwd --stdin guest </span><br>更改用户 guest 的密码 。<br>passwd：所有的身份验证令牌已经成功更新。<br>[root@Server samba]<span class="hljs-comment"># pdbedit -a guest# 这个命令是和上面smbpasswd命令是一样的</span><br>new password:<br>retype new password:<br>Unix username:        guest<br>NT username:          <br>Account Flags:        [U          ]<br>User SID:             S-1-5-21-478335590-3805463860-3550396621-1002<br>Primary Group SID:    S-1-5-21-478335590-3805463860-3550396621-513<br>Full Name:            <br>Home Directory:       \\SERVER\guest<br>HomeDir Drive:        <br>Logon Script:         <br>Profile Path:         \\SERVER\guest\profile<br>Domain:               SERVER<br>Account desc:         <br>Workstations:         <br>Munged dial:          <br>Logon time:           0<br>Logoff time:          三, 06 2月 2036 23:06:39 CST<br>Kickoff time:         三, 06 2月 2036 23:06:39 CST<br>Password last <span class="hljs-built_in">set</span>:    一, 03 10月 2022 23:29:21 CST<br>Password can change:  一, 03 10月 2022 23:29:21 CST<br>Password must change: never<br>Last bad password   : 0<br>Bad password count  : 0<br>Logon hours         : FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF<br>[root@Server samba]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><h5 id="2-5-2、编辑smbusers文件添加配置"><a href="#2-5-2、编辑smbusers文件添加配置" class="headerlink" title="2.5.2、编辑smbusers文件添加配置"></a>2.5.2、编辑smbusers文件添加配置</h5><p><strong>映射虚拟用户</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server samba]<span class="hljs-comment"># cat /etc/samba/smbusers </span><br>guest = u01 u02<br></code></pre></td></tr></table></figure><h5 id="2-5-3、进入smb-conf配置文件中添加映射文件路径"><a href="#2-5-3、进入smb-conf配置文件中添加映射文件路径" class="headerlink" title="2.5.3、进入smb.conf配置文件中添加映射文件路径"></a>2.5.3、进入smb.conf配置文件中添加映射文件路径</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[global]<br>        workgroup = SAMBA<br>        security = user<br>        passdb backend = tdbsam<br>        printing = cups<br>        printcap name = cups<br>        load printers = <span class="hljs-built_in">yes</span><br>        cups options = raw<br>        map to guest = bad User<br>        <span class="hljs-comment"># 添加虚拟用户映射路径</span><br>        username map = /etc/samba/smbusers<br></code></pre></td></tr></table></figure><p><strong>检验配置文件是否有参数写错</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server samba]<span class="hljs-comment"># testparm </span><br>Load smb config files from /etc/samba/smb.conf<br>Loaded services file OK.<br>Weak crypto is allowed<br><br>Server role: ROLE_STANDALONE<br><br>Press enter to see a dump of your service definitions<br><br><span class="hljs-comment"># Global parameters</span><br>[global]<br>        map to guest = Bad User<br>        printcap name = cups<br>        security = USER<br>        username map = /etc/samba/smbusers<br>        workgroup = SAMBA<br>        idmap config * : backend = tdb<br>        cups options = raw<br><br><br>[homes]<br>        browseable = No<br>        comment = Home Directories<br>        inherit acls = Yes<br>        <span class="hljs-built_in">read</span> only = No<br>        valid <span class="hljs-built_in">users</span> = %S %D%w%S<br><br><br>[printers]<br>        browseable = No<br>        comment = All Printers<br>        create mask = 0600<br>        path = /var/tmp<br>        printable = Yes<br><br><br>[<span class="hljs-built_in">print</span>$]<br>        comment = Printer Drivers<br>        create mask = 0664<br>        directory mask = 0775<br>        force group = @printadmin<br>        path = /var/lib/samba/drivers<br>        write list = @printadmin root<br><br><br>[<span class="hljs-built_in">local</span>]<br>        comment = <span class="hljs-built_in">local</span> user<br>        path = /samba/local<br>        <span class="hljs-built_in">read</span> only = No<br><br><br>[guest]<br>        comment = fictitious user<br>        guest ok = Yes<br>        path = /samba/guest<br>        <span class="hljs-built_in">read</span> only = No<br></code></pre></td></tr></table></figure><h5 id="2-5-4、重启服务"><a href="#2-5-4、重启服务" class="headerlink" title="2.5.4、重启服务"></a>2.5.4、重启服务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server samba]<span class="hljs-comment"># systemctl restart smb</span><br></code></pre></td></tr></table></figure><h5 id="2-5-5、测试"><a href="#2-5-5、测试" class="headerlink" title="2.5.5、测试"></a>2.5.5、测试</h5><p>先删除之前的记录缓存</p><p><img src="C:/Users/Administrator/Pictures/md/9.png" alt="image-20221003153816731"></p><p><img src="C:/Users/Administrator/Pictures/md/10.png" alt="image-20221003153844193"></p><p><img src="C:/Users/Administrator/Pictures/md/11.png" alt="image-20221003154046298"></p><p><img src="C:/Users/Administrator/Pictures/md/12.png" alt="image-20221003154201803"></p><p><strong>我们使用虚拟用户访问，其实这个过程就是相当于我们在用guest用户在操作</strong></p><h4 id="2-6、吧我们的共享目录映射本地网络驱动"><a href="#2-6、吧我们的共享目录映射本地网络驱动" class="headerlink" title="2.6、吧我们的共享目录映射本地网络驱动"></a>2.6、吧我们的共享目录映射本地网络驱动</h4><h5 id="2-6-1、打开我的电脑，映射网络驱动"><a href="#2-6-1、打开我的电脑，映射网络驱动" class="headerlink" title="2.6.1、打开我的电脑，映射网络驱动"></a>2.6.1、打开我的电脑，映射网络驱动</h5><p><img src="C:/Users/Administrator/Pictures/md/13.png" alt="image-20221003154802332"></p><p><img src="C:/Users/Administrator/Pictures/md/14.png" alt="image-20221003154834148"></p><p><img src="C:/Users/Administrator/Pictures/md/15.png" alt="image-20221003154854835"></p><h4 id="2-7、配置文件常用权限参数-自行配置修改（还有很多参数自行了解）"><a href="#2-7、配置文件常用权限参数-自行配置修改（还有很多参数自行了解）" class="headerlink" title="2.7、配置文件常用权限参数-自行配置修改（还有很多参数自行了解）"></a>2.7、配置文件常用权限参数-自行配置修改（还有很多参数自行了解）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>]                 <span class="hljs-comment">#共享文件名称（也就是客户端访问时可以看到的那个名字）        </span><br>        comment = this is <span class="hljs-built_in">test</span>        <span class="hljs-comment">#共享文件夹的描述</span><br>        path = /home/ceshi             <span class="hljs-comment">#共享文件夹路径</span><br>        public = <span class="hljs-built_in">yes</span>                    <span class="hljs-comment">#是否允许guest账户访问</span><br>        writable =<span class="hljs-built_in">yes</span>                <span class="hljs-comment">#是否有写权限</span><br>        directory mask = 0777        <span class="hljs-comment">#默认创建目录权限</span><br>        create mask = 0777             <span class="hljs-comment">#默认创建文件权限</span><br>        valid <span class="hljs-built_in">users</span> = @<span class="hljs-built_in">test</span>,root  <span class="hljs-comment">#设置允许访问共享目录的用户@后跟组名，不写此行就对所有用户开放</span><br>        write list = @<span class="hljs-built_in">test</span>,root        <span class="hljs-comment">#设置有写权限的用户@后面跟的是组名</span><br>        browseable = <span class="hljs-built_in">yes</span>                 <span class="hljs-comment">#该指定共享目录可浏览</span><br>        available = <span class="hljs-built_in">yes</span>                      <span class="hljs-comment">#该指定共享资源可使用</span><br></code></pre></td></tr></table></figure><h3 id="！注意"><a href="#！注意" class="headerlink" title="！注意"></a>！注意</h3><p><strong>如果win测试的时候，没有弹出登录界面或者直接访问之前的共享目录，执行以下操作</strong></p><p><img src="C:/Users/Administrator/Pictures/md/16.png" alt="image-20221003151324340"></p><h3 id="Samba配置文件检验"><a href="#Samba配置文件检验" class="headerlink" title="Samba配置文件检验"></a>Samba配置文件检验</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#正确提示</span><br>[root@Server ~]<span class="hljs-comment">#  testparm</span><br><span class="hljs-comment">#提示 Load smb config files from /etc/samba/smb.conf</span><br><span class="hljs-comment">#提示 Loaded services file OK.</span><br><span class="hljs-comment">#提示 Server role: ROLE_STANDALONE</span><br><br><span class="hljs-comment">#错误提示</span><br>[root@Server ~]<span class="hljs-comment">#  testparm</span><br><span class="hljs-comment">#Load smb config files from /etc/samba/smb.conf</span><br><span class="hljs-comment">#报错内容指引： set_variable_helper(ye): value is not boolean!</span><br><span class="hljs-comment">#Error loading services.</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 文件共享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>httpd基础</title>
      <link href="/2023/06/06/httpd%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/06/06/httpd%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="httpd"><a href="#httpd" class="headerlink" title="httpd"></a>httpd</h1><h2 id="一、相关知识"><a href="#一、相关知识" class="headerlink" title="一、相关知识"></a>一、相关知识</h2><p>httpd是Apache超文本传输协议（HTTP）服务器的主程序。被设计为一个独立运行的后台进程，它会建立一个处理请求的子进程或线程的池。<br>apache服务是用来提供网页服务的，比如说，我们浏览一个网站实际上就是连接这个网站的服务器，当我们浏览百度新闻的时候其实就是在连接百度的一台服务器（计算机），在这台上服务器上部署了一些列服务，浏览网页的过程就是在这个服务器上下载文件的过程。</p><p>接下来的实验我们用的是apache服务来实验的</p><p>Apache源于NCSAhttpd服务器，经过多次修改，成为世界上最流行的Web服务器软件之一。Apache取自“a patchy server”的读音，意思是充满补丁的服务器，因为它是自由软件，所以不断有人来为它开发新的功能、新的特性、修改原来的缺陷。Apache的特点是简单、速度快、性能稳定，并可做代理服务器来使用。</p><h2 id="二、实验目标"><a href="#二、实验目标" class="headerlink" title="二、实验目标"></a>二、实验目标</h2><p><strong>基于IP地址</strong></p><p><strong>基于端口</strong></p><p><strong>基于域名</strong></p><p><strong>基于用户认证</strong></p><p><strong>基于个人主页</strong></p><p><strong>基于https</strong></p><h2 id="三、实验实施"><a href="#三、实验实施" class="headerlink" title="三、实验实施"></a>三、实验实施</h2><h3 id="1、实验规划"><a href="#1、实验规划" class="headerlink" title="1、实验规划"></a>1、实验规划</h3><table><thead><tr><th>IP地址</th><th>主机名</th><th>操作系统</th></tr></thead><tbody><tr><td>192.168.10.10</td><td>Server</td><td>Centos8</td></tr><tr><td>192.168.10.20</td><td>Client</td><td>Centos8</td></tr><tr><td>192.168.10.40</td><td>Client</td><td>Windows10</td></tr></tbody></table><h3 id="2、实验步骤"><a href="#2、实验步骤" class="headerlink" title="2、实验步骤"></a>2、实验步骤</h3><h4 id="2-1、安装Apache服务"><a href="#2-1、安装Apache服务" class="headerlink" title="2.1、安装Apache服务"></a>2.1、安装Apache服务</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># yum -y install httpd </span><br></code></pre></td></tr></table></figure><p><strong>配置文件选项参数详解</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">配置文件选项<br>DocumentRoot                      <span class="hljs-comment">#网页存在的路径</span><br>ServerRoot                        <span class="hljs-comment"># 服务目录</span><br>Listen 80                         <span class="hljs-comment"># 监听的端口； Listen   IP:PORT # 如果不写IP表示监听本机所有的可用IP地址，如果注明IP则表示监听在指定的IP地址之后。Listen选项可以出现多次，表示监听不同IP以及不同端口。</span><br>ServerAdmin                       <span class="hljs-comment"># 管理员邮箱</span><br>AllowOverride none                <span class="hljs-comment"># AllowOverride定义每个目录下.htaccess文件中的指令类型，通常设置为None，什么都不可以放；ALL所有都可以放</span><br>Require all denied                <span class="hljs-comment"># 全部拒绝访问</span><br>Require all granted               <span class="hljs-comment"># 全部允许访问</span><br>Require  ip   X.X.X.X             <span class="hljs-comment"># 允许指定 IP地址访问</span><br>Require  host    hostname         <span class="hljs-comment"># 允许指定的主机名访问</span><br>DocumentRoot                      <span class="hljs-comment"># 存放网页数据的目录</span><br>Options Indexes FollowSymLinks    <span class="hljs-comment"># Options选项，Indexes 允许目录浏览，当客户端指定要访问的目录，但没有指定要访问的文件，且目录下不存在默认文档时，显示该目录中的文件及子目录列表索引。 FollowSymLinks 允许跟踪符号链接文件所指定的源文件，跟踪符号链接，如果目录下存在软连接，则可以直接访问软连接指向的文件。</span><br>DirectoryIndex                    <span class="hljs-comment"># 默认可识别的网页</span><br>ErrorLog <span class="hljs-string">&quot;;logs/error_log&quot;</span>;       <span class="hljs-comment"># 错误的日志文件</span><br>LogLevel warn                     <span class="hljs-comment"># 日志等级</span><br>ErrorDocument                     <span class="hljs-comment"># 错误重定向</span><br>/etc/httpd/conf.d<span class="hljs-comment"># 目录下，创建一个以.conf结尾的文件。httpd配置文件，服务器优先识别此目录下的配置</span><br></code></pre></td></tr></table></figure><p><strong>注！</strong></p><p>1、httpd默认网页文件目录在 “&#x2F;var&#x2F;www&#x2F;html” 下，如要跟换默认网页目录，需给我们指定的路径<strong>修改路径的上下文</strong>为<httpd_sys_content_t></p><p>修改定义网站目录上下文–如果不修改需要关闭selinx不然网站无法访问，根据实际情况修改、</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># semanage fcontext -a -t httpd_sys_content_t &quot;/路径(/.*)?&quot;</span><br>[root@Server ~]<span class="hljs-comment"># restorecon -R -v /路径</span><br></code></pre></td></tr></table></figure><p>记不住命令的可以man帮助查看命令</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># man semanage </span><br>[root@Server ~]<span class="hljs-comment"># man 8 semanage-fcontext </span><br></code></pre></td></tr></table></figure><p>2、如果不关闭Selinux需要更改默认80端口使用的话，Selinux需要允许</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">semanage port -a -t http_port_t -p tcp 端口<br></code></pre></td></tr></table></figure><h4 id="2-2、基于IP地址"><a href="#2-2、基于IP地址" class="headerlink" title="2.2、基于IP地址"></a>2.2、基于IP地址</h4><p><strong>实验目的：客户端使用web服务器IP地址访问web服务器的网页</strong></p><h5 id="2-2-1、配置httpd配置文件"><a href="#2-2-1、配置httpd配置文件" class="headerlink" title="2.2.1、配置httpd配置文件"></a>2.2.1、配置httpd配置文件</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/httpd/conf.d/user.conf </span><br>Listen 80<br>&lt;VirtualHost *:80&gt;<br>Documentroot /var/www/html<br>Directoryindex index.html<br>&lt;Directory <span class="hljs-string">&quot;/var/www/html&quot;</span>&gt;<br>    AllowOverride None<br>    Options None<br>    Require all granted<br>&lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br><span class="hljs-comment"># 参数上面有解释</span><br></code></pre></td></tr></table></figure><h5 id="2-2-2、编写网页内容"><a href="#2-2-2、编写网页内容" class="headerlink" title="2.2.2、编写网页内容"></a>2.2.2、编写网页内容</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># echo &quot;基于 IP地址 测试 &quot; &gt;&gt; /var/www/html/index.html</span><br></code></pre></td></tr></table></figure><h5 id="2-2-3、重启服务、放行防火墙"><a href="#2-2-3、重启服务、放行防火墙" class="headerlink" title="2.2.3、重启服务、放行防火墙"></a>2.2.3、重启服务、放行防火墙</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl restart httpd</span><br>[root@Server ~]<span class="hljs-comment"># systemctl enable httpd </span><br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-port=80/tcp --permanent </span><br>success<br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload </span><br>success<br></code></pre></td></tr></table></figure><h5 id="2-2-4、测试"><a href="#2-2-4、测试" class="headerlink" title="2.2.4、测试"></a>2.2.4、测试</h5><p><strong>windows10测试</strong></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210051828727.png" alt="image-20221005182853658"></p><h4 id="2-3、基于端口"><a href="#2-3、基于端口" class="headerlink" title="2.3、基于端口"></a>2.3、基于端口</h4><p><strong>实验目的：客户端使用web服务器IP地址+端口可以访问到web服务器不同的网页内容</strong></p><h5 id="2-3-1、配置httpd配置文件"><a href="#2-3-1、配置httpd配置文件" class="headerlink" title="2.3.1、配置httpd配置文件"></a>2.3.1、配置httpd配置文件</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs BASH">[root@Server ~]<span class="hljs-comment"># vim /etc/httpd/conf.d/user.conf </span><br>Listen 80<span class="hljs-comment"># 这个是上面基于IP的</span><br>&lt;VirtualHost *:80&gt;<br>Documentroot /var/www/html<br>Directoryindex index.html<br>&lt;Directory <span class="hljs-string">&quot;/var/www/html&quot;</span>&gt;<br>    AllowOverride None<br>    Options None<br>    Require all granted<br>&lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br><br>Listen 8888<br>&lt;VirtualHost *:8888&gt;<br>Documentroot /test/httpd/8888/<br>Directoryindex index.html<br>&lt;Directory <span class="hljs-string">&quot;/test/httpd/8888/&quot;</span>&gt;<br>    AllowOverride None<br>    Options None<br>    Require all granted<br>&lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br><br>Listen 8080<br>&lt;VirtualHost *:80&gt;<br>Documentroot /test/httpd/8080/<br>Directoryindex index.html<br>&lt;Directory <span class="hljs-string">&quot;/test/httpd/8080/&quot;</span>&gt;<br>    AllowOverride None<br>    Options None<br>    Require all granted<br>&lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br></code></pre></td></tr></table></figure><h5 id="2-3-2、创建网页目录、更改网页目录上下文、Selinux允许端口"><a href="#2-3-2、创建网页目录、更改网页目录上下文、Selinux允许端口" class="headerlink" title="2.3.2、创建网页目录、更改网页目录上下文、Selinux允许端口"></a>2.3.2、创建网页目录、更改网页目录上下文、Selinux允许端口</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># mkdir -p /test/httpd/8888</span><br>[root@Server ~]<span class="hljs-comment"># mkdir -p /test/httpd/8080</span><br>[root@Server ~]<span class="hljs-comment"># semanage fcontext -a -t httpd_sys_content_t &quot;/test/httpd(/.*)?&quot;</span><br>[root@Server ~]<span class="hljs-comment"># restorecon -R -v /test/httpd/</span><br>Relabeled /test/httpd from unconfined_u:object_r:default_t:s0 to unconfined_u:object_r:httpd_sys_content_t:s0<br>Relabeled /test/httpd/8888 from unconfined_u:object_r:default_t:s0 to unconfined_u:object_r:httpd_sys_content_t:s0<br>Relabeled /test/httpd/8080 from unconfined_u:object_r:default_t:s0 to unconfined_u:object_r:httpd_sys_content_t:s0<br>[root@Server ~]<span class="hljs-comment"># ll -ldZ /test/httpd/*# 上下文修改完成</span><br>drwxr-xr-x. 2 root root unconfined_u:object_r:httpd_sys_content_t:s0 6 10月  6 02:43 /test/httpd/8080<br>drwxr-xr-x. 2 root root unconfined_u:object_r:httpd_sys_content_t:s0 6 10月  6 02:42 /test/httpd/8888<br>[root@Server ~]<span class="hljs-comment"># semanage port -a -t http_port_t -p tcp 8888</span><br>[root@Server ~]<span class="hljs-comment"># semanage port -a -t http_port_t -p tcp 8080</span><br></code></pre></td></tr></table></figure><h5 id="2-3-3、写入网页内容"><a href="#2-3-3、写入网页内容" class="headerlink" title="2.3.3、写入网页内容"></a>2.3.3、写入网页内容</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># echo &quot;基于端口测试 port&quot;8888&quot;&quot; &gt;&gt; /test/httpd/8888/index.html</span><br>[root@Server ~]<span class="hljs-comment"># echo &quot;基于端口测试 port&quot;8080&quot;&quot; &gt;&gt; /test/httpd/8080/index.html    </span><br>[root@Server ~]<span class="hljs-comment"># cat /test/httpd/8888/index.html </span><br>基于端口测试 port8888<br>[root@Server ~]<span class="hljs-comment"># cat /test/httpd/8080/index.html </span><br>基于端口测试 port8080<br></code></pre></td></tr></table></figure><h5 id="2-3-4、重启服务、放行防火墙"><a href="#2-3-4、重启服务、放行防火墙" class="headerlink" title="2.3.4、重启服务、放行防火墙"></a>2.3.4、重启服务、放行防火墙</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-port=8080/tcp --permanent</span><br>success<br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --add-port=8888/tcp --permanent </span><br>success<br>[root@Server ~]<span class="hljs-comment"># firewall-cmd --reload </span><br>success<br>[root@Server ~]<span class="hljs-comment"># systemctl restart httpd </span><br></code></pre></td></tr></table></figure><h5 id="2-3-5、测试"><a href="#2-3-5、测试" class="headerlink" title="2.3.5、测试"></a>2.3.5、测试</h5><p><strong>windows10测试</strong></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210051859392.png" alt="image-20221005185946355"></p><h4 id="2-4、基于域名"><a href="#2-4、基于域名" class="headerlink" title="2.4、基于域名"></a>2.4、基于域名</h4><p><strong>实验目的：客户端使用域名可以访问到web服务器网页</strong></p><p><strong>注：</strong>因为我们没有搭建DNS服务器，所以我修改hosts文件来实现域名访问。</p><p>“<em>hosts文件是Linux系统中一个负责IP地址与域名快速解析的文件</em>,以ASCII格式保存在“&#x2F;etc”目录下,文件名为“hosts”。 hosts文件包含了IP地址和主机名之间的映射,还包括主机名的别名。在没有域名服务器的情况下,系统上的所有网络程序都通过查询该文件来解析对应于某个主机名的IP地址,否则就需要使用DNS服务程序来解决。通常可以将常用的域名和IP地址映射加入到hosts文件中,实现快速方便的访问。</p><h5 id="2-4-1、修改hosts文件，配置域名解析"><a href="#2-4-1、修改hosts文件，配置域名解析" class="headerlink" title="2.4.1、修改hosts文件，配置域名解析"></a>2.4.1、修改hosts文件，配置域名解析</h5><p>我们这里使用，<a href="http://www.ncvt.com,这个域名/">www.ncvt.com，这个域名</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/hosts </span><br>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<br>::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<br>192.168.10.10   www.ncvt.com<br></code></pre></td></tr></table></figure><h5 id="2-4-2、配置httpd配置文件"><a href="#2-4-2、配置httpd配置文件" class="headerlink" title="2.4.2、配置httpd配置文件"></a>2.4.2、配置httpd配置文件</h5><p>我们在conf.d目录下从新写一个，配置文件。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server conf.d]<span class="hljs-comment"># cat yming.conf# 我们需要吧之前写的基于IP访问的那个配置注释掉，不然会占用80端口报错</span><br>Listen 80<br>&lt;VirtualHost *:80&gt;<br>ServerName www.ncvt.com<span class="hljs-comment"># 指定服务器域名</span><br>Documentroot /var/www/html<br>Directoryindex index.html<br>&lt;Directory <span class="hljs-string">&quot;/var/www/html&quot;</span>&gt;<br>    AllowOverride None<br>    Options None<br>    Require all granted<br>&lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br></code></pre></td></tr></table></figure><p>修改index.html文件内容</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server conf.d]<span class="hljs-comment"># echo &quot;基于域名 测试&quot; &gt; /var/www/html/index.html </span><br></code></pre></td></tr></table></figure><h5 id="2-4-3、重启服务"><a href="#2-4-3、重启服务" class="headerlink" title="2.4.3、重启服务"></a>2.4.3、重启服务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server conf.d]<span class="hljs-comment"># systemctl restart httpd</span><br></code></pre></td></tr></table></figure><h5 id="2-4-3、测试"><a href="#2-4-3、测试" class="headerlink" title="2.4.3、测试"></a>2.4.3、测试</h5><p>Windws10测试因为我们没有配置DNS所以在windows我们也需要修改win的hosts文件。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">C:\Windows\System32\drivers\etc\hosts<br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210061443028.png" alt="image-20221006144304933"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210061447457.png" alt="image-20221006144732425"></p><h4 id="2-5、基于用户认证"><a href="#2-5、基于用户认证" class="headerlink" title="2.5、基于用户认证"></a>2.5、基于用户认证</h4><p>​当我们在网站的某些特定目录放置了比较私密的信息，而又只想提供给我们信任的指定用户访问，这时就需要使用httpd的基于用户访问控制，其能帮你实现只有通过认证的用户才能被允许访问特定的资源，从而大大提高了网站的安全性。  </p><h5 id="2-5-1、httpd基于用户的访问控制简介"><a href="#2-5-1、httpd基于用户的访问控制简介" class="headerlink" title="2.5.1、httpd基于用户的访问控制简介"></a>2.5.1、httpd基于用户的访问控制简介</h5><blockquote><p>  基于用户的访问控制包含认证和授权两个过程：<br>    认证（Authentication）是指识别用户身份的过程<br>    授权（Authorization）是允许特定用户访问特定区域信息的过程。</p><p>  Apache的认证包含基本认证（Basic）和摘要认证（Digest）两种方式<br>    基本认证是Apache的基本功能，采用base64 加密 明文发送<br>    摘要认证需要在编译httpd的过程中预先配置“–enable-auth-digest”，部分浏览器不支持</p><p>  当用户访问基于用户认证网页时会经历一下两个阶段：<br>   质询：<br>    WWW-Authenticate: 服务器用401状态拒绝客户端请求，说明需要用户提供用户名和密码；弹出对话框；<br>   认证：<br>     Authorization：客户端用户填入账号密码后再次发请求至服务器；认证通过，则请求授权；</p></blockquote><h5 id="2-5-2、基于basic认证的配置"><a href="#2-5-2、基于basic认证的配置" class="headerlink" title="2.5.2、基于basic认证的配置"></a>2.5.2、基于basic认证的配置</h5><p>1、创建网页目录</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># mkdir /test/httpd/user</span><br>[root@Server ~]<span class="hljs-comment"># echo &quot;基于用户认证测试&quot; &gt; /test/httpd/user/index.html</span><br></code></pre></td></tr></table></figure><p> 2、创建虚拟用户</p><p>​     2.1、创建虚拟用户及文件</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">创建虚拟账户需要用到htpasswd命令，具体参数如下：<br>      htpasswd命令用于维护用户认证文件<br>             htpasswd [ -c ] [ -m ] [ -D ] passwdfile username<br>                          -c: 添加第一用户时创建此文件；<br>                          -m: 以md5格式加密用户密码存放；<br>                          -s: 以sha格式加密用户密码存放；<br>                          -D：删除指定用户<br>                          <br>[root@Server ~]<span class="hljs-comment"># mkdir /test/httpd/password# 创建存储虚拟用户密码的目录</span><br>[root@Server ~]<span class="hljs-comment"># htpasswd -m -c /test/httpd/password/.htpasswd user1# 第一次需要用-c 创建文件《.htpasswd》、后面是指定虚拟用户</span><br>New password: <br>Re-<span class="hljs-built_in">type</span> new password: <br>Adding password <span class="hljs-keyword">for</span> user user1<br>[root@Server ~]<span class="hljs-comment"># htpasswd -m /test/httpd/password/.htpasswd user2    # 创建第二个虚拟用户</span><br>New password: <br>Re-<span class="hljs-built_in">type</span> new password: <br>Adding password <span class="hljs-keyword">for</span> user user2<br></code></pre></td></tr></table></figure><h5 id="2-5-3、-修改-x2F-etc-x2F-httpd-x2F-conf-d-x2F-user2-conf配置文件"><a href="#2-5-3、-修改-x2F-etc-x2F-httpd-x2F-conf-d-x2F-user2-conf配置文件" class="headerlink" title="2.5.3、 修改&#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;user2.conf配置文件"></a>2.5.3、 修改&#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;user2.conf配置文件</h5><p>我们这里用到域名+8282端口访问基于用户认证的网页</p><p>参数解释：</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">想要认证需要在httpd.conf中找到想要认证页面的&lt;Directory/&gt;添加认证语句，<br>AuthType Basic         <span class="hljs-comment"># 是设置加密方式，基于basic认证</span><br>AuthName <span class="hljs-string">&quot;SOS Dan&quot;</span>     <span class="hljs-comment"># 登录提示的欢迎信息</span><br>AuthUserFile /var/jff2014/user.pw   <span class="hljs-comment"># 是密码保存路径</span><br>Require user username              <span class="hljs-comment"># 是指明用户名、指定.htpasswd 文件中的特定用户登录</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server conf.d]<span class="hljs-comment"># cat user2.conf </span><br>Listen 8282<br>&lt;VirtualHost *:8282&gt;<br>Servername www.ncvt.com<br>Documentroot /test/httpd/user<br>Directoryindex index.html<br>&lt;Directory <span class="hljs-string">&quot;/test/httpd/user&quot;</span>&gt;<br>    AllowOverride None<br>    Options None<br>    AuthType Basic<br>    Authname <span class="hljs-string">&quot;请输入用户名及密码登录&quot;</span><br>    AuthUserFile /test/httpd/password/.htpasswd<br>    Require user user1 user2<br>&lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br></code></pre></td></tr></table></figure><h5 id="2-5-4、配置selinux、防火墙"><a href="#2-5-4、配置selinux、防火墙" class="headerlink" title="2.5.4、配置selinux、防火墙"></a>2.5.4、配置selinux、防火墙</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server conf.d]<span class="hljs-comment"># semanage port -a -t http_port_t -p tcp 8282                 </span><br>[root@Server conf.d]<span class="hljs-comment"># firewall-cmd --add-port=8282/tcp --permanent </span><br>success<br>[root@Server conf.d]<span class="hljs-comment"># firewall-cmd --reload </span><br>succes<br></code></pre></td></tr></table></figure><h5 id="2-5-5、重启服务器"><a href="#2-5-5、重启服务器" class="headerlink" title="2.5.5、重启服务器"></a>2.5.5、重启服务器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server conf.d]<span class="hljs-comment"># systemctl enable httpd --now</span><br>[root@Server conf.d]<span class="hljs-comment"># systemctl restart httpd</span><br></code></pre></td></tr></table></figure><h5 id="2-5-6、测试"><a href="#2-5-6、测试" class="headerlink" title="2.5.6、测试"></a>2.5.6、测试</h5><p>windows测试，之前上面我们已经吧hosts文件些好了域名解析，接下来我们直接测试</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210061522625.png" alt="image-20221006152252578"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210061546231.png" alt="image-20221006154600188"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210061544888.png" alt="image-20221006154402841"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210061546231.png"></p><h4 id="2-6、基于个人主页"><a href="#2-6、基于个人主页" class="headerlink" title="2.6、基于个人主页"></a>2.6、基于个人主页</h4><p>案例描述：在IP地址为192.168.10.10的Apache服务器中，为系统用户lm设置个人主页。该用户的家目录为&#x2F;home&#x2F;lm，个人主页所在目录为html。案例分析:为了实现用户定制的个人主页空间，需要用到两个容器和。容器实现了系统用户个人主页的目录。容器则用来设置个人主页目录的访问控制权限。解决步骤：</p><h5 id="2-6-1、创建用户wsnb"><a href="#2-6-1、创建用户wsnb" class="headerlink" title="2.6.1、创建用户wsnb"></a>2.6.1、创建用户wsnb</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># useradd wsnb</span><br></code></pre></td></tr></table></figure><h5 id="2-6-2、修改配置文件"><a href="#2-6-2、修改配置文件" class="headerlink" title="2.6.2、修改配置文件"></a>2.6.2、修改配置文件</h5><p>个人主页配置文件&#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;userdir.conf </p><blockquote><p>#UserDir disabled 表示开启用户主页功能<br>UserDir public_html 定义用户主页目录</p></blockquote><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/httpd/conf.d/userdir.conf</span><br>&lt;IfModule mod_userdir.c&gt;<br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># UserDir is disabled by default since it can confirm the presence</span><br>    <span class="hljs-comment"># of a username on the system (depending on home directory</span><br>    <span class="hljs-comment"># permissions).</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#UserDir disabled# 注释掉关闭个人主页，注释了就表示开启用户主页功能</span><br><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment"># To enable requests to /~user/ to serve the user&#x27;s public_html</span><br>    <span class="hljs-comment"># directory, remove the &quot;UserDir disabled&quot; line above, and uncomment</span><br>    <span class="hljs-comment"># the following line instead:</span><br>    <span class="hljs-comment"># </span><br>    UserDir public_html<span class="hljs-comment"># 定义用户主页目录</span><br>&lt;/IfModule&gt;<br></code></pre></td></tr></table></figure><h5 id="2-6-3、进入-x2F-home-x2F-wsnb下创建public-html目录里面编写一个已-html结尾的文件"><a href="#2-6-3、进入-x2F-home-x2F-wsnb下创建public-html目录里面编写一个已-html结尾的文件" class="headerlink" title="2.6.3、进入&#x2F;home&#x2F;wsnb下创建public_html目录里面编写一个已.html结尾的文件"></a>2.6.3、进入&#x2F;home&#x2F;wsnb下创建public_html目录里面编写一个已.html结尾的文件</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server wsnb]<span class="hljs-comment"># pwd</span><br>/home/wsnb<br>[root@Server wsnb]<span class="hljs-comment"># mkdir public_html</span><br>[root@Server wsnb]<span class="hljs-comment"># cd public_html/</span><br>[root@Server public_html]<span class="hljs-comment"># touch index.html</span><br>[root@Server public_html]<span class="hljs-comment"># ls</span><br>index.html<br>[root@Server home]<span class="hljs-comment"># echo &quot;基于用户主页测试&quot;  &gt; /home/wsnb/public_html/index.html </span><br></code></pre></td></tr></table></figure><h5 id="2-6-4、允许Selinux、修改文件权限"><a href="#2-6-4、允许Selinux、修改文件权限" class="headerlink" title="2.6.4、允许Selinux、修改文件权限"></a>2.6.4、允许Selinux、修改文件权限</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 修改其所属组和所属用户为wsnb默认是root</span><br>[root@Server wsnb]<span class="hljs-comment"># chown -R  wsnb:wsnb public_html</span><br>[root@Server wsnb]<span class="hljs-comment"># ll</span><br>总用量 0<br>drwxr-xr-x. 2 wsnb wsnb 24 10月  8 01:33 public_html<br>[root@Server wsnb]<span class="hljs-comment"># cd public_html/</span><br>[root@Server public_html]<span class="hljs-comment"># ll</span><br>总用量 4<br>-rw-r--r--. 1 wsnb wsnb 25 10月  8 01:38 index.html<br><br><span class="hljs-comment"># 给目录文件755权限</span><br>[root@Server home]<span class="hljs-comment"># chmod 755 -R wsnb/</span><br>[root@Server home]<span class="hljs-comment"># ll -d wsnb</span><br>总用量 0<br>drwxr-xr-x. 5 wsnb  wsnb  129 10月  8 01:33 wsnb<br>[root@Server home]<span class="hljs-comment"># cd wsnb/</span><br>[root@Server wsnb]<span class="hljs-comment"># ll</span><br>总用量 0<br>drwxr-xr-x. 2 wsnb wsnb 24 10月  8 01:33 public_html<br>[root@Server wsnb]<span class="hljs-comment"># cd public_html/</span><br>[root@Server public_html]<span class="hljs-comment"># ll</span><br>总用量 4<br>-rwxr-xr-x. 1 wsnb wsnb 25 10月  8 01:38 index.html<br><br><span class="hljs-comment"># 打开selinux个人主页功能 setsebool -P httpd_enable_homedirs=on </span><br>[root@Server home]<span class="hljs-comment"># setsebool -P httpd_enable_homedirs=on </span><br><br></code></pre></td></tr></table></figure><h5 id="2-6-5、重启服务"><a href="#2-6-5、重启服务" class="headerlink" title="2.6.5、重启服务"></a>2.6.5、重启服务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server home]<span class="hljs-comment"># systemctl restart httpd</span><br></code></pre></td></tr></table></figure><p>2.6.6、测试</p><p><strong>windows测试</strong></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210071754246.png" alt="image-20221007175419149"></p><p>基于个人主页完成</p><h4 id="2-7、基于https"><a href="#2-7、基于https" class="headerlink" title="2.7、基于https"></a>2.7、基于https</h4><h5 id="2-7-1、https简介"><a href="#2-7-1、https简介" class="headerlink" title="2.7.1、https简介"></a>2.7.1、https简介</h5><p>HTTPS其实是有两部分组成：HTTP + SSL&#x2F;TLS，也就是在HTTP上又加了一层处理加密信息的模块。服务端和客户端的信息传输都会通过TLS进行加密，所以传输的数据都是加密后的数据</p><h6 id="2-7-1-1、https协议原理"><a href="#2-7-1-1、https协议原理" class="headerlink" title="2.7.1.1、https协议原理"></a>2.7.1.1、https协议原理</h6><p>首先，客户端与服务器建立连接，各自生成私钥和公钥，是不同的。服务器返给客户端一个公钥，然后客户端拿着这个公钥把要搜索的东西加密，称之为密文，并连并自己的公钥一起返回给服务器，服务器拿着自己的私钥解密密文，然后把响应到的数据用客户端的公钥加密，返回给客户端，客户端拿着自己的私钥解密密文，把数据呈现出来</p><h5 id="2-7-2、安装OpenSSL"><a href="#2-7-2、安装OpenSSL" class="headerlink" title="2.7.2、安装OpenSSL"></a>2.7.2、安装OpenSSL</h5><p>​我们将使用自签名证书。我们CentOS已经安装了Apache Web服务器。我们需要使用OpenSSL生成自签名证书。如果尚未安装OpenSSL它，可以使用yum来安装。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># yum -y install openssl mod_ssl</span><br></code></pre></td></tr></table></figure><p>安装完毕后，会自动生成 &#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;ssl.conf 文件，后面配置会用到！</p><h5 id="2-7-3、生成自签名证书"><a href="#2-7-3、生成自签名证书" class="headerlink" title="2.7.3、生成自签名证书"></a>2.7.3、生成自签名证书</h5><p>我们创建一个存放证书的目录</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># mkdir -p /http/ssl</span><br>[root@Server /]<span class="hljs-comment"># cd /http/ssl/</span><br>[root@Server ssl]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>下面的命令可以被用来产生一个自签名的证书。</p><p>首先，生成2048位的加密私钥</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ssl]<span class="hljs-comment"># openssl genrsa -out server.key 2048</span><br>Generating RSA private key, 2048 bit long modulus (2 primes)<br>..........+++++<br>......................................................................................................+++++<br>e is 65537 (0x010001)<br>[root@Server ssl]<span class="hljs-comment"># ll</span><br>总用量 4<br>-rw-------. 1 root root 1675 10月  8 07:28 server.key<br></code></pre></td></tr></table></figure><p>然后，生成证书签名请求（CSR），这里需要填写许多信息，如国家，省市，公司等</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ssl]<span class="hljs-comment"># openssl req -new -key server.key -out server.csr</span><br>You are about to be asked to enter information that will be incorporated<br>into your certificate request.<br>What you are about to enter is what is called a Distinguished Name or a DN.<br>There are quite a few fields but you can leave some blank<br>For some fields there will be a default value,<br>If you enter <span class="hljs-string">&#x27;.&#x27;</span>, the field will be left blank.<br>-----<br>Country Name (2 letter code) [XX]:CN<span class="hljs-comment"># 国家代号，中国输入CN</span><br>State or Province Name (full name) []:GX<span class="hljs-comment"># 省的全名，拼音</span><br>Locality Name (eg, city) [Default City]:NanNing<span class="hljs-comment"># 市的全名，拼音</span><br>Organization Name (eg, company) [Default Company Ltd]:Rgzn <span class="hljs-comment"># 公司英文名</span><br>Organizational Unit Name (eg, section) []:<span class="hljs-comment"># 组织单位</span><br>Common Name (eg, your name or your server<span class="hljs-string">&#x27;s hostname) []:ncvt.com # 主机名</span><br><span class="hljs-string">Email Address []:# 邮箱地址</span><br><span class="hljs-string">Please enter the following &#x27;</span>extra<span class="hljs-string">&#x27; attributes</span><br><span class="hljs-string">to be sent with your certificate request</span><br><span class="hljs-string">A challenge password []:</span><br><span class="hljs-string">An optional company name []:</span><br><span class="hljs-string">[root@Server ssl]# </span><br><span class="hljs-string">[root@Server ssl]# ll</span><br><span class="hljs-string">总用量 8</span><br><span class="hljs-string">-rw-r--r--. 1 root root  968 10月  8 07:30 server.csr</span><br><span class="hljs-string">-rw-------. 1 root root 1675 10月  8 07:28 server.key</span><br></code></pre></td></tr></table></figure><p>最后，生成类型为X509的自签名证书。有效期设置3650天，即有效期为10年</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ssl]<span class="hljs-comment"># openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt</span><br>Signature ok<br>subject=C = CN, ST = GX, L = NanNing, O = Rgzn, CN = ncvt.com<br>Getting Private key<br></code></pre></td></tr></table></figure><p><strong>查看</strong></p><p>查看自签名证书简要内容和查看证书的有效期</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ssl]<span class="hljs-comment"># openssl x509 -in server.crt -noout -issuer</span><br>issuer=C = CN, ST = GX, L = NanNing, O = Rgzn, CN = ncvt.com<br>[root@Server ssl]<span class="hljs-comment"># openssl x509 -in server.crt -noout -text  </span><br>Certificate:<br>    Data:<br>        Version: 1 (0x0)<br>        Serial Number:<br>            17:6d:b6:f1:5d:fe:08:d7:40:ac:03:fd:94:46:c1:79:fd:81:e7:97<br>        Signature Algorithm: sha256WithRSAEncryption<br>        Issuer: C = CN, ST = GX, L = NanNing, O = Rgzn, CN = ncvt.com<br>        Validity<br>            Not Before: Oct  7 23:34:40 2022 GMT<br>            Not After : Oct  4 23:34:40 2032 GMT<br>        Subject: C = CN, ST = GX, L = NanNing, O = Rgzn, CN = ncvt.com<br>        Subject Public Key Info:<br>            Public Key Algorithm: rsaEncryption<br>                RSA Public-Key: (2048 bit)<br>                Modulus:<br>                    00:e3:46:18:65:31:52:e1:56:ae:b9:40:b9:1a:81:<br>                    1d:db:9a:ad:17:2c:c3:d6:96:e2:51:9b:57:12:8d:<br>                    48:a6:ad:46:53:4a:4a:8c:77:43:bc:66:53:3c:57:<br>                    c9:0b:57:19:f1:2f:25:59:<span class="hljs-built_in">fc</span>:d6:b2:37:28:81:11:<br>                    0d:9d:34:01:9f:b3:8c:89:51:54:95:cc:b7:bc:46:<br>                    5f:26:ec:8c:e2:ef:<span class="hljs-built_in">fc</span>:a5:09:f1:73:d2:a0:46:f0:<br>                    93:99:1c:e9:77:27:c8:68:5d:72:8b:70:ad:e6:50:<br>                    a0:3b:8c:a9:02:31:cb:13:27:93:23:23:fb:b7:e4:<br>                    9a:7b:20:1d:13:a5:a9:b4:cb:1b:61:8b:4b:8a:79:<br>                    1c:ae:2b:08:d9:45:5f:aa:a8:6f:78:9f:47:8b:a1:<br>                    12:2c:18:0b:2a:c3:d1:12:c6:77:35:47:d6:9b:63:<br>                    93:35:4a:b2:cb:b5:e5:b5:41:8b:db:1b:a1:f3:d9:<br>                    17:dc:6a:5d:d0:db:62:03:e1:c2:ce:a5:0d:41:a9:<br>                    b1:82:88:89:e4:29:7d:6b:e3:06:f2:3a:3a:52:48:<br>                    20:bf:ce:bb:cf:7a:04:90:29:7e:9d:71:f8:bb:08:<br>                    dc:7d:c0:e6:bc:9b:79:28:48:3b:d7:b1:6a:ae:44:<br>                    5b:93:71:f2:50:cc:4e:e0:68:9f:5f:3b:cb:74:4d:<br>                    26:89<br>                Exponent: 65537 (0x10001)<br>    Signature Algorithm: sha256WithRSAEncryption<br>         <span class="hljs-built_in">df</span>:5a:18:cb:6b:27:0e:67:0c:17:c9:ac:3e:3f:9d:be:ac:d0:<br>         19:a3:09:70:8f:c0:b2:96:66:0e:3c:5d:6d:75:8c:ed:8b:5f:<br>         ef:0b:09:<span class="hljs-built_in">dd</span>:5a:59:71:24:61:c9:f1:3f:22:8c:82:f1:<span class="hljs-built_in">cd</span>:5d:<br>         7a:0b:76:c7:98:63:68:ea:36:43:77:b5:ec:da:f8:9d:1d:b8:<br>         ce:3a:1a:05:79:c6:50:08:65:25:90:3c:b1:a3:d9:ce:4e:c4:<br>         c0:8a:29:74:b0:43:ed:e0:1c:5f:bc:e1:eb:e0:31:01:6c:3a:<br>         a3:de:2e:19:3b:91:aa:ad:fa:fd:48:96:19:35:a7:10:62:cc:<br>         <span class="hljs-built_in">dd</span>:4d:09:c2:24:02:50:4b:1b:<span class="hljs-built_in">fc</span>:95:6b:c1:95:a7:93:5e:ee:<br>         74:d7:1a:10:ff:54:4c:9c:71:d9:db:30:f1:10:1d:c0:98:8c:<br>         f7:ff:86:ac:9c:b0:36:ea:f7:30:e8:94:cf:68:71:d3:8e:ce:<br>         ce:a2:ca:b8:6c:7a:a8:0c:21:bf:55:db:48:52:41:54:8c:ef:<br>         ed:82:8b:73:f7:91:f6:f3:d7:ae:89:99:1c:1b:1c:02:97:9c:<br>         ec:f9:a5:9a:4d:f5:a8:6f:9c:ed:ac:7d:65:16:37:c5:ed:33:<br>         e3:de:80:ec:46:79:<span class="hljs-built_in">df</span>:2b:0e:60:cf:cf:d6:ec:ae:94:6b:b1:<br>         6b:90:86:4e<br>[root@Server ssl]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>创建证书后，将文件复制到对应的目录。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ssl]<span class="hljs-comment"># ll</span><br>总用量 12<br>-rw-r--r--. 1 root root 1147 10月  8 07:34 server.crt<br>-rw-r--r--. 1 root root  968 10月  8 07:30 server.csr<br>-rw-------. 1 root root 1675 10月  8 07:28 server.key<br>[root@Server ssl]<span class="hljs-comment"># cp server.crt /etc/pki/tls/certs/</span><br>[root@Server ssl]<span class="hljs-comment"># cp server.csr /etc/pki/tls/private/</span><br>[root@Server ssl]<span class="hljs-comment"># cp server.key /etc/pki/tls/private/</span><br>[root@Server ssl]<span class="hljs-comment"># ll /etc/pki/tls/certs/</span><br>总用量 4<br>lrwxrwxrwx. 1 root root   49 5月  11 2019 ca-bundle.crt -&gt; /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem<br>lrwxrwxrwx. 1 root root   55 5月  11 2019 ca-bundle.trust.crt -&gt; /etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt<br>-rw-r--r--. 1 root root 1147 10月  8 07:37 server.crt<br>[root@Server ssl]<span class="hljs-comment"># ll /etc/pki/tls/private</span><br>总用量 8<br>-rw-r--r--. 1 root root  968 10月  8 07:37 server.csr<br>-rw-------. 1 root root 1675 10月  8 07:37 server.key<br>[root@Server ssl]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><h5 id="2-7-4、配置Apache-Web服务器"><a href="#2-7-4、配置Apache-Web服务器" class="headerlink" title="2.7.4、配置Apache Web服务器"></a>2.7.4、配置Apache Web服务器</h5><p>首先，修改下面的配置文件、&#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;ssl.conf。</p><p>仅需配置 SSLCertificateFile 和 SSLCertificateKeyFile证书部分</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ssl]<span class="hljs-comment"># cat /etc/httpd/conf.d/ssl.conf</span><br>SSLCertificateFile /etc/pki/tls/certs/server.crt<br>SSLCertificateKeyFile /etc/pki/tls/private/server.key<br></code></pre></td></tr></table></figure><h5 id="2-7-5、重启服务、放行防火墙、selinux"><a href="#2-7-5、重启服务、放行防火墙、selinux" class="headerlink" title="2.7.5、重启服务、放行防火墙、selinux"></a>2.7.5、重启服务、放行防火墙、selinux</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 允许443端口</span><br>[root@Server ssl]<span class="hljs-comment"># firewall-cmd --add-port=443/tcp --permanent </span><br>success<br>[root@Server ssl]<span class="hljs-comment"># firewall-cmd --reload </span><br>success<br><span class="hljs-comment"># Selinux允许443端口--默认是允许的</span><br>[root@Server ssl]<span class="hljs-comment"># semanage port -a -t http_port_t -p tcp 443</span><br><br><span class="hljs-comment"># 重启</span><br>[root@Server ssl]<span class="hljs-comment"># systemctl restart httpd</span><br></code></pre></td></tr></table></figure><h5 id="2-7-6、测试"><a href="#2-7-6、测试" class="headerlink" title="2.7.6、测试"></a>2.7.6、测试</h5><p>windows10测试</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210072349931.png" alt="image-20221007234945884"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210072345794.png" alt="image-20221007234549753"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202210072349158.png" alt="image-20221007234959122"></p><p><strong>因为是自签名证书显示不安全很正常</strong></p>]]></content>
      
      
      <categories>
          
          <category> Web服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker基础</title>
      <link href="/2023/06/06/Docker%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/06/06/Docker%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="一、相关知识"><a href="#一、相关知识" class="headerlink" title="一、相关知识"></a>一、相关知识</h2><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。</p><ul><li>环境管理复杂 - 从各种OS到各种中间件到各种app, 一款产品能够成功作为开发者需要关心的东西太多，且难于管理，这个问题几乎在所有现代IT相关行业都需要面对。</li><li>云计算时代的到来 - AWS的成功, 引导开发者将应用转移到 cloud 上, 解决了硬件管理的问题，然而中间件相关的问题依然存在 (所以openstack HEAT和 AWS cloudformation 都着力解决这个问题)。开发者思路变化提供了可能性。</li><li>虚拟化手段的变化 - cloud 时代采用标配硬件来降低成本，采用虚拟化手段来满足用户按需使用的需求以及保证可用性和隔离性。然而无论是KVM还是Xen在 docker 看来,都在浪费资源，因为用户需要的是高效运行环境而非OS, GuestOS既浪费资源又难于管理, 更加轻量级的LXC更加灵活和快速</li><li>LXC的移动性 - LXC在 linux 2.6 的 kernel 里就已经存在了，但是其设计之初并非为云计算考虑的，缺少标准化的描述手段和容器的可迁移性，决定其构建出的环境难于迁移和标准化管理(相对于KVM之类image和snapshot的概念)。docker 就在这个问题上做出实质性的革新。这是docker最独特的地方。</li></ul><h2 id="二、实验目标"><a href="#二、实验目标" class="headerlink" title="二、实验目标"></a>二、实验目标</h2><p>1、了解Docker常用命令</p><p>2、搭建一个Repository本地仓库</p><p>3、Dockerfile制作镜像</p><h2 id="二、实验实施"><a href="#二、实验实施" class="headerlink" title="二、实验实施"></a>二、实验实施</h2><h3 id="1、实验规划"><a href="#1、实验规划" class="headerlink" title="1、实验规划"></a>1、实验规划</h3><table><thead><tr><th>IP地址</th><th>主机名</th><th>系统</th></tr></thead><tbody><tr><td>192.168.10.10&#x2F;24</td><td>Server</td><td>Centos8</td></tr></tbody></table><h3 id="2、实施步骤"><a href="#2、实施步骤" class="headerlink" title="2、实施步骤"></a>2、实施步骤</h3><h4 id="2-1、配置基本环境"><a href="#2-1、配置基本环境" class="headerlink" title="2.1、配置基本环境"></a>2.1、配置基本环境</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#关闭防火墙</span><br>[root@Server ~]<span class="hljs-comment"># systemctl disable firewalld</span><br>[root@Server ~]<span class="hljs-comment"># systemctl stop firewalld</span><br><br><span class="hljs-comment">#关闭selinux</span><br>[root@Server ~]<span class="hljs-comment"># sed -i &quot;s/SELINUX=permissive/SELINUX=disabled/g&quot; /etc/selinux/config </span><br><br><span class="hljs-comment"># 开启路由转发</span><br>[root@Server ~]<span class="hljs-comment"># echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="hljs-comment"># 添加要访问internet的IP范围.</span><br>[root@Server ~]<span class="hljs-comment">#  iptables -t nat -A POSTROUTING -s 172.17.0.0/16 -j MASQUERADE</span><br>[root@Server ~]<span class="hljs-comment">#  service docker restart</span><br></code></pre></td></tr></table></figure><h4 id="2-2、安装Docker"><a href="#2-2、安装Docker" class="headerlink" title="2.2、安装Docker"></a>2.2、安装Docker</h4><p>第一步配置Docker的网络源，网址：</p><p><a href="https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.16bc1b11XuGchI&serviceType=mirror&tag=%E5%AE%B9%E5%99%A8">https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.16bc1b11XuGchI&serviceType=mirror&tag=%E5%AE%B9%E5%99%A8</a></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209282330945.jpg" alt="img"> </p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209282330468.jpg" alt="img"> </p><p>按照以上步骤</p><ul><li><p>Step 1: 安装必要的一些系统工具</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></code></pre></td></tr></table></figure></li><li><p>Step 2: 添加软件源信息</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># curl https://download.docker.com/linux/centos/docker-ce.repo -o /etc/yum.repos.d/docker-ce.repo</span><br></code></pre></td></tr></table></figure></li><li><p>Step 3：安装依赖（<strong>这是相比centos7的关键步骤</strong>）</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># yum install https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm</span><br></code></pre></td></tr></table></figure></li><li><p>Step 4: 更新并安装Docker-CE</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># sudo yum makecache fast</span><br><br><span class="hljs-comment"># 不指定版本安装默认安装最新版</span><br>[root@Server /]<span class="hljs-comment"># sudo yum -y install docker-ce-20.10.9-3.el8</span><br><br><span class="hljs-comment"># 查看可安装的历史版本</span><br>[root@Server /]<span class="hljs-comment"># yum list docker-ce --showduplicates | sort -r</span><br>docker-ce.x86_64                3:20.10.9-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.8-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.7-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.6-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.5-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.4-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.3-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.2-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.18-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.17-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.16-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.15-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.14-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.1-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.13-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.12-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.11-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.10-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.0-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:19.03.15-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:19.03.14-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:19.03.13-3.el8                docker-ce-stable<br>可安装的软件包<br></code></pre></td></tr></table></figure></li><li><p>Step 5: 自启动Docker服务</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># systemctl enable docker --now      </span><br>Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /usr/lib/systemd/system/docker.service.<br><br>启动docker<br>systemctl start docker<br><br>关闭docker<br>systemctl stop docker<br><br>重启docker<br>systemctl restart docker<br><br>docker设置随服务启动而自启动<br>systemctl <span class="hljs-built_in">enable</span> docker<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-查看docker版本"><a href="#2-3-查看docker版本" class="headerlink" title="2.3 查看docker版本"></a>2.3 查看docker版本</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># docker version</span><br>Client: Docker Engine - Community<br> Version:           20.10.18<br> API version:       1.41<br> Go version:        go1.18.6<br> Git commit:        b40c2f6<br> Built:             Thu Sep  8 23:11:56 2022<br> OS/Arch:           linux/amd64<br> Context:           default<br> Experimental:      <span class="hljs-literal">true</span><br><br>Server: Docker Engine - Community<br> Engine:<br>  Version:          20.10.9<br>  API version:      1.41 (minimum version 1.12)<br>  Go version:       go1.16.8<br>  Git commit:       79ea9d3<br>  Built:            Mon Oct  4 16:06:48 2021<br>  OS/Arch:          linux/amd64<br>  Experimental:     <span class="hljs-literal">false</span><br> containerd:<br>  Version:          1.6.8<br>  GitCommit:        9cd3357b7fd7218e4aec3eae239db1f68a5a6ec6<br> runc:<br>  Version:          1.1.4<br>  GitCommit:        v1.1.4-0-g5fd4c4d<br> docker-init:<br>  Version:          0.19.0<br>  GitCommit:        de40ad0<br></code></pre></td></tr></table></figure><h4 id="2-4、添加docker加速器"><a href="#2-4、添加docker加速器" class="headerlink" title="2.4、添加docker加速器"></a>2.4、添加docker加速器</h4><p>默认docker拉取的镜像在国外，拉取镜像的时候速度很慢，所以我们添加阿里云提供的镜像加速器</p><p>加速器网址：<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/%E9%98%BF%E9%87%8C%E4%BA%91.png" alt="image-20220928195926904"></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://ukhwyb9e.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br>[root@Server /]<span class="hljs-comment"># sudo systemctl daemon-reload</span><br>[root@Server /]<span class="hljs-comment"># sudo systemctl restart docker</span><br></code></pre></td></tr></table></figure><p>查看是否添加成功加速器</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># docker info</span><br>Client:<br> Context:    default<br> Debug Mode: <span class="hljs-literal">false</span><br> Plugins:<br>  app: Docker App (Docker Inc., v0.9.1-beta3)<br>  buildx: Docker Buildx (Docker Inc., v0.9.1-docker)<br>  scan: Docker Scan (Docker Inc., v0.17.0)<br><br>Server:<br> Containers: 0<br>  Running: 0<br>  Paused: 0<br>  Stopped: 0<br> Images: 0<br> Server Version: 20.10.9<br> Storage Driver: overlay2<br>  Backing Filesystem: xfs<br>  Supports d_type: <span class="hljs-literal">true</span><br>  Native Overlay Diff: <span class="hljs-literal">true</span><br>  userxattr: <span class="hljs-literal">false</span><br> Logging Driver: json-file<br> Cgroup Driver: cgroupfs<br> Cgroup Version: 1<br> Plugins:<br>  Volume: <span class="hljs-built_in">local</span><br>  Network: bridge host ipvlan macvlan null overlay<br>  Log: awslogs fluentd gcplogs gelf journald json-file <span class="hljs-built_in">local</span> logentries splunk syslog<br> Swarm: inactive<br> Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux<br> Default Runtime: runc<br> Init Binary: docker-init<br> containerd version: 9cd3357b7fd7218e4aec3eae239db1f68a5a6ec6<br> runc version: v1.1.4-0-g5fd4c4d<br> init version: de40ad0<br> Security Options:<br>  seccomp<br>   Profile: default<br> Kernel Version: 4.18.0-147.el8.x86_64<br> Operating System: CentOS Linux 8 (Core)<br> OSType: linux<br> Architecture: x86_64<br> CPUs: 2<br> Total Memory: 3.669GiB<br> Name: Server<br> ID: U6KW:E3NO:O73Z:6J4W:4TCK:WXRS:SILI:CAAK:Y7RY:X7LD:4IDW:QPN4<br> Docker Root Dir: /var/lib/docker<br> Debug Mode: <span class="hljs-literal">false</span><br> Registry: https://index.docker.io/v1/<br> Labels:<br> Experimental: <span class="hljs-literal">false</span><br> Insecure Registries:<br>  127.0.0.0/8<br> Registry Mirrors:<br>  https://ukhwyb9e.mirror.aliyuncs.com/      <span class="hljs-comment"># 查看这里已经添加上了加速器</span><br> Live Restore Enabled: <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="3、常用命令"><a href="#3、常用命令" class="headerlink" title="3、常用命令"></a>3、常用命令</h3><ul><li>Docker容器的一些命令按功能分类大致如下</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">Docker环境信息   info、version<br>镜像仓库命令      login、<span class="hljs-built_in">logout</span>、pull、push、search<br>镜像管理          build、images、import、load、rmi、save、tag、commit<br>容器生命周期管理  create、<span class="hljs-built_in">exec</span>、<span class="hljs-built_in">kill</span>、pause、restart、<span class="hljs-built_in">rm</span>、run、start、stop、unpause<br>容器运维操作      attach、<span class="hljs-built_in">export</span>、inspect、port、ps、rename、stats、top、<span class="hljs-built_in">wait</span>、<span class="hljs-built_in">cp</span>、diff、update<br>容器资源管理      volume、network<br>系统信息日志      events、<span class="hljs-built_in">history</span>、logs<br>1.events打印容器的实时系统事件<br>2.<span class="hljs-built_in">history</span> 打印出指定镜像的历史版本信息<br>3.logs打印容器中进程的运行日志<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker --<span class="hljs-built_in">help</span>       <span class="hljs-comment">#查看docker命令</span><br>docker info         <span class="hljs-comment">#docker 详细信息，镜像和容器</span><br>docker version      <span class="hljs-comment">#查看docker版本</span><br>帮助文档地址：https://docs.docker.com/reference/<br></code></pre></td></tr></table></figure><h4 id="3-1-镜像命令"><a href="#3-1-镜像命令" class="headerlink" title="3.1 镜像命令"></a>3.1 镜像命令</h4><h5 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 拉取镜像命令 docker pull &lt;镜像名称&gt;:&lt;版本&gt;</span><br><br>[root@Server /]<span class="hljs-comment"># docker pull centos:7</span><br>7: Pulling from library/centos<br>2d473b07cdd5: Pull complete <br>Digest: sha256:9d4bcbbb213dfd745b58be38b13b996ebb5ac315fe75711bd618426a630e0987<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> centos:7<br>docker.io/library/centos:7<br></code></pre></td></tr></table></figure><h5 id="列出本地镜像"><a href="#列出本地镜像" class="headerlink" title="列出本地镜像"></a>列出本地镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker images <span class="hljs-comment"># 查看docker镜像；</span><br><span class="hljs-comment"># 具体列解释含义：</span><br>REPOSITORY  <span class="hljs-comment">#镜像仓库源                </span><br>TAG         <span class="hljs-comment">#镜像的标签                 </span><br>IMAGE ID    <span class="hljs-comment">#镜像id            </span><br>CREATED     <span class="hljs-comment">#创建时间             </span><br>SIZE        <span class="hljs-comment">#大小</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># docker images</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>centos       7         eeb6ee3f44bd   12 months ago   204MB<br></code></pre></td></tr></table></figure><h5 id="查找镜像"><a href="#查找镜像" class="headerlink" title="查找镜像"></a>查找镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker search tomcat    <span class="hljs-comment"># 从Docker Hub上查找tomcat镜像</span><br>STARS：                 <span class="hljs-comment"># 关注度</span><br>docker search --filter=stars=300 tomcat     <span class="hljs-comment">#从Docker Hub上查找关注度大于300的tomcat镜像</span><br></code></pre></td></tr></table></figure><h4 id="3-2-运行-x2F-删除-容器"><a href="#3-2-运行-x2F-删除-容器" class="headerlink" title="3.2 运行&#x2F;删除..容器"></a>3.2 运行&#x2F;删除..容器</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker run -itd  --name centos7 -p 8888:23 -v /docker:/opt centos:7</span><br>3d4b6674e54b993827be4563361183dfbf2fccebea6130395bfc785f3f0c5ca5<br>[root@Server ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS        PORTS                                   NAMES<br>3d4b6674e54b   centos:7   <span class="hljs-string">&quot;/bin/bash&quot;</span>   3 seconds ago   Up 1 second   0.0.0.0:8888-&gt;23/tcp, :::8888-&gt;23/tcp   centos7<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">语法：docker run -it 镜像:版本号 bash环境  <br>参数解释：    <br>-i： 表示以“交互模式”运行容器<br>-t： 表示容器启动后会进入其命令行。加入这两个参数后，容器创建就能登录进去。即 分配一个伪终端。<br>--name： 为创建的容器命名<br>-v： 表示目录映射关系(前者是宿主机目录，后者是映射到宿主机上的目录，即 宿主机目录:容器中目录)，可以使 用多个-v 做多个目录或文件映射。注意:最好做目录映射，在宿主机上做修改，然后 共享到容器上。<br>-d： 在run后面加上-d参数,则会创建一个守护式容器在后台运行(这样创建容器后不 会自动登录容器，如果只加-i -t 两个参数，创建后就会自动进去容器)。<br>-p： 表示端口映射，前者是宿主机端口，后者是容器内的映射端口。可以使用多个-p 做多个端口映射<br>-e： 为容器设置环境变量<br>--network=host： 表示将主机的网络环境映射到容器中，容器的网络与主机相同<br></code></pre></td></tr></table></figure><h5 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">语法：docker <span class="hljs-built_in">rm</span> 容器ID  <br><span class="hljs-comment"># 正常删除  docker rm 容器ID  </span><br><span class="hljs-comment"># 强制删除  docker rm -f 容器ID</span><br><span class="hljs-comment"># 批量删除  docker rm -f $(docker ps -a)</span><br></code></pre></td></tr></table></figure><h3 id="4、搭建Repository本地仓库"><a href="#4、搭建Repository本地仓库" class="headerlink" title="4、搭建Repository本地仓库"></a>4、搭建Repository本地仓库</h3><p>​镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。</p><p><strong>搭建私有仓库</strong></p><p>创建仓库流程</p><h4 id="4-1、根据registry镜像创建容器"><a href="#4-1、根据registry镜像创建容器" class="headerlink" title="4.1、根据registry镜像创建容器"></a>4.1、根据registry镜像创建容器</h4><h5 id="下载registry镜像"><a href="#下载registry镜像" class="headerlink" title="下载registry镜像"></a>下载registry镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker pull registry</span><br>Using default tag: latest<br>latest: Pulling from library/registry<br>79e9f2f55bf5: Pull complete <br>0d96da54f60b: Pull complete <br>5b27040df4a2: Pull complete <br>e2ead8259a04: Pull complete <br>3790aef225b9: Pull complete <br>Digest: sha256:169211e20e2f2d5d115674681eb79d21a217b296b43374b8e39f97fcf866b375<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> registry:latest<br>docker.io/library/registry:latest<br></code></pre></td></tr></table></figure><h5 id="启动仓库容器"><a href="#启动仓库容器" class="headerlink" title="启动仓库容器"></a>启动仓库容器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run -d -p 5000:5000 --restart=always --name registry registry <br>--restart 标志会检查容器的退出代码，并据此来决定是否要重启容器，默认是不会重启。 <br>--restart的参数 always：无论容器的退出代码是什么，Docker都会自动重启该容器。<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker run -d -p 5000:5000 --restart=always --name registry registry </span><br>24846a8f867e6683c1d1895dd8d802ea629e8e882ca2bf28e7c9eb8f6e75acaf<br>[root@Server ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE      COMMAND                  CREATED          STATUS          PORTS                                       NAMES<br>24846a8f867e   registry   <span class="hljs-string">&quot;/entrypoint.sh /etc…&quot;</span>   2 seconds ago    Up 2 seconds    0.0.0.0:5000-&gt;5000/tcp, :::5000-&gt;5000/tcp   registry<br></code></pre></td></tr></table></figure><h5 id="检查容器效果"><a href="#检查容器效果" class="headerlink" title="检查容器效果"></a>检查容器效果</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@Server ~]# curl 127.0.0.1:5000/v2/_catalog  # 回显，可以看出我们搭建成功<br>&#123;&quot;repositories&quot;:[]&#125;<br></code></pre></td></tr></table></figure><h5 id="配置仓库权限"><a href="#配置仓库权限" class="headerlink" title="配置仓库权限"></a>配置仓库权限</h5><p>你如果把192.168.10.10:5000这样的内网地址作为私有仓库地址，这时你会发现无法成功推送镜像。</p><p>这是因为 Docker 默认不允许非HTTPS方式推送镜像。我们可以通过 Docker 的配置选项来取消这个限制</p><p>在&#x2F;etc&#x2F;docker&#x2F;daemon.json中写入如下内容（如果文件不存在请新建该文件）</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/docker/daemon.json </span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>          <span class="hljs-string">&quot;https://ibotsnhh.mirror.aliyuncs.com&quot;</span><br>  ],<br>  <span class="hljs-string">&quot;insecure-registries&quot;</span>: [<br>          <span class="hljs-string">&quot;192.168.10.10:5000&quot;</span><br>  ]<br>&#125;<br>[root@Server ~]<span class="hljs-comment"># systemctl  daemon-reload </span><br>[root@Server ~]<span class="hljs-comment"># systemctl  restart docker</span><br></code></pre></td></tr></table></figure><h4 id="4-2、提交镜像至私有仓库"><a href="#4-2、提交镜像至私有仓库" class="headerlink" title="4.2、提交镜像至私有仓库"></a>4.2、提交镜像至私有仓库</h4><h5 id="标记镜像语法为："><a href="#标记镜像语法为：" class="headerlink" title="标记镜像语法为："></a>标记镜像语法为：</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>registry     latest    b8604a3fe854   10 months ago   26.2MB<br>centos       7         eeb6ee3f44bd   12 months ago   204MB<br>[root@Server ~]<span class="hljs-comment"># docker tag registry:latest 192.168.10.10:5000/registry:v1</span><br>[root@Server ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY                    TAG       IMAGE ID       CREATED         SIZE<br>192.168.10.10:5000/registry   v1        b8604a3fe854   10 months ago   26.2MB<br>registry                      latest    b8604a3fe854   10 months ago   26.2MB<br>centos                        7         eeb6ee3f44bd   12 months ago   204MB<br></code></pre></td></tr></table></figure><h5 id="上传镜像至仓库"><a href="#上传镜像至仓库" class="headerlink" title="上传镜像至仓库"></a>上传镜像至仓库</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker push 192.168.10.10:5000/registry:v1</span><br>The push refers to repository [192.168.10.10:5000/registry]<br>aeccf26589a7: Pushed <br>f640be0d5aad: Pushed <br>aa4330046b37: Pushed <br>ad10b481abe7: Pushed <br>69715584ec78: Pushed <br>v1: digest: sha256:36cb5b157911061fb610d8884dc09e0b0300a767a350563cbfd88b4b85324ce4 size: 1363<br>[root@Server ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># curl 127.0.0.1:5000/v2/_catalog</span><br>&#123;<span class="hljs-string">&quot;repositories&quot;</span>:[<span class="hljs-string">&quot;registry&quot;</span>]&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209291551495.png" alt="image-20220929155137457"></p><h3 id="5、Dockerfile制作镜像"><a href="#5、Dockerfile制作镜像" class="headerlink" title="5、Dockerfile制作镜像"></a>5、Dockerfile制作镜像</h3><p><strong>DockerFile介绍</strong></p><p>DockerFile就是用来构建镜像的！命令脚本！先体验一下！</p><p>通过这个脚本可以生成镜像，镜像的一层一层的，脚本一个个的命令，每个命令都是一层</p><p>构建步骤：</p><ul><li>编写一个dockerfile文件</li><li>docker build构建成为一个镜像</li><li>docker run 运行镜像</li><li>docker psuh 发布镜像（DockerHub，阿里云镜像仓库！，本地仓库）</li></ul><p>查看一下官方是怎么做的？打开dockerHub</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209291930342.png" alt="image-20220929193055289"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209291931801.png" alt="image-20220929193101748"></p><p>很多官方的镜像都是基础包，很多功能都没有，我们通常会自己搭建自自己的镜像！</p><p>官方既然可以制作镜像，那我们也可以！</p><h4 id="5-1DockerFile构建过程"><a href="#5-1DockerFile构建过程" class="headerlink" title="5.1DockerFile构建过程"></a>5.1<strong>DockerFile构建过程</strong></h4><p>DockerFile构建镜像有很多指令</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209292134670.png" alt="image-20220929213404599"></p><h5 id="基础知识："><a href="#基础知识：" class="headerlink" title="基础知识："></a><strong>基础知识：</strong></h5><ul><li><p>每个保留关键字（指令）都是必须是大写字母</p></li><li><p>执行从上到下顺序执行</p></li><li><p># 表示注释</p></li><li><p>每个指令都会创建提交一个新的镜像层，并提交！</p><p>现在知道这些指令后，我们自己练习自己写一个镜像！</p></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM          <span class="hljs-comment"># 基础镜像，一切从这里构建</span><br>MAINTAINER    <span class="hljs-comment"># 镜像是谁写的，名字 + 邮箱</span><br>RUN           <span class="hljs-comment"># Docker镜像构建的时候需要运行的命令</span><br>ADD           <span class="hljs-comment"># 步骤：tomcat镜像，这个tomcat压缩包！添加内容</span><br>WORKDIR       <span class="hljs-comment"># 指定镜像的工作目录</span><br>VOLUME        <span class="hljs-comment"># 挂载卷的目录位置</span><br>EXPOSE        <span class="hljs-comment"># 指定暴露端口配置（和我们运行容器用的&quot;-p&quot;是一个道理）</span><br>CMD           <span class="hljs-comment"># 指定这个容器启动的时候要运行的命令，只要最后一个会生效，可被代替</span><br>ENTRYPOINT    <span class="hljs-comment"># 指定这个容器启动的时候要运行的命令，可以追加命令</span><br>ONBUILD       <span class="hljs-comment"># 当构一个被继承 DockerFile 这个时候就会运行 ONBUILD 的指令，触发指令</span><br>COPY          <span class="hljs-comment"># 类似ADD，将我们文件拷贝到镜像中,简写（CP）</span><br>ENV           <span class="hljs-comment"># 构建的时候设置环境变量</span><br></code></pre></td></tr></table></figure><h5 id="创建一个自己的镜像"><a href="#创建一个自己的镜像" class="headerlink" title="创建一个自己的镜像"></a>创建一个自己的镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># cp /etc/yum.repos.d/CentOS-Base.repo . # 吧yum文件拷贝到当前目录</span><br>[root@Server dockerfile]<span class="hljs-comment"># ls</span><br>CentOS-Base.repo  Dockerfile<br><span class="hljs-comment"># 编写dockerFile</span><br>[root@Server dockerfile]<span class="hljs-comment"># cat Dockerfile </span><br>FROM centos:8<br>MAINTAINER wsnb<br>RUN <span class="hljs-built_in">rm</span> -rf /etc/yum.repos.d/*<br>COPY centos1.repo  /etc/yum.repos.d/<br>RUN <span class="hljs-built_in">ls</span> /etc/yum.repos.d/<br>EXPOSE 80<br>EXPOSE 23<br>RUN yum -y install vim<br>CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;-----end----&quot;</span><br>CMD /bin/bash<br></code></pre></td></tr></table></figure><h5 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker build -f Dockerfile .</span><br>Sending build context to Docker daemon  7.168kB<br>Step 1/10 : FROM centos:8<br> ---&gt; 5d0da3dc9764<br>Step 2/10 : MAINTAINER wsnb<br> ---&gt; Using cache<br> ---&gt; ed9d500cdb37<br>Step 3/10 : RUN <span class="hljs-built_in">rm</span> -rf /etc/yum.repos.d/*<br> ---&gt; Using cache<br> ---&gt; 079f615ff017<br>Step 4/10 : COPY centos1.repo  /etc/yum.repos.d/<br> ---&gt; fa0f3dc832aa<br>Step 5/10 : RUN <span class="hljs-built_in">ls</span> /etc/yum.repos.d/<br> ---&gt; Running <span class="hljs-keyword">in</span> f18d2ba20735<br>centos1.repo<br>Removing intermediate container f18d2ba20735<br> ---&gt; 25f4da680fe3<br>Step 6/10 : EXPOSE 80<br> ---&gt; Running <span class="hljs-keyword">in</span> 997af4746276<br>Removing intermediate container 997af4746276<br> ---&gt; 929d0301e5aa<br>Step 7/10 : EXPOSE 23<br> ---&gt; Running <span class="hljs-keyword">in</span> 583c5a4706c3<br>Removing intermediate container 583c5a4706c3<br> ---&gt; 9eada5309326<br>Step 8/10 : RUN yum -y install vim<br> ---&gt; Running <span class="hljs-keyword">in</span> 545279c89e93<br>CentOS-8.5.2111 - Base - mirrors.aliyun.com     2.1 MB/s | 4.6 MB     00:02    <br>CentOS-8.5.2111 - Extras - mirrors.aliyun.com    38 kB/s |  10 kB     00:00    <br>CentOS-8.5.2111 - AppStream - mirrors.aliyun.co 1.7 MB/s | 8.4 MB     00:04    <br>Dependencies resolved.<br>================================================================================<br> Package             Arch        Version                   Repository      Size<br>================================================================================<br>Installing:<br> vim-enhanced        x86_64      2:8.0.1763-16.el8         AppStream      1.4 M<br>Installing dependencies:<br> gpm-libs            x86_64      1.20.7-17.el8             AppStream       39 k<br> vim-common          x86_64      2:8.0.1763-16.el8         AppStream      6.3 M<br> vim-filesystem      noarch      2:8.0.1763-16.el8         AppStream       49 k<br> <span class="hljs-built_in">which</span>               x86_64      2.21-16.el8               base            49 k<br><br>Transaction Summary<br>================================================================================<br>Install  5 Packages<br><br>Total download size: 7.8 M<br>Installed size: 30 M<br>Downloading Packages:<br>(1/5): gpm-libs-1.20.7-17.el8.x86_64.rpm        392 kB/s |  39 kB     00:00    <br>(2/5): which-2.21-16.el8.x86_64.rpm             171 kB/s |  49 kB     00:00    <br>(3/5): vim-filesystem-8.0.1763-16.el8.noarch.rp 529 kB/s |  49 kB     00:00    <br>(4/5): vim-enhanced-8.0.1763-16.el8.x86_64.rpm  819 kB/s | 1.4 MB     00:01    <br>(5/5): vim-common-8.0.1763-16.el8.x86_64.rpm    1.8 MB/s | 6.3 MB     00:03    <br>--------------------------------------------------------------------------------<br>Total                                           2.2 MB/s | 7.8 MB     00:03     <br>Running transaction check<br>Transaction check succeeded.<br>Running transaction <span class="hljs-built_in">test</span><br>Transaction <span class="hljs-built_in">test</span> succeeded.<br>Running transaction<br>  Preparing        :                                                        1/1 <br>  Installing       : vim-filesystem-2:8.0.1763-16.el8.noarch                1/5 <br>  Installing       : vim-common-2:8.0.1763-16.el8.x86_64                    2/5 <br>  Installing       : gpm-libs-1.20.7-17.el8.x86_64                          3/5 <br>  Running scriptlet: gpm-libs-1.20.7-17.el8.x86_64                          3/5 <br>  Installing       : which-2.21-16.el8.x86_64                               4/5 <br>  Installing       : vim-enhanced-2:8.0.1763-16.el8.x86_64                  5/5 <br>  Running scriptlet: vim-enhanced-2:8.0.1763-16.el8.x86_64                  5/5 <br>  Running scriptlet: vim-common-2:8.0.1763-16.el8.x86_64                    5/5 <br>  Verifying        : which-2.21-16.el8.x86_64                               1/5 <br>  Verifying        : gpm-libs-1.20.7-17.el8.x86_64                          2/5 <br>  Verifying        : vim-common-2:8.0.1763-16.el8.x86_64                    3/5 <br>  Verifying        : vim-enhanced-2:8.0.1763-16.el8.x86_64                  4/5 <br>  Verifying        : vim-filesystem-2:8.0.1763-16.el8.noarch                5/5 <br><br>Installed:<br>  gpm-libs-1.20.7-17.el8.x86_64         vim-common-2:8.0.1763-16.el8.x86_64    <br>  vim-enhanced-2:8.0.1763-16.el8.x86_64 vim-filesystem-2:8.0.1763-16.el8.noarch<br>  which-2.21-16.el8.x86_64             <br><br>Complete!<br>Removing intermediate container 545279c89e93<br> ---&gt; e5c8ca311626<br>Step 9/10 : CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;-----end----&quot;</span><br> ---&gt; Running <span class="hljs-keyword">in</span> 91baa8452cd7<br>Removing intermediate container 91baa8452cd7<br> ---&gt; d2b0074329d9<br>Step 10/10 : CMD /bin/bash<br> ---&gt; Running <span class="hljs-keyword">in</span> ceabd3e1268a<br>Removing intermediate container ceabd3e1268a<br> ---&gt; 0c30ff39bef8<br>Successfully built 0c30ff39bef8<br></code></pre></td></tr></table></figure><h5 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker run -itd --name wsnb1 0c30ff39bef8 </span><br>ccaa11ce6d86cdcaa1238453f6aa52b020781604f8120a2dd8b65cfe5f3db9d4<br>[root@Server dockerfile]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS            NAMES<br>ccaa11ce6d86   0c30ff39bef8   <span class="hljs-string">&quot;/bin/sh -c /bin/bash&quot;</span>   2 seconds ago    Up 2 seconds    23/tcp, 80/tcp   wsnb1<br>51fde0d4f283   centos:8       <span class="hljs-string">&quot;/bin/bash&quot;</span>              11 minutes ago   Up 11 minutes                    centos8<br></code></pre></td></tr></table></figure><h5 id="标记镜像"><a href="#标记镜像" class="headerlink" title="标记镜像"></a>标记镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker tag  0c30ff39bef8  192.168.10.10:5000/wsnb:v1    </span><br>[root@Server dockerfile]<span class="hljs-comment"># docker images</span><br>REPOSITORY                    TAG       IMAGE ID       CREATED         SIZE<br>192.168.10.10:5000/wsnb       v1        0c30ff39bef8   6 minutes ago   298MB    <span class="hljs-comment"># 这个</span><br>192.168.10.10:5000/registry   v1        b8604a3fe854   10 months ago   26.2MB<br>registry                      latest    b8604a3fe854   10 months ago   26.2MB<br>centos                        7         eeb6ee3f44bd   12 months ago   204MB<br>centos                        8         5d0da3dc9764   12 months ago   231MB<br></code></pre></td></tr></table></figure><h5 id="上传本地仓库"><a href="#上传本地仓库" class="headerlink" title="上传本地仓库"></a>上传本地仓库</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker push 192.168.10.10:5000/wsnb:v1</span><br>The push refers to repository [192.168.10.10:5000/wsnb]<br>ac5a788b3b8b: Pushed <br>06ce684cb1c7: Pushed <br>df1b7ae76752: Pushed <br>74ddd0ec08fa: Pushed <br>v1: digest: sha256:93e9be3e76a1bbc246fea55535dca553b1a5d8f22ae82dc6bd507e05b33fcd4e size: 1155<br></code></pre></td></tr></table></figure><h5 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@Server dockerfile]# curl 192.168.10.10:5000/v2/_catalog       <br>&#123;&quot;repositories&quot;:[&quot;registry&quot;,&quot;wsnb&quot;]&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209292117255.png" alt="image-20220929211739200"></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Container </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chrony时间服务器</title>
      <link href="/2023/06/06/Chrony%E6%97%B6%E9%97%B4%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2023/06/06/Chrony%E6%97%B6%E9%97%B4%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Chrony"><a href="#Chrony" class="headerlink" title="Chrony"></a>Chrony</h1><h2 id="一、相关知识"><a href="#一、相关知识" class="headerlink" title="一、相关知识"></a>一、相关知识</h2><p>时间的同步有两个命令：ntp（123udp端口）和chrony（323udp端口）,这里介绍一下chrony的简单配置<br>chrony由chrony包提供，chrony是服务端客户端一体的，既可以做别的机器的服务器，也可以做别的机器的客户端，这取决于谁去同步谁</p><ul><li><p>chrony有两个主程序：chronyc和chronyd</p></li><li><p>chronyd：后台运行的守护进程，用于调整内核中运行的系统时钟和时钟服务器同步。chronyc：命令行用户工具，用于监控性能并进行多样化的配置。chronyc可支持交互式也支持命令行方式</p></li></ul><blockquote><p>chronyc：进入设置</p><p>accheck： 检查NTP访问是否对特定主机可用</p><p>activity： 该命令会显示有多少NTP源在线&#x2F;离线</p><p>add server： 手动添加一台新的NTP服务器。</p><p>clients： 在客户端报告已访问到服务器</p><p>delete： 手动移除NTP服务器或对等服务器</p><p>settime： 手动设置守护进程时间</p><p>tracking： 显示系统时间信息</p><p>help：显示帮助</p><p>chrony的配置文件是&#x2F;etc&#x2F;chrony.conf</p></blockquote><h2 id="二、实验目标"><a href="#二、实验目标" class="headerlink" title="二、实验目标"></a>二、实验目标</h2><p>1、安装Chrony时钟同步服务器</p><p>2、配置Chrony时钟服务器</p><p>3、Client客户端同步Chrony服务器时间</p><h2 id="三、实验实施"><a href="#三、实验实施" class="headerlink" title="三、实验实施"></a>三、实验实施</h2><h3 id="1、实验规划"><a href="#1、实验规划" class="headerlink" title="1、实验规划"></a>1、实验规划</h3><table><thead><tr><th>IP地址</th><th>主机名</th><th>操作系统</th></tr></thead><tbody><tr><td>192.168.10.10</td><td>Server</td><td>Centos8</td></tr><tr><td>192.168.10.20</td><td>Client</td><td>Centos8</td></tr></tbody></table><h3 id="2、实验步骤"><a href="#2、实验步骤" class="headerlink" title="2、实验步骤"></a>2、实验步骤</h3><h4 id="2-1安装配置chrony时钟同步服务"><a href="#2-1安装配置chrony时钟同步服务" class="headerlink" title="2.1安装配置chrony时钟同步服务"></a>2.1安装配置chrony时钟同步服务</h4><p>下面来看下实际操作<br>1，一般系统已经装上了chrony包，没装的话yum install chrony 安装一下</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 安装chrony</span><br>[root@Server ~]<span class="hljs-comment"># yum install chrony</span><br><br><span class="hljs-comment"># Chrony服务开机自启动，一般chrony服务默认开机自启动了</span><br>[root@Server ~]<span class="hljs-comment"># systemctl enable chronyd --now</span><br>Created symlink /etc/systemd/system/multi-user.target.wants/chronyd.service → /usr/lib/systemd/system/chronyd.service.<br></code></pre></td></tr></table></figure><p>2，配置&#x2F;etc&#x2F;chrony.conf文件。如果是做客户端，那么指定一下同步的时间服务器就好了；如果是做服务端，配置允许同步的客户端网段，配置当时间服务器的网络不可用时，采用服务器自身的时间同步。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 修改3个位置</span><br>server 192.168.10.10 iburst <span class="hljs-comment"># 指定自己的时钟服务器</span><br>allow 192.168.10.0/24<span class="hljs-comment"># 允许本地那个网段的客户端，可以同步时钟服务器时间</span><br><span class="hljs-built_in">local</span> stratum 10<span class="hljs-comment"># 当网络服务器不可以时，使用本地时间</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/chrony.conf    </span><br><span class="hljs-comment"># Use public servers from the pool.ntp.org project.</span><br><span class="hljs-comment"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span><br><span class="hljs-comment">#pool 2.centos.pool.ntp.org iburst# 此处是默认时钟服务器，注释掉</span><br>server 192.168.10.10 iburst<span class="hljs-comment"># 指定自己的时钟服务器</span><br><span class="hljs-comment"># Record the rate at which the system clock gains/losses time.</span><br>driftfile /var/lib/chrony/drift<br><br><span class="hljs-comment"># Allow the system clock to be stepped in the first three updates</span><br><span class="hljs-comment"># if its offset is larger than 1 second.</span><br>makestep 1.0 3<br><br><span class="hljs-comment"># Enable kernel synchronization of the real-time clock (RTC).</span><br>rtcsync<br><br><span class="hljs-comment"># Enable hardware timestamping on all interfaces that support it.</span><br><span class="hljs-comment">#hwtimestamp *</span><br><br><span class="hljs-comment"># Increase the minimum number of selectable sources required to adjust</span><br><span class="hljs-comment"># the system clock.</span><br><span class="hljs-comment">#minsources 2</span><br><br><span class="hljs-comment"># Allow NTP client access from local network.</span><br>allow 192.168.10.0/24<span class="hljs-comment"># 允许本地那个网段的客户端，可以同步时钟服务器时间</span><br><br><span class="hljs-comment"># Serve time even if not synchronized to a time source.</span><br><span class="hljs-built_in">local</span> stratum 10<span class="hljs-comment"># 当网络服务器不可以时，使用本地时间</span><br><br><span class="hljs-comment"># Specify file containing keys for NTP authentication.</span><br>keyfile /etc/chrony.keys<br><br><span class="hljs-comment"># Get TAI-UTC offset and leap seconds from the system tz database.</span><br>leapsectz right/UTC<br><br><span class="hljs-comment"># Specify directory for log files.</span><br>logdir /var/log/chrony<br><br><span class="hljs-comment"># Select which information is logged.</span><br><span class="hljs-comment">#log measurements statistics tracking</span><br></code></pre></td></tr></table></figure><p>2，重启chronyd服务 systemctl restart chronyd，一般时间服务器器都会开机启动的，systemctl enable chronyd</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># systemctl restart chronyd</span><br>[root@Server ~]<span class="hljs-comment"># systemctl enable chronyd</span><br></code></pre></td></tr></table></figure><p>3，chrony sources -v，查看时间的同步情况，最后一行的*代表同步成功，？代表未同步。可看到，每个符号什么意思，命令中都有解释</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># chronyc sources -v</span><br>210 Number of sources = 1<br><br>  .-- Source mode  <span class="hljs-string">&#x27;^&#x27;</span> = server, <span class="hljs-string">&#x27;=&#x27;</span> = peer, <span class="hljs-string">&#x27;#&#x27;</span> = <span class="hljs-built_in">local</span> clock.<br> / .- Source state <span class="hljs-string">&#x27;*&#x27;</span> = current synced, <span class="hljs-string">&#x27;+&#x27;</span> = combined , <span class="hljs-string">&#x27;-&#x27;</span> = not combined,<br>| /   <span class="hljs-string">&#x27;?&#x27;</span> = unreachable, <span class="hljs-string">&#x27;x&#x27;</span> = time may be <span class="hljs-keyword">in</span> error, <span class="hljs-string">&#x27;~&#x27;</span> = time too variable.<br>||                                                 .- xxxx [ yyyy ] +/- zzzz<br>||      Reachability register (octal) -.           |  xxxx = adjusted offset,<br>||      Log2(Polling interval) --.      |          |  yyyy = measured offset,<br>||                                \     |          |  zzzz = estimated error.<br>||                                 |    |           \<br>MS Name/IP address         Stratum Poll Reach LastRx Last sample               <br>===============================================================================<br>^* Server                       10   6   377    97     +0ns[ +794ns] +/- 1857ns<br></code></pre></td></tr></table></figure><p>另一个时间相关的命令:timedatectl</p><blockquote><p>查看日期时间、时区及NTP状态：timedatectl<br>查看时区列表：timedatectl list-timezones<br>修改时区：timedatectl set-timezone Asia&#x2F;Shanghai<br>修改日期时间：timedatectl set-time “2022-09-30 10:30:00“</p></blockquote><p>2.2Client同步Chrony时钟服务器</p><p>1，配置&#x2F;etc&#x2F;chrony.conf文件。客户端指定同步的时间服务器。</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209300855099.png" alt="image-20220930085548057"></p><p>2，重启chronyd服务 systemctl restart chronyd，chrony sources -v，查看时间的同步情况，最后一行的*代表同步成功，？代表未同步。可看到，每个符号什么意思，命令中都有解释</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Client /]<span class="hljs-comment"># systemctl restart chronyd</span><br>[root@Client /]<span class="hljs-comment"># chronyc sources -v</span><br>210 Number of sources = 1<br><br>  .-- Source mode  <span class="hljs-string">&#x27;^&#x27;</span> = server, <span class="hljs-string">&#x27;=&#x27;</span> = peer, <span class="hljs-string">&#x27;#&#x27;</span> = <span class="hljs-built_in">local</span> clock.<br> / .- Source state <span class="hljs-string">&#x27;*&#x27;</span> = current synced, <span class="hljs-string">&#x27;+&#x27;</span> = combined , <span class="hljs-string">&#x27;-&#x27;</span> = not combined,<br>| /   <span class="hljs-string">&#x27;?&#x27;</span> = unreachable, <span class="hljs-string">&#x27;x&#x27;</span> = time may be <span class="hljs-keyword">in</span> error, <span class="hljs-string">&#x27;~&#x27;</span> = time too variable.<br>||                                                 .- xxxx [ yyyy ] +/- zzzz<br>||      Reachability register (octal) -.           |  xxxx = adjusted offset,<br>||      Log2(Polling interval) --.      |          |  yyyy = measured offset,<br>||                                \     |          |  zzzz = estimated error.<br>||                                 |    |           \<br>MS Name/IP address         Stratum Poll Reach LastRx Last sample               <br>===============================================================================<br>^* 192.168.10.10                11   6    17     0  -3363us[-3420us] +/-   12ms<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 时间同步服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker网络</title>
      <link href="/2023/03/10/Docker%E7%BD%91%E7%BB%9C/"/>
      <url>/2023/03/10/Docker%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<p><strong>Docker网络</strong></p><p>理解Docker0</p><p>清空环境（之前练习的环境）</p><p><strong>测试</strong></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802133031396.png" alt="image-20220802133031396"></p><p>三个网络</p><p>？问题 ， Dokcer是如何处理网络访问的</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802133043045.png" alt="image-20220802133043045"></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@wsnb /]<span class="hljs-comment"># docker run -itd --name centos01 centos </span><br>c6651df2600725171ed8fd55dd8b9fc4de8247b17916ea235989b86054792208<br>[root@wsnb /]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS         PORTS     NAMES<br>c6651df26007   centos    <span class="hljs-string">&quot;/bin/bash&quot;</span>   3 seconds ago   Up 2 seconds             centos01<br>[root@wsnb /]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p>进入容器查看容器IP地址–发现容器启动的时候回生成一个eth0@if41地址–docker分配的</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@wsnb /]<span class="hljs-comment"># docker exec -it c6651df26007 ip addr</span><br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    <span class="hljs-built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>40: eth0@if41: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default <br>    <span class="hljs-built_in">link</span>/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0<br>    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0<br>       valid_lft forever preferred_lft forever<br>[root@wsnb /]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>容器内和容器外可以互通交互，docker容器连通宿主机靠的是docker0网卡</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@wsnb /]<span class="hljs-comment"># docker exec -it c6651df26007 ip addr</span><br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    <span class="hljs-built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>40: eth0@if41: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default <br>    <span class="hljs-built_in">link</span>/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0<br>    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0<br>       valid_lft forever preferred_lft forever<br>[root@wsnb /]<span class="hljs-comment"># ping 172.17.0.2</span><br>PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.<br>64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.047 ms<br>^C<br>--- 172.17.0.2 ping statistics ---<br>1 packets transmitted, 1 received, 0% packet loss, time 0ms<br>rtt min/avg/max/mdev = 0.047/0.047/0.047/0.000 ms<br>[root@wsnb /]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Container </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker基础搭建</title>
      <link href="/2023/03/10/Docker%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/03/10/Docker%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="一、相关知识"><a href="#一、相关知识" class="headerlink" title="一、相关知识"></a>一、相关知识</h2><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。</p><ul><li>环境管理复杂 - 从各种OS到各种中间件到各种app, 一款产品能够成功作为开发者需要关心的东西太多，且难于管理，这个问题几乎在所有现代IT相关行业都需要面对。</li><li>云计算时代的到来 - AWS的成功, 引导开发者将应用转移到 cloud 上, 解决了硬件管理的问题，然而中间件相关的问题依然存在 (所以openstack HEAT和 AWS cloudformation 都着力解决这个问题)。开发者思路变化提供了可能性。</li><li>虚拟化手段的变化 - cloud 时代采用标配硬件来降低成本，采用虚拟化手段来满足用户按需使用的需求以及保证可用性和隔离性。然而无论是KVM还是Xen在 docker 看来,都在浪费资源，因为用户需要的是高效运行环境而非OS, GuestOS既浪费资源又难于管理, 更加轻量级的LXC更加灵活和快速</li><li>LXC的移动性 - LXC在 linux 2.6 的 kernel 里就已经存在了，但是其设计之初并非为云计算考虑的，缺少标准化的描述手段和容器的可迁移性，决定其构建出的环境难于迁移和标准化管理(相对于KVM之类image和snapshot的概念)。docker 就在这个问题上做出实质性的革新。这是docker最独特的地方。</li></ul><h2 id="二、实验目标"><a href="#二、实验目标" class="headerlink" title="二、实验目标"></a>二、实验目标</h2><p>1、了解Docker常用命令</p><p>2、搭建一个Repository本地仓库</p><p>3、Dockerfile制作镜像</p><h2 id="二、实验实施"><a href="#二、实验实施" class="headerlink" title="二、实验实施"></a>二、实验实施</h2><h3 id="1、实验规划"><a href="#1、实验规划" class="headerlink" title="1、实验规划"></a>1、实验规划</h3><table><thead><tr><th>IP地址</th><th>主机名</th><th>系统</th></tr></thead><tbody><tr><td>192.168.10.10&#x2F;24</td><td>Server</td><td>Centos8</td></tr></tbody></table><h3 id="2、实施步骤"><a href="#2、实施步骤" class="headerlink" title="2、实施步骤"></a>2、实施步骤</h3><h4 id="2-1、配置基本环境"><a href="#2-1、配置基本环境" class="headerlink" title="2.1、配置基本环境"></a>2.1、配置基本环境</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#关闭防火墙</span><br>[root@Server ~]<span class="hljs-comment"># systemctl disable firewalld</span><br>[root@Server ~]<span class="hljs-comment"># systemctl stop firewalld</span><br><br><span class="hljs-comment">#关闭selinux</span><br>[root@Server ~]<span class="hljs-comment"># sed -i &quot;s/SELINUX=permissive/SELINUX=disabled/g&quot; /etc/selinux/config </span><br><br><span class="hljs-comment"># 开启路由转发</span><br>[root@Server ~]<span class="hljs-comment"># echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="hljs-comment"># 添加要访问internet的IP范围.</span><br>[root@Server ~]<span class="hljs-comment">#  iptables -t nat -A POSTROUTING -s 172.17.0.0/16 -j MASQUERADE</span><br>[root@Server ~]<span class="hljs-comment">#  service docker restart</span><br></code></pre></td></tr></table></figure><h4 id="2-2、安装Docker"><a href="#2-2、安装Docker" class="headerlink" title="2.2、安装Docker"></a>2.2、安装Docker</h4><p>第一步配置Docker的网络源，网址：</p><p><a href="https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.16bc1b11XuGchI&serviceType=mirror&tag=%E5%AE%B9%E5%99%A8">https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.16bc1b11XuGchI&serviceType=mirror&tag=%E5%AE%B9%E5%99%A8</a></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209282330945.jpg" alt="img"> </p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209282330468.jpg" alt="img"> </p><p>按照以上步骤</p><ul><li><p>Step 1: 安装必要的一些系统工具</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></code></pre></td></tr></table></figure></li><li><p>Step 2: 添加软件源信息</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># curl https://download.docker.com/linux/centos/docker-ce.repo -o /etc/yum.repos.d/docker-ce.repo</span><br></code></pre></td></tr></table></figure></li><li><p>Step 3：安装依赖（<strong>这是相比centos7的关键步骤</strong>）</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># yum install https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm</span><br></code></pre></td></tr></table></figure></li><li><p>Step 4: 更新并安装Docker-CE</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># sudo yum makecache fast</span><br><br><span class="hljs-comment"># 不指定版本安装默认安装最新版</span><br>[root@Server /]<span class="hljs-comment"># sudo yum -y install docker-ce-20.10.9-3.el8</span><br><br><span class="hljs-comment"># 查看可安装的历史版本</span><br>[root@Server /]<span class="hljs-comment"># yum list docker-ce --showduplicates | sort -r</span><br>docker-ce.x86_64                3:20.10.9-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.8-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.7-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.6-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.5-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.4-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.3-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.2-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.18-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.17-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.16-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.15-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.14-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.1-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:20.10.13-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.12-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.11-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.10-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:20.10.0-3.el8                 docker-ce-stable<br>docker-ce.x86_64                3:19.03.15-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:19.03.14-3.el8                docker-ce-stable<br>docker-ce.x86_64                3:19.03.13-3.el8                docker-ce-stable<br>可安装的软件包<br></code></pre></td></tr></table></figure></li><li><p>Step 5: 自启动Docker服务</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># systemctl enable docker --now      </span><br>Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /usr/lib/systemd/system/docker.service.<br><br>启动docker<br>systemctl start docker<br><br>关闭docker<br>systemctl stop docker<br><br>重启docker<br>systemctl restart docker<br><br>docker设置随服务启动而自启动<br>systemctl <span class="hljs-built_in">enable</span> docker<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-查看docker版本"><a href="#2-3-查看docker版本" class="headerlink" title="2.3 查看docker版本"></a>2.3 查看docker版本</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># docker version</span><br>Client: Docker Engine - Community<br> Version:           20.10.18<br> API version:       1.41<br> Go version:        go1.18.6<br> Git commit:        b40c2f6<br> Built:             Thu Sep  8 23:11:56 2022<br> OS/Arch:           linux/amd64<br> Context:           default<br> Experimental:      <span class="hljs-literal">true</span><br><br>Server: Docker Engine - Community<br> Engine:<br>  Version:          20.10.9<br>  API version:      1.41 (minimum version 1.12)<br>  Go version:       go1.16.8<br>  Git commit:       79ea9d3<br>  Built:            Mon Oct  4 16:06:48 2021<br>  OS/Arch:          linux/amd64<br>  Experimental:     <span class="hljs-literal">false</span><br> containerd:<br>  Version:          1.6.8<br>  GitCommit:        9cd3357b7fd7218e4aec3eae239db1f68a5a6ec6<br> runc:<br>  Version:          1.1.4<br>  GitCommit:        v1.1.4-0-g5fd4c4d<br> docker-init:<br>  Version:          0.19.0<br>  GitCommit:        de40ad0<br></code></pre></td></tr></table></figure><h4 id="2-4、添加docker加速器"><a href="#2-4、添加docker加速器" class="headerlink" title="2.4、添加docker加速器"></a>2.4、添加docker加速器</h4><p>默认docker拉取的镜像在国外，拉取镜像的时候速度很慢，所以我们添加阿里云提供的镜像加速器</p><p>加速器网址：<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/%E9%98%BF%E9%87%8C%E4%BA%91.png" alt="image-20220928195926904"></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://ukhwyb9e.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br>[root@Server /]<span class="hljs-comment"># sudo systemctl daemon-reload</span><br>[root@Server /]<span class="hljs-comment"># sudo systemctl restart docker</span><br></code></pre></td></tr></table></figure><p>查看是否添加成功加速器</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># docker info</span><br>Client:<br> Context:    default<br> Debug Mode: <span class="hljs-literal">false</span><br> Plugins:<br>  app: Docker App (Docker Inc., v0.9.1-beta3)<br>  buildx: Docker Buildx (Docker Inc., v0.9.1-docker)<br>  scan: Docker Scan (Docker Inc., v0.17.0)<br><br>Server:<br> Containers: 0<br>  Running: 0<br>  Paused: 0<br>  Stopped: 0<br> Images: 0<br> Server Version: 20.10.9<br> Storage Driver: overlay2<br>  Backing Filesystem: xfs<br>  Supports d_type: <span class="hljs-literal">true</span><br>  Native Overlay Diff: <span class="hljs-literal">true</span><br>  userxattr: <span class="hljs-literal">false</span><br> Logging Driver: json-file<br> Cgroup Driver: cgroupfs<br> Cgroup Version: 1<br> Plugins:<br>  Volume: <span class="hljs-built_in">local</span><br>  Network: bridge host ipvlan macvlan null overlay<br>  Log: awslogs fluentd gcplogs gelf journald json-file <span class="hljs-built_in">local</span> logentries splunk syslog<br> Swarm: inactive<br> Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux<br> Default Runtime: runc<br> Init Binary: docker-init<br> containerd version: 9cd3357b7fd7218e4aec3eae239db1f68a5a6ec6<br> runc version: v1.1.4-0-g5fd4c4d<br> init version: de40ad0<br> Security Options:<br>  seccomp<br>   Profile: default<br> Kernel Version: 4.18.0-147.el8.x86_64<br> Operating System: CentOS Linux 8 (Core)<br> OSType: linux<br> Architecture: x86_64<br> CPUs: 2<br> Total Memory: 3.669GiB<br> Name: Server<br> ID: U6KW:E3NO:O73Z:6J4W:4TCK:WXRS:SILI:CAAK:Y7RY:X7LD:4IDW:QPN4<br> Docker Root Dir: /var/lib/docker<br> Debug Mode: <span class="hljs-literal">false</span><br> Registry: https://index.docker.io/v1/<br> Labels:<br> Experimental: <span class="hljs-literal">false</span><br> Insecure Registries:<br>  127.0.0.0/8<br> Registry Mirrors:<br>  https://ukhwyb9e.mirror.aliyuncs.com/      <span class="hljs-comment"># 查看这里已经添加上了加速器</span><br> Live Restore Enabled: <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="3、常用命令"><a href="#3、常用命令" class="headerlink" title="3、常用命令"></a>3、常用命令</h3><ul><li>Docker容器的一些命令按功能分类大致如下</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">Docker环境信息   info、version<br>镜像仓库命令      login、<span class="hljs-built_in">logout</span>、pull、push、search<br>镜像管理          build、images、import、load、rmi、save、tag、commit<br>容器生命周期管理  create、<span class="hljs-built_in">exec</span>、<span class="hljs-built_in">kill</span>、pause、restart、<span class="hljs-built_in">rm</span>、run、start、stop、unpause<br>容器运维操作      attach、<span class="hljs-built_in">export</span>、inspect、port、ps、rename、stats、top、<span class="hljs-built_in">wait</span>、<span class="hljs-built_in">cp</span>、diff、update<br>容器资源管理      volume、network<br>系统信息日志      events、<span class="hljs-built_in">history</span>、logs<br>1.events打印容器的实时系统事件<br>2.<span class="hljs-built_in">history</span> 打印出指定镜像的历史版本信息<br>3.logs打印容器中进程的运行日志<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker --<span class="hljs-built_in">help</span>       <span class="hljs-comment">#查看docker命令</span><br>docker info         <span class="hljs-comment">#docker 详细信息，镜像和容器</span><br>docker version      <span class="hljs-comment">#查看docker版本</span><br>帮助文档地址：https://docs.docker.com/reference/<br></code></pre></td></tr></table></figure><h4 id="3-1-镜像命令"><a href="#3-1-镜像命令" class="headerlink" title="3.1 镜像命令"></a>3.1 镜像命令</h4><h5 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 拉取镜像命令 docker pull &lt;镜像名称&gt;:&lt;版本&gt;</span><br><br>[root@Server /]<span class="hljs-comment"># docker pull centos:7</span><br>7: Pulling from library/centos<br>2d473b07cdd5: Pull complete <br>Digest: sha256:9d4bcbbb213dfd745b58be38b13b996ebb5ac315fe75711bd618426a630e0987<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> centos:7<br>docker.io/library/centos:7<br></code></pre></td></tr></table></figure><h5 id="列出本地镜像"><a href="#列出本地镜像" class="headerlink" title="列出本地镜像"></a>列出本地镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker images <span class="hljs-comment"># 查看docker镜像；</span><br><span class="hljs-comment"># 具体列解释含义：</span><br>REPOSITORY  <span class="hljs-comment">#镜像仓库源                </span><br>TAG         <span class="hljs-comment">#镜像的标签                 </span><br>IMAGE ID    <span class="hljs-comment">#镜像id            </span><br>CREATED     <span class="hljs-comment">#创建时间             </span><br>SIZE        <span class="hljs-comment">#大小</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server /]<span class="hljs-comment"># docker images</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>centos       7         eeb6ee3f44bd   12 months ago   204MB<br></code></pre></td></tr></table></figure><h5 id="查找镜像"><a href="#查找镜像" class="headerlink" title="查找镜像"></a>查找镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker search tomcat    <span class="hljs-comment"># 从Docker Hub上查找tomcat镜像</span><br>STARS：                 <span class="hljs-comment"># 关注度</span><br>docker search --filter=stars=300 tomcat     <span class="hljs-comment">#从Docker Hub上查找关注度大于300的tomcat镜像</span><br></code></pre></td></tr></table></figure><h4 id="3-2-运行-x2F-删除-容器"><a href="#3-2-运行-x2F-删除-容器" class="headerlink" title="3.2 运行&#x2F;删除..容器"></a>3.2 运行&#x2F;删除..容器</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker run -itd  --name centos7 -p 8888:23 -v /docker:/opt centos:7</span><br>3d4b6674e54b993827be4563361183dfbf2fccebea6130395bfc785f3f0c5ca5<br>[root@Server ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS        PORTS                                   NAMES<br>3d4b6674e54b   centos:7   <span class="hljs-string">&quot;/bin/bash&quot;</span>   3 seconds ago   Up 1 second   0.0.0.0:8888-&gt;23/tcp, :::8888-&gt;23/tcp   centos7<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">语法：docker run -it 镜像:版本号 bash环境  <br>参数解释：    <br>-i： 表示以“交互模式”运行容器<br>-t： 表示容器启动后会进入其命令行。加入这两个参数后，容器创建就能登录进去。即 分配一个伪终端。<br>--name： 为创建的容器命名<br>-v： 表示目录映射关系(前者是宿主机目录，后者是映射到宿主机上的目录，即 宿主机目录:容器中目录)，可以使 用多个-v 做多个目录或文件映射。注意:最好做目录映射，在宿主机上做修改，然后 共享到容器上。<br>-d： 在run后面加上-d参数,则会创建一个守护式容器在后台运行(这样创建容器后不 会自动登录容器，如果只加-i -t 两个参数，创建后就会自动进去容器)。<br>-p： 表示端口映射，前者是宿主机端口，后者是容器内的映射端口。可以使用多个-p 做多个端口映射<br>-e： 为容器设置环境变量<br>--network=host： 表示将主机的网络环境映射到容器中，容器的网络与主机相同<br></code></pre></td></tr></table></figure><h5 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">语法：docker <span class="hljs-built_in">rm</span> 容器ID  <br><span class="hljs-comment"># 正常删除  docker rm 容器ID  </span><br><span class="hljs-comment"># 强制删除  docker rm -f 容器ID</span><br><span class="hljs-comment"># 批量删除  docker rm -f $(docker ps -a)</span><br></code></pre></td></tr></table></figure><h3 id="4、搭建Repository本地仓库"><a href="#4、搭建Repository本地仓库" class="headerlink" title="4、搭建Repository本地仓库"></a>4、搭建Repository本地仓库</h3><p>​镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。</p><p><strong>搭建私有仓库</strong></p><p>创建仓库流程</p><h4 id="4-1、根据registry镜像创建容器"><a href="#4-1、根据registry镜像创建容器" class="headerlink" title="4.1、根据registry镜像创建容器"></a>4.1、根据registry镜像创建容器</h4><h5 id="下载registry镜像"><a href="#下载registry镜像" class="headerlink" title="下载registry镜像"></a>下载registry镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker pull registry</span><br>Using default tag: latest<br>latest: Pulling from library/registry<br>79e9f2f55bf5: Pull complete <br>0d96da54f60b: Pull complete <br>5b27040df4a2: Pull complete <br>e2ead8259a04: Pull complete <br>3790aef225b9: Pull complete <br>Digest: sha256:169211e20e2f2d5d115674681eb79d21a217b296b43374b8e39f97fcf866b375<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> registry:latest<br>docker.io/library/registry:latest<br></code></pre></td></tr></table></figure><h5 id="启动仓库容器"><a href="#启动仓库容器" class="headerlink" title="启动仓库容器"></a>启动仓库容器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run -d -p 5000:5000 --restart=always --name registry registry <br>--restart 标志会检查容器的退出代码，并据此来决定是否要重启容器，默认是不会重启。 <br>--restart的参数 always：无论容器的退出代码是什么，Docker都会自动重启该容器。<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker run -d -p 5000:5000 --restart=always --name registry registry </span><br>24846a8f867e6683c1d1895dd8d802ea629e8e882ca2bf28e7c9eb8f6e75acaf<br>[root@Server ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE      COMMAND                  CREATED          STATUS          PORTS                                       NAMES<br>24846a8f867e   registry   <span class="hljs-string">&quot;/entrypoint.sh /etc…&quot;</span>   2 seconds ago    Up 2 seconds    0.0.0.0:5000-&gt;5000/tcp, :::5000-&gt;5000/tcp   registry<br></code></pre></td></tr></table></figure><h5 id="检查容器效果"><a href="#检查容器效果" class="headerlink" title="检查容器效果"></a>检查容器效果</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@Server ~]# curl 127.0.0.1:5000/v2/_catalog  # 回显，可以看出我们搭建成功<br>&#123;&quot;repositories&quot;:[]&#125;<br></code></pre></td></tr></table></figure><h5 id="配置仓库权限"><a href="#配置仓库权限" class="headerlink" title="配置仓库权限"></a>配置仓库权限</h5><p>你如果把192.168.10.10:5000这样的内网地址作为私有仓库地址，这时你会发现无法成功推送镜像。</p><p>这是因为 Docker 默认不允许非HTTPS方式推送镜像。我们可以通过 Docker 的配置选项来取消这个限制</p><p>在&#x2F;etc&#x2F;docker&#x2F;daemon.json中写入如下内容（如果文件不存在请新建该文件）</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># cat /etc/docker/daemon.json </span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>          <span class="hljs-string">&quot;https://ibotsnhh.mirror.aliyuncs.com&quot;</span><br>  ],<br>  <span class="hljs-string">&quot;insecure-registries&quot;</span>: [<br>          <span class="hljs-string">&quot;192.168.10.10:5000&quot;</span><br>  ]<br>&#125;<br>[root@Server ~]<span class="hljs-comment"># systemctl  daemon-reload </span><br>[root@Server ~]<span class="hljs-comment"># systemctl  restart docker</span><br></code></pre></td></tr></table></figure><h4 id="4-2、提交镜像至私有仓库"><a href="#4-2、提交镜像至私有仓库" class="headerlink" title="4.2、提交镜像至私有仓库"></a>4.2、提交镜像至私有仓库</h4><h5 id="标记镜像语法为："><a href="#标记镜像语法为：" class="headerlink" title="标记镜像语法为："></a>标记镜像语法为：</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>registry     latest    b8604a3fe854   10 months ago   26.2MB<br>centos       7         eeb6ee3f44bd   12 months ago   204MB<br>[root@Server ~]<span class="hljs-comment"># docker tag registry:latest 192.168.10.10:5000/registry:v1</span><br>[root@Server ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY                    TAG       IMAGE ID       CREATED         SIZE<br>192.168.10.10:5000/registry   v1        b8604a3fe854   10 months ago   26.2MB<br>registry                      latest    b8604a3fe854   10 months ago   26.2MB<br>centos                        7         eeb6ee3f44bd   12 months ago   204MB<br></code></pre></td></tr></table></figure><h5 id="上传镜像至仓库"><a href="#上传镜像至仓库" class="headerlink" title="上传镜像至仓库"></a>上传镜像至仓库</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># docker push 192.168.10.10:5000/registry:v1</span><br>The push refers to repository [192.168.10.10:5000/registry]<br>aeccf26589a7: Pushed <br>f640be0d5aad: Pushed <br>aa4330046b37: Pushed <br>ad10b481abe7: Pushed <br>69715584ec78: Pushed <br>v1: digest: sha256:36cb5b157911061fb610d8884dc09e0b0300a767a350563cbfd88b4b85324ce4 size: 1363<br>[root@Server ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server ~]<span class="hljs-comment"># curl 127.0.0.1:5000/v2/_catalog</span><br>&#123;<span class="hljs-string">&quot;repositories&quot;</span>:[<span class="hljs-string">&quot;registry&quot;</span>]&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209291551495.png" alt="image-20220929155137457"></p><h3 id="5、Dockerfile制作镜像"><a href="#5、Dockerfile制作镜像" class="headerlink" title="5、Dockerfile制作镜像"></a>5、Dockerfile制作镜像</h3><p><strong>DockerFile介绍</strong></p><p>DockerFile就是用来构建镜像的！命令脚本！先体验一下！</p><p>通过这个脚本可以生成镜像，镜像的一层一层的，脚本一个个的命令，每个命令都是一层</p><p>构建步骤：</p><ul><li>编写一个dockerfile文件</li><li>docker build构建成为一个镜像</li><li>docker run 运行镜像</li><li>docker psuh 发布镜像（DockerHub，阿里云镜像仓库！，本地仓库）</li></ul><p>查看一下官方是怎么做的？打开dockerHub</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209291930342.png" alt="image-20220929193055289"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209291931801.png" alt="image-20220929193101748"></p><p>很多官方的镜像都是基础包，很多功能都没有，我们通常会自己搭建自自己的镜像！</p><p>官方既然可以制作镜像，那我们也可以！</p><h4 id="5-1DockerFile构建过程"><a href="#5-1DockerFile构建过程" class="headerlink" title="5.1DockerFile构建过程"></a>5.1<strong>DockerFile构建过程</strong></h4><p>DockerFile构建镜像有很多指令</p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209292134670.png" alt="image-20220929213404599"></p><h5 id="基础知识："><a href="#基础知识：" class="headerlink" title="基础知识："></a><strong>基础知识：</strong></h5><ul><li><p>每个保留关键字（指令）都是必须是大写字母</p></li><li><p>执行从上到下顺序执行</p></li><li><p># 表示注释</p></li><li><p>每个指令都会创建提交一个新的镜像层，并提交！</p><p>现在知道这些指令后，我们自己练习自己写一个镜像！</p></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">FROM          <span class="hljs-comment"># 基础镜像，一切从这里构建</span><br>MAINTAINER    <span class="hljs-comment"># 镜像是谁写的，名字 + 邮箱</span><br>RUN           <span class="hljs-comment"># Docker镜像构建的时候需要运行的命令</span><br>ADD           <span class="hljs-comment"># 步骤：tomcat镜像，这个tomcat压缩包！添加内容</span><br>WORKDIR       <span class="hljs-comment"># 指定镜像的工作目录</span><br>VOLUME        <span class="hljs-comment"># 挂载卷的目录位置</span><br>EXPOSE        <span class="hljs-comment"># 指定暴露端口配置（和我们运行容器用的&quot;-p&quot;是一个道理）</span><br>CMD           <span class="hljs-comment"># 指定这个容器启动的时候要运行的命令，只要最后一个会生效，可被代替</span><br>ENTRYPOINT    <span class="hljs-comment"># 指定这个容器启动的时候要运行的命令，可以追加命令</span><br>ONBUILD       <span class="hljs-comment"># 当构一个被继承 DockerFile 这个时候就会运行 ONBUILD 的指令，触发指令</span><br>COPY          <span class="hljs-comment"># 类似ADD，将我们文件拷贝到镜像中,简写（CP）</span><br>ENV           <span class="hljs-comment"># 构建的时候设置环境变量</span><br></code></pre></td></tr></table></figure><h5 id="创建一个自己的镜像"><a href="#创建一个自己的镜像" class="headerlink" title="创建一个自己的镜像"></a>创建一个自己的镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># cp /etc/yum.repos.d/CentOS-Base.repo . # 吧yum文件拷贝到当前目录</span><br>[root@Server dockerfile]<span class="hljs-comment"># ls</span><br>CentOS-Base.repo  Dockerfile<br><span class="hljs-comment"># 编写dockerFile</span><br>[root@Server dockerfile]<span class="hljs-comment"># cat Dockerfile </span><br>FROM centos:8<br>MAINTAINER wsnb<br>RUN <span class="hljs-built_in">rm</span> -rf /etc/yum.repos.d/*<br>COPY centos1.repo  /etc/yum.repos.d/<br>RUN <span class="hljs-built_in">ls</span> /etc/yum.repos.d/<br>EXPOSE 80<br>EXPOSE 23<br>RUN yum -y install vim<br>CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;-----end----&quot;</span><br>CMD /bin/bash<br></code></pre></td></tr></table></figure><h5 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker build -f Dockerfile .</span><br>Sending build context to Docker daemon  7.168kB<br>Step 1/10 : FROM centos:8<br> ---&gt; 5d0da3dc9764<br>Step 2/10 : MAINTAINER wsnb<br> ---&gt; Using cache<br> ---&gt; ed9d500cdb37<br>Step 3/10 : RUN <span class="hljs-built_in">rm</span> -rf /etc/yum.repos.d/*<br> ---&gt; Using cache<br> ---&gt; 079f615ff017<br>Step 4/10 : COPY centos1.repo  /etc/yum.repos.d/<br> ---&gt; fa0f3dc832aa<br>Step 5/10 : RUN <span class="hljs-built_in">ls</span> /etc/yum.repos.d/<br> ---&gt; Running <span class="hljs-keyword">in</span> f18d2ba20735<br>centos1.repo<br>Removing intermediate container f18d2ba20735<br> ---&gt; 25f4da680fe3<br>Step 6/10 : EXPOSE 80<br> ---&gt; Running <span class="hljs-keyword">in</span> 997af4746276<br>Removing intermediate container 997af4746276<br> ---&gt; 929d0301e5aa<br>Step 7/10 : EXPOSE 23<br> ---&gt; Running <span class="hljs-keyword">in</span> 583c5a4706c3<br>Removing intermediate container 583c5a4706c3<br> ---&gt; 9eada5309326<br>Step 8/10 : RUN yum -y install vim<br> ---&gt; Running <span class="hljs-keyword">in</span> 545279c89e93<br>CentOS-8.5.2111 - Base - mirrors.aliyun.com     2.1 MB/s | 4.6 MB     00:02    <br>CentOS-8.5.2111 - Extras - mirrors.aliyun.com    38 kB/s |  10 kB     00:00    <br>CentOS-8.5.2111 - AppStream - mirrors.aliyun.co 1.7 MB/s | 8.4 MB     00:04    <br>Dependencies resolved.<br>================================================================================<br> Package             Arch        Version                   Repository      Size<br>================================================================================<br>Installing:<br> vim-enhanced        x86_64      2:8.0.1763-16.el8         AppStream      1.4 M<br>Installing dependencies:<br> gpm-libs            x86_64      1.20.7-17.el8             AppStream       39 k<br> vim-common          x86_64      2:8.0.1763-16.el8         AppStream      6.3 M<br> vim-filesystem      noarch      2:8.0.1763-16.el8         AppStream       49 k<br> <span class="hljs-built_in">which</span>               x86_64      2.21-16.el8               base            49 k<br><br>Transaction Summary<br>================================================================================<br>Install  5 Packages<br><br>Total download size: 7.8 M<br>Installed size: 30 M<br>Downloading Packages:<br>(1/5): gpm-libs-1.20.7-17.el8.x86_64.rpm        392 kB/s |  39 kB     00:00    <br>(2/5): which-2.21-16.el8.x86_64.rpm             171 kB/s |  49 kB     00:00    <br>(3/5): vim-filesystem-8.0.1763-16.el8.noarch.rp 529 kB/s |  49 kB     00:00    <br>(4/5): vim-enhanced-8.0.1763-16.el8.x86_64.rpm  819 kB/s | 1.4 MB     00:01    <br>(5/5): vim-common-8.0.1763-16.el8.x86_64.rpm    1.8 MB/s | 6.3 MB     00:03    <br>--------------------------------------------------------------------------------<br>Total                                           2.2 MB/s | 7.8 MB     00:03     <br>Running transaction check<br>Transaction check succeeded.<br>Running transaction <span class="hljs-built_in">test</span><br>Transaction <span class="hljs-built_in">test</span> succeeded.<br>Running transaction<br>  Preparing        :                                                        1/1 <br>  Installing       : vim-filesystem-2:8.0.1763-16.el8.noarch                1/5 <br>  Installing       : vim-common-2:8.0.1763-16.el8.x86_64                    2/5 <br>  Installing       : gpm-libs-1.20.7-17.el8.x86_64                          3/5 <br>  Running scriptlet: gpm-libs-1.20.7-17.el8.x86_64                          3/5 <br>  Installing       : which-2.21-16.el8.x86_64                               4/5 <br>  Installing       : vim-enhanced-2:8.0.1763-16.el8.x86_64                  5/5 <br>  Running scriptlet: vim-enhanced-2:8.0.1763-16.el8.x86_64                  5/5 <br>  Running scriptlet: vim-common-2:8.0.1763-16.el8.x86_64                    5/5 <br>  Verifying        : which-2.21-16.el8.x86_64                               1/5 <br>  Verifying        : gpm-libs-1.20.7-17.el8.x86_64                          2/5 <br>  Verifying        : vim-common-2:8.0.1763-16.el8.x86_64                    3/5 <br>  Verifying        : vim-enhanced-2:8.0.1763-16.el8.x86_64                  4/5 <br>  Verifying        : vim-filesystem-2:8.0.1763-16.el8.noarch                5/5 <br><br>Installed:<br>  gpm-libs-1.20.7-17.el8.x86_64         vim-common-2:8.0.1763-16.el8.x86_64    <br>  vim-enhanced-2:8.0.1763-16.el8.x86_64 vim-filesystem-2:8.0.1763-16.el8.noarch<br>  which-2.21-16.el8.x86_64             <br><br>Complete!<br>Removing intermediate container 545279c89e93<br> ---&gt; e5c8ca311626<br>Step 9/10 : CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;-----end----&quot;</span><br> ---&gt; Running <span class="hljs-keyword">in</span> 91baa8452cd7<br>Removing intermediate container 91baa8452cd7<br> ---&gt; d2b0074329d9<br>Step 10/10 : CMD /bin/bash<br> ---&gt; Running <span class="hljs-keyword">in</span> ceabd3e1268a<br>Removing intermediate container ceabd3e1268a<br> ---&gt; 0c30ff39bef8<br>Successfully built 0c30ff39bef8<br></code></pre></td></tr></table></figure><h5 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker run -itd --name wsnb1 0c30ff39bef8 </span><br>ccaa11ce6d86cdcaa1238453f6aa52b020781604f8120a2dd8b65cfe5f3db9d4<br>[root@Server dockerfile]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS            NAMES<br>ccaa11ce6d86   0c30ff39bef8   <span class="hljs-string">&quot;/bin/sh -c /bin/bash&quot;</span>   2 seconds ago    Up 2 seconds    23/tcp, 80/tcp   wsnb1<br>51fde0d4f283   centos:8       <span class="hljs-string">&quot;/bin/bash&quot;</span>              11 minutes ago   Up 11 minutes                    centos8<br></code></pre></td></tr></table></figure><h5 id="标记镜像"><a href="#标记镜像" class="headerlink" title="标记镜像"></a>标记镜像</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker tag  0c30ff39bef8  192.168.10.10:5000/wsnb:v1    </span><br>[root@Server dockerfile]<span class="hljs-comment"># docker images</span><br>REPOSITORY                    TAG       IMAGE ID       CREATED         SIZE<br>192.168.10.10:5000/wsnb       v1        0c30ff39bef8   6 minutes ago   298MB    <span class="hljs-comment"># 这个</span><br>192.168.10.10:5000/registry   v1        b8604a3fe854   10 months ago   26.2MB<br>registry                      latest    b8604a3fe854   10 months ago   26.2MB<br>centos                        7         eeb6ee3f44bd   12 months ago   204MB<br>centos                        8         5d0da3dc9764   12 months ago   231MB<br></code></pre></td></tr></table></figure><h5 id="上传本地仓库"><a href="#上传本地仓库" class="headerlink" title="上传本地仓库"></a>上传本地仓库</h5><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@Server dockerfile]<span class="hljs-comment"># docker push 192.168.10.10:5000/wsnb:v1</span><br>The push refers to repository [192.168.10.10:5000/wsnb]<br>ac5a788b3b8b: Pushed <br>06ce684cb1c7: Pushed <br>df1b7ae76752: Pushed <br>74ddd0ec08fa: Pushed <br>v1: digest: sha256:93e9be3e76a1bbc246fea55535dca553b1a5d8f22ae82dc6bd507e05b33fcd4e size: 1155<br></code></pre></td></tr></table></figure><h5 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@Server dockerfile]# curl 192.168.10.10:5000/v2/_catalog       <br>&#123;&quot;repositories&quot;:[&quot;registry&quot;,&quot;wsnb&quot;]&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/202209292117255.png" alt="image-20220929211739200"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker-基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单搭建http服务</title>
      <link href="/2022/08/02/%E7%AE%80%E5%8D%95%E6%90%AD%E5%BB%BAhttp%E6%9C%8D%E5%8A%A1/"/>
      <url>/2022/08/02/%E7%AE%80%E5%8D%95%E6%90%AD%E5%BB%BAhttp%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="简单搭建http服务"><a href="#简单搭建http服务" class="headerlink" title="简单搭建http服务"></a><strong>简单搭建http服务</strong></h1><h2 id="一、安装httpd"><a href="#一、安装httpd" class="headerlink" title="一、安装httpd"></a><strong>一、安装httpd</strong></h2><p>执行命令</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">yum install httpd<br></code></pre></td></tr></table></figure><h2 id="二、配置httpd"><a href="#二、配置httpd" class="headerlink" title="二、配置httpd"></a><strong>二、配置httpd</strong></h2><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">vi /etc/httpd/conf/httpd.conf<br></code></pre></td></tr></table></figure><h2 id="三、修改配置文件"><a href="#三、修改配置文件" class="headerlink" title="三、修改配置文件"></a><strong>三、修改配置文件</strong></h2><h3 id="3-1-修改端口号"><a href="#3-1-修改端口号" class="headerlink" title="3.1 修改端口号"></a><strong>3.1 修改端口号</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Listen: Allows you to bind Apache to specific IP addresses and/or</span><br><span class="hljs-comment"># ports, instead of the default. See also the &lt;VirtualHost&gt;</span><br><span class="hljs-comment"># directive.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Change this to Listen on specific IP addresses as shown below to</span><br><span class="hljs-comment"># prevent Apache from glomming onto all bound IP addresses.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Listen 12.34.56.78:80</span><br>Listen 80 <span class="hljs-comment"># http监听端口根据实际情况修改 ---如果开启了sellinux和防火墙,修改了默认端口80，需要放行防火墙端口和selinx放行端口</span><br></code></pre></td></tr></table></figure><p><strong>端口放行教程（假如我们自己定义监听端口为8080）</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">防火墙放行<br>[root@localhost /]<span class="hljs-comment"># firewall-cmd  --add-port=8080/tcp --permanent</span><br>success<br>[root@localhost /]<span class="hljs-comment"># firewall-cmd  --reload</span><br>success<br>[root@localhost /]<span class="hljs-comment"># firewall-cmd   --list-all</span><br>public (active)<br>target: default<br>icmp-block-inversion: no<br>interfaces: ens33<br>sources:<br>services: ssh dhcpv6-client<br>ports: 8080/tcp<br>protocols:<br>masquerade: no<br>forward-ports:<br>source-ports:<br>icmp-blocks:<br>rich rules:<br>[root@localhost /]<span class="hljs-comment">#</span><br><br>selinux放行<br>[root@localhost /]<span class="hljs-comment"># semanage port -a -t http_port_t -p tcp 8080</span><br>ValueError: 已定义端口 tcp/8080<br>[root@localhost /]<span class="hljs-comment"># </span><br>[root@localhost /]<span class="hljs-comment"># systemctl restart httpd</span><br>[root@localhost /]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>“注意如果你用的是Centos系统的话而且是最小化安装可能会没有semanage命令，需要自己安装，查找这个命令的包yum provides semanage，包安装yum install -y policycoreutils-python”</p><h3 id="3-2-修改目录权限"><a href="#3-2-修改目录权限" class="headerlink" title="3.2 修改目录权限"></a><strong>3.2 修改目录权限</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#</span><br><span class="hljs-comment"># Deny access to the entirety of your server&#x27;s filesystem. You must</span><br><span class="hljs-comment"># explicitly permit access to web content directories in other</span><br><span class="hljs-comment"># &lt;Directory&gt; blocks below.</span><br><span class="hljs-comment">#</span><br>&lt;Directory /&gt;<br>AllowOverride none<br><span class="hljs-comment"># Require all denied 默认设置，拒绝所有访问请求</span><br>Options All <span class="hljs-comment"># 显示目录结构，以便用户浏览下载</span><br>&lt;/Directory&gt;<br></code></pre></td></tr></table></figure><h3 id="3-3-修改共享目录–如果修改了默认路径需要修改路径的上下文"><a href="#3-3-修改共享目录–如果修改了默认路径需要修改路径的上下文" class="headerlink" title="3.3 修改共享目录–如果修改了默认路径需要修改路径的上下文"></a><strong>3.3 修改共享目录–如果修改了默认路径需要修改路径的上下文</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#</span><br><span class="hljs-comment"># DocumentRoot: The directory out of which you will serve your</span><br><span class="hljs-comment"># documents. By default, all requests are taken from this directory, but</span><br><span class="hljs-comment"># symbolic links and aliases may be used to point to other locations.</span><br><span class="hljs-comment">#</span><br>DocumentRoot <span class="hljs-string">&quot;/data/&quot;</span> <span class="hljs-comment"># 根据实际情况修改</span><br> <br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Relax access to content within /var/www.</span><br><span class="hljs-comment">#</span><br>&lt;Directory <span class="hljs-string">&quot;/data&quot;</span>&gt; <span class="hljs-comment"># 根据实际情况修改</span><br>AllowOverride None<br><span class="hljs-comment"># Allow open access:</span><br><span class="hljs-comment"># Require all granted</span><br><span class="hljs-comment"># Allow from all</span><br>&lt;/Directory&gt;<br></code></pre></td></tr></table></figure><p>修改定义网站目录上下文–如果不修改需要关闭selinx不然网站无法访问</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@localhost ~]<span class="hljs-comment"># mkdir /data</span><br>[root@localhost ~]<span class="hljs-comment"># ls -ldZ /data/#查看默认上下文关系-object_r:default_t</span><br>drwxr-xr-x. root root unconfined_u:object_r:default_t:s0 /data/<br><br>[root@localhost ~]<span class="hljs-comment"># semanage fcontext -a -t httpd_sys_content_t &quot;/data(/.*)?&quot;</span><br>[root@localhost ~]<span class="hljs-comment"># restorecon -R -v /data</span><br>restorecon reset /data context unconfined_u:object_r:default_t:s0-&gt;unconfined_u:object_r:httpd_sys_content_t:s0<br>[root@localhost ~]<span class="hljs-comment"># ls -ldZ /data/#查看现在上下文关系-httpd_sys_content_t</span><br>drwxr-xr-x. root root unconfined_u:object_r:httpd_sys_content_t:s0 /data/<br>[root@localhost ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">记不住命令的可以man帮助查看命令<br>[root@localhost ~]<span class="hljs-comment"># man semanage</span><br>[root@localhost ~]<span class="hljs-comment"># man 8 semanage-fcontext </span><br></code></pre></td></tr></table></figure><p><strong>可以根据自己需求配置</strong></p><p>http全局配置文件，文件选项参数含义–郭老师上课写的笔记内容</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">配置文件选项<br>ServerRoot                        <span class="hljs-comment"># 服务目录</span><br>Listen 80                         <span class="hljs-comment"># 监听的端口； Listen   IP:PORT # 如果不写IP表示监听本机所有的可用IP地址，如果注明IP则表示监听在指定的IP地址之后。Listen选项可以出现多次，表示监听不同IP以及不同端口。</span><br>ServerAdmin                       <span class="hljs-comment"># 管理员邮箱</span><br>AllowOverride none                <span class="hljs-comment"># AllowOverride定义每个目录下.htaccess文件中的指令类型，通常设置为None，什么都不可以放；ALL所有都可以放</span><br>Require all denied                <span class="hljs-comment"># 全部拒绝访问</span><br>Require all granted               <span class="hljs-comment"># 全部允许访问</span><br>Require  ip   X.X.X.X             <span class="hljs-comment"># 允许指定 IP地址访问</span><br>Require  host    hostname         <span class="hljs-comment"># 允许指定的主机名访问</span><br>DocumentRoot                      <span class="hljs-comment"># 存放网页数据的目录</span><br>Options Indexes FollowSymLinks    <span class="hljs-comment"># Options选项，Indexes 允许目录浏览，当客户端指定要访问的目录，但没有指定要访问的文件，且目录下不存在默认文档时，显示该目录中的文件及子目录列表索引。 FollowSymLinks 允许跟踪符号链接文件所指定的源文件，跟踪符号链接，如果目录下存在软连接，则可以直接访问软连接指向的文件。</span><br>DirectoryIndex                    <span class="hljs-comment"># 默认可识别的网页</span><br>ErrorLog <span class="hljs-string">&quot;;logs/error_log&quot;</span>;       <span class="hljs-comment"># 错误的日志文件</span><br>LogLevel warn                     <span class="hljs-comment"># 日志等级</span><br>ErrorDocument                     <span class="hljs-comment"># 错误重定向</span><br></code></pre></td></tr></table></figure><h2 id="四、启动httpd服务"><a href="#四、启动httpd服务" class="headerlink" title="四、启动httpd服务"></a><strong>四、启动httpd服务</strong></h2><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">systemctl start httpd<br></code></pre></td></tr></table></figure><h2 id="五、其他常用命令"><a href="#五、其他常用命令" class="headerlink" title="五、其他常用命令"></a><strong>五、其他常用命令</strong></h2><p>重启httpd服务</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">systemctl start httpd<br></code></pre></td></tr></table></figure><h2 id="六、测试"><a href="#六、测试" class="headerlink" title="六、测试"></a><strong>六、测试</strong></h2><p>​    <img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802140513620.png" alt="image-20220802140513620"></p><h2 id="七、配置http网站用户访问站点"><a href="#七、配置http网站用户访问站点" class="headerlink" title="七、配置http网站用户访问站点"></a><strong>七、配置http网站用户访问站点</strong></h2><p>我们在touch &#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;man.conf重新编写一个配置文件</p><p>用户认证文件选项配置参数解释</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">想要认证需要在httpd.conf中找到想要认证页面的&lt;Directory/&gt;添加认证语句，<br>AuthType Basic         <span class="hljs-comment"># 是设置加密方式，基础</span><br>AuthName <span class="hljs-string">&quot;SOS Dan&quot;</span>     <span class="hljs-comment"># 是设置域名称</span><br>AuthUserFile /var/jff2014/user.pw   <span class="hljs-comment"># 是密码保存路径</span><br>Require user jiaofangfang           <span class="hljs-comment"># 是指明用户名</span><br></code></pre></td></tr></table></figure><h3 id="编写配置文件"><a href="#编写配置文件" class="headerlink" title="编写配置文件"></a>编写配置文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@localhost data]<span class="hljs-comment"># cat /etc/httpd/conf.d/man.conf </span><br>Listen 8080<br>&lt;VirtualHost *:8080&gt;<br>    DocumentRoot <span class="hljs-string">&quot;/data&quot;</span><br>    Directoryindex index.html<br>        &lt;Directory <span class="hljs-string">&quot;/data&quot;</span>&gt;<br>            AllowOverride None<br>            AuthType Basic<br>            AuthName <span class="hljs-string">&quot;SOS Dan&quot;</span><br>            AuthUserFile /wsnb/jnds/user.pw<br>            Require user jnds<br>        &lt;/Directory&gt;<br>&lt;/VirtualHost&gt;<br>[root@localhost data]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>创建用户，创建用户密码信息路径，添加http用户和密码</p><p>为了安全我们创建保存用户密码文件的时候，为了安全考虑可以在前面加上“.”一点，吧文件弄成隐藏文件,例如吧下面的user.pw—-&gt;.user</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@localhost data]<span class="hljs-comment"># mkdir /wsnb/jnds/</span><br>[root@localhost data]<span class="hljs-comment"># touch /wsnb/jnds/user.pw</span><br>[root@localhost data]<span class="hljs-comment"># htpasswd -c /wsnb/jnds/user.pw jnds</span><br>New password: <br>Re-<span class="hljs-built_in">type</span> new password: <br>Adding password <span class="hljs-keyword">for</span> user jnds<br>[root@localhost data]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>重启httpd服务</p><p>如果没有放行selinux和防火墙的自行去放行上面有教程</p><p>还有网页目录的上下文</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">[root@localhost ~]<span class="hljs-comment"># systemctl restart httpd</span><br></code></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a><strong>测试</strong></h2><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802140636502.png" alt="image-20220802140636502"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802140641867.png" alt="image-20220802140641867"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DHCP八种报文详解</title>
      <link href="/2022/08/02/DHCP%E5%85%AB%E7%A7%8D%E6%8A%A5%E6%96%87%E8%AF%A6%E8%A7%A3/"/>
      <url>/2022/08/02/DHCP%E5%85%AB%E7%A7%8D%E6%8A%A5%E6%96%87%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="DHCP八种报文详解"><a href="#DHCP八种报文详解" class="headerlink" title="DHCP八种报文详解"></a>DHCP八种报文详解</h1><p><strong>DHCP DISCOVER：</strong></p><p>这是 DHCP 客户端首次登录网络时进行 DHCP 过程的第一个报文，用来寻找 DHCP 服务器。</p><p><strong>DHCP OFFER：</strong></p><p>DHCP服务器用来响应DHCP,DISCOVER报文，此报文携带了各种配置信息。</p><p><strong>DHCP REQUEST：此报文用于以下三种用途</strong></p><p>客户端初始化后，发送广播的 DHCP REQUEST 报文来回应服务器的 DHCP OFFER 报文。</p><p>客户端重启初始化后，发送广播的 DHCP REQUEST 报文来确认先前被分配的 IP 地址等配置信息。</p><p>当客户端已经和某个 IP 地址绑定后，发送 DHCP REQUEST 报文来延长 IP 地址的租期。</p><p><strong>DHCP ACK：</strong></p><p>服务器对客户端的 DHCP REQUEST 报文的确认响应报文，客户端收到此报文</p><p>后，才真正获得了 IP 地址和相关的配置信息。</p><p><strong>DHCP NAK：</strong></p><p>服务器对客户端的 DHCP REQUEST 报文的拒绝响应报文，比如服务器对客户</p><p>端分配的 IP 地址已超过使用租借期限（服务器没有找到相应的租约记录）或者由于某些原</p><p>因无法正常分配 IP 地址，则发送 DHCP NAK 报文作为应答（客户端移到了另一个新的网络）。</p><p>通知 DHCP 客户端无法分配合适 IP 地址。DHCP 客户端需要重新发送</p><p>DHCP DISCOVERY 报文</p><p>来申请新的 IP 地址。</p><p><strong>DHCP DECLINE：</strong></p><p>当客户端发现服务器分配给它的 IP 地址发生冲突时会通过发送此报文</p><p>来通知服务器，并且会重新向服务器申请地址。</p><p><strong>DHCP RELEASE：</strong></p><p>客户端可通过发送此报文主动释放服务器分配给它的 IP 地址，当服务</p><p>器收到此报文后，可将这个 IP 地址分配给其它的客户端。</p><p><strong>DHCP INFORM：</strong></p><p>客户端已经获得了 IP 地址，发送此报文的目的是为了从服务器获得其</p><p>他的一些网络配置信息，比如网关地址、DNS 服务器地址等。</p><p>以上 8 种类型报文的格式相同，只是某些字段的取值不同。DHCP 报文格式基于 BOOTP</p><p>的报文格式</p>]]></content>
      
      
      <categories>
          
          <category> NetWork </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DHCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>squid代理服务器</title>
      <link href="/2022/08/02/squid%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2022/08/02/squid%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>​ </p><h1 id="squid代理服务器"><a href="#squid代理服务器" class="headerlink" title="squid代理服务器"></a>squid代理服务器</h1><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h1><p>Squid是一个高性能的代理缓存服务器，Squid支持FTP、gopher和HTTP协议。当用户指定它为代理服务器，且用户的网络和它可联通时，其会接收用户的请求，连接请求的网站，返回结果给用户并保留一个数据的备份作为缓存。当有其他用户请求同一个的页面时，Squid 把保存的备份传给用户，提高用户的访问体验。并且它可以设置过滤条件,对符合过滤条件的进行限制。</p><p>当用户本身的网络无法正常访问某些网址，而代理服务器的网络可以正常访问某网站的时候，可以使用代理服务器去请求网址，代理服务器再把请求的结果返回给用户。它通常和ss,ssr,openvpn一样，有时会被用来做xx上网。又因为它的缓存的功能，有时也被用来做缓存服务器，提高用户的访问速度。</p><h1 id="一，centos-x2F-redhat搭建代理服务器"><a href="#一，centos-x2F-redhat搭建代理服务器" class="headerlink" title="一，centos&#x2F;redhat搭建代理服务器"></a>一，centos&#x2F;redhat搭建代理服务器</h1><p>Squid是一个高性能的代理缓存服务器,Squid支持FTP、gopher、HTTPS和HTTP协议。 服务器环境：服务器centos7.9、 redhat7.0</p><p>搭建环境：主机A(redhat7.0)不能上网，而同一网关内的主机B(centos7.9)可以上网。在主机B上搭建了squid代理服务器，方便主机A上网。</p><h2 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a><strong>1、安装</strong></h2><p>1.1安装之前养成好习惯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">sudo yum update<br></code></pre></td></tr></table></figure><h3 id="1-2-进行安装"><a href="#1-2-进行安装" class="headerlink" title="1.2 进行安装"></a><strong>1.2 进行安装</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">yum install squid -y <br>yum install httpd-tools -y<br></code></pre></td></tr></table></figure><h2 id="2、密码文件操作"><a href="#2、密码文件操作" class="headerlink" title="2、密码文件操作"></a><strong>2、密码文件操作</strong></h2><p>2.1 生成密码文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">mkdir /etc/squid3/<br>usernameNet 是用户名<br>htpasswd -cd /etc/squid3/passwords usernameNet<br>提示输入密码，在这里我设的密码为 123456<br>注意密码不要超过8位<br></code></pre></td></tr></table></figure><h3 id="2-2-测试密码文件"><a href="#2-2-测试密码文件" class="headerlink" title="2.2 测试密码文件"></a><strong>2.2 测试密码文件</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">/usr/lib64/squid/basic_ncsa_auth /etc/squid3/passwords<br>输入 用户名 密码<br>usernameNet 123456<br>提示OK说明成功，ERR是有问题，请检查一下之前步骤<br>OK<br>测试完成，crtl + c 打断<br></code></pre></td></tr></table></figure><h2 id="3、配置"><a href="#3、配置" class="headerlink" title="3、配置"></a><strong>3、配置</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">vim /etc/squid/squid.conf<br>在最后添加<br>auth_param basic program /usr/lib64/squid/basic_ncsa_auth /etc/squid3/passwords<br>auth_param basic realm proxy<br>acl authenticated proxy_auth REQUIRED<br>http_access allow authenticated<br>这里是端口号，可以按需修改<br>http_port 3128 这样写会同时监听ipv6和ipv4的端口，推荐适应下面的配置方法。<br>http_port 0.0.0.0:3128<br></code></pre></td></tr></table></figure><h3 id="配置文件意思"><a href="#配置文件意思" class="headerlink" title="配置文件意思"></a><strong>配置文件意思</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">vim /etc/squid/squid.conf<br><br>#一、网段配置<br>acl localnet src 10.0.0.0/8# RFC1918 possible internal network<br>acl localnet src 172.16.0.0/12# RFC1918 possible internal network<br>acl localnet src 192.168.0.0/16# RFC1918 possible internal network<br>acl localnet src fc00::/7       # RFC 4193 local private network range<br>acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines<br>#填入可使用squid的网段<br>acl local    src 192.168.10.0/24<br>acl local    src 192.168.20.0/24<br>acl local    src 192.168.30.0/24<br><br><br><br>#二、端口配置<br>acl SSL_ports port 443<br>acl Safe_ports port 80# http<br>acl Safe_ports port 21# ftp<br>acl Safe_ports port 443# https<br>acl Safe_ports port 70# gopher<br>acl Safe_ports port 210# wais<br>acl Safe_ports port 1025-65535# unregistered ports<br>acl Safe_ports port 280# http-mgmt<br>acl Safe_ports port 488# gss-http<br>acl Safe_ports port 591# filemaker<br>acl Safe_ports port 777# multiling http<br><br><br><br>#三、密码策略<br># test mypass 设置squid的密码策略<br>auth_param basic program /usr/lib64/squid/basic_ncsa_auth /etc/squid/passwords  <br>auth_param basic children 15<br>auth_param basic credentialsttl 2 hours<br>auth_param basic casesensitive off         #用户名不区分大小写，可改为ON区分大小写<br>auth_param basic realm proxy<br><br><br><br>#四、acl规则配置。先配置一个变量，在配置该变量的限制<br><br>#&lt;1&gt;编写变量<br>#mp4相关限制的变量<br>#acl MYLAN src 192.168.2.0/24              #源地址网段    <br>#acl MC20 maxconn 20                       #最大并发连接<br>#acl DOMAIN dstdomain .qq.com .msn.com     #目标为.qq.com .msn.com的域名<br>#acl FILE urlpath_regex -i \.mp3$ \.mp4$   #以.mp3 .mp4结尾的URL路径<br>#acl TIME time MTWHF 07:30-17:30           #时间为周一至周五早8:30至晚17:30<br>#acl vip arp 00：7c:23:76:5C:1C           #设置某个mac地址变量为vip<br><br><br><br>#设置黑名单 填入文件中的网址不可访问，一行一个网址<br>acl CONNECT method CONNECT<br>acl blocked_sites dstdomain &quot;/etc/squid/blocked_sites&quot;<br>acl authenticated proxy_auth REQUIRED<br><br><br>#&lt;2&gt;设置acl访问控制规则.<br>#有先后顺序,第一条规则匹配上就不再继续往下，所以先把拒绝写在前面<br>#mp4相关变量的限制<br>#http_access deny MYLAN FILE         #禁止客户机下载MP3 MP4文件<br>#http_access deny MYLAN DOMAIN       #禁止客户机访问acl列表中的网站<br>#http_access deny MYLAN MC20         #客户机的并发连接超过20时将被阻止<br>#http_access allow MYLAN TIME        #允许客户机在工作时间访问互联网<br><br>http_access deny blocked_sites       #限制变量blocked_sites的访问<br>http_access deny !Safe_ports<br>http_access deny CONNECT !SSL_ports<br>http_access allow authenticated<br>http_access allow localhost manager<br>http_access deny manager<br>http_access allow localnet<br>http_access allow localhost<br>#http_access allow vip                #允许变量vip访问<br>#http_access deny all<br><br><br>http_port 37771                       #配置squid端口号<br>coredump_dir /var/spool/squid<br>refresh_pattern ^ftp:144020%10080<br>refresh_pattern ^gopher:14400%1440<br>refresh_pattern -i (/cgi-bin/|\?) 00%0<br>refresh_pattern .020%4320<br><br><br><br>#五、配置不同模式<br><br>#高密配置，隐藏真实ip变成匿名代理 这是squid3.1<br>via off<br>forwarded_for delete<br>request_header_access X-Forwarded-For deny all  <br>request_header_access From deny all  <br>request_header_access Via deny all <br><br><br>#透明配置（最方便使用，最不安全）<br>#http_port 3128 transparent<br>#cache_mem 99 MB<br>#cache_swap_low 90<br>#cache_swap_high 95<br>#maximum_object_size 4M<br>#minimum_object_size 0 KB<br>#maximum_object_size_in_memory 4096 KB<br>#memory_replacement_policy lru<br>#maximum_object_size 4 MB                    #允许保存到缓存空间的最大对象大小，以KB为单位，超过大小限制的文件将不被缓存，而是直接转发给用户<br>#cache_dir ufs /var/spool/squid 100 16 256 <br>#access_log /var/log/squid/access.log<br><br>#使用透明配置时，下方2个要填入对应位置<br>#acl all src 0.0.0.0/0.0.0.0                 #配置变量。允许所有ip访问， all是一个名字，可以随便起<br>#http_access allow all                       #配置该变量的acl限制。允许上面定义的all这个规则访问<br></code></pre></td></tr></table></figure><h2 id="4、启动服务"><a href="#4、启动服务" class="headerlink" title="4、启动服务"></a><strong>4、启动服务</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">开启启动<br>systemctl enable squid.service<br>启动<br>systemctl start squid.service<br>停止<br>systemctl stop squid.service<br>重启<br>systemctl restart squid.service<br><br></code></pre></td></tr></table></figure><h2 id="5、squid日志默认位置"><a href="#5、squid日志默认位置" class="headerlink" title="5、squid日志默认位置"></a><strong>5、squid日志默认位置</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">注意事项： 想要查看日志信息的话，必须切换到root用户，sudo用户不可以！<br>squid的日志默认是打开的，位于目录/var/log/squid/<br>[root@bogon ~]# ll /var/log/squid/<br>total 24<br>-rw-r-----. 1 squid squid 10069 Jun  6 17:52 access.log<br>-rw-r-----. 1 squid squid   485 Jun  4 08:12 access.log-20220605.gz<br>-rw-r-----. 1 squid squid   484 Jun  5 03:33 cache.log<br>-rw-r-----. 1 squid squid  1339 Jun  4 08:11 cache.log-20220605.gz注意事项： 想要查看日志信息的话，必须切换到root用户，sudo用户不可以！ squid的日志默认是打开的，位于目录/var/log/squid/ [root@bogon ~]# ll /var/log/squid/ total 24 -rw-r-----. 1 squid squid 10069 Jun  6 17:52 access.log -rw-r-----. 1 squid squid   485 Jun  4 08:12 access.log-20220605.gz -rw-r-----. 1 squid squid   484 Jun  5 03:33 cache.log -rw-r-----. 1 squid squid  1339 Jun  4 08:11 cache.log-20220605.gz<br></code></pre></td></tr></table></figure><p>注意：限制可以配置白名单和黑名单</p><h1 id="二、代理服务器设置"><a href="#二、代理服务器设置" class="headerlink" title="二、代理服务器设置"></a><strong>二、代理服务器设置</strong></h1><p>这里是主机A (不能上网的机器) 的设置</p><h3 id="2-1-测试服务器"><a href="#2-1-测试服务器" class="headerlink" title="2.1 测试服务器"></a><strong>2.1 测试服务器</strong></h3><p>可以采用下面的命令测试是否可以链接上代理服务器(squid)</p><p>注意事项：一定要关闭suqid所在服务器的防火墙，和自己的防火墙</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">telnet proxy_server_ip 3128<br></code></pre></td></tr></table></figure><p>上面这个命令用来测试的，如果没有的话需要安装：</p><p>这里是安装教程的链接。当然，你也可以先不进行测试。</p><h3 id="2-2-配置主机A-想要上网的机器"><a href="#2-2-配置主机A-想要上网的机器" class="headerlink" title="2.2 配置主机A(想要上网的机器)"></a><strong>2.2 配置主机A(想要上网的机器)</strong></h3><p>新建 &#x2F;etc&#x2F;profile.d&#x2F;proxy.sh , 在里面填入一下内容:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">PROXY_URL=&quot;http://proxy_server_ip:3128/&quot;<br>添加不需要走代理的地址<br>NO_PROXY_ADDR=&quot;127.0.0.1,localhost,.local,.cluster.local,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16&quot;<br>添加的代理<br>export http_proxy=&quot;$PROXY_URL&quot;<br>export https_proxy=&quot;$PROXY_URL&quot;<br>export no_proxy=&quot;$NO_PROXY_ADDR&quot;<br>export HTTP_PROXY=&quot;$PROXY_URL&quot;<br>export HTTPS_PROXY=&quot;$PROXY_URL&quot;<br>export NO_PROXY=&quot;$NO_PROXY_ADDR&quot;<br></code></pre></td></tr></table></figure><p>其中：</p><ul><li>将proxy_server_ip, 换成自己的Squid proxy server 的IP地址。</li><li>在NO_PROXY_ADDR，中添加不需要走代理的IP地址，这里配置的是访问本机和子网内的机器不走代理。</li></ul><h3 id="2-3-让代理生效"><a href="#2-3-让代理生效" class="headerlink" title="2.3 让代理生效"></a><strong>2.3 让代理生效</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">source /etc/profile.d/proxy.sh<br></code></pre></td></tr></table></figure><p>到这里就配置完成了。</p><h3 id="2-4-测试是否可以上网"><a href="#2-4-测试是否可以上网" class="headerlink" title="2.4 测试是否可以上网"></a><strong>2.4 测试是否可以上网</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">第一种方式<br>curl www.baidu.com<br>第二中方式<br>测试下载文件<br>wget https://mirrors.aliyun.com/ubuntu-releases/22.04/ubuntu-22.04-live-server-amd64.list<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 代理服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker图像化界面管理</title>
      <link href="/2022/08/01/docker%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E7%AE%A1%E7%90%86/"/>
      <url>/2022/08/01/docker%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p><strong>portainer</strong></p><p>docker 图像化界面管理工具！提供一个后台面板供我们操作</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer<br></code></pre></td></tr></table></figure><p>通过8088端口访问<strong>portainer</strong><br><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802135155407.png" alt="image-20220802135155407"></p><p>将 Portainer 连接到您要管理的 Docker 环境。我们选择本地的（因为暂时我们用不着远程的）<br><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802135227206.png" alt="image-20220802135227206"></p><p>连接进入之后的面板<br><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/image-20220802135308408.png" alt="image-20220802135308408"></p><p>可视化面板一般不会使用，自己测试玩玩就ok</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Container </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Repository</title>
      <link href="/2022/08/01/Repository/"/>
      <url>/2022/08/01/Repository/</url>
      
        <content type="html"><![CDATA[<p><strong>docker中的仓库(Repository)介绍以及搭建私有仓库方法</strong></p><p>镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。</p><p>一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。</p><p>通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 &lt;仓库名&gt;:&lt;标签&gt; 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 latest 作为默认标签。</p><p>以 Ubuntu 镜像 为例，ubuntu 是仓库的名字，其内包含有不同的版本标签，如，16.04, 18.04。我们可以通过 ubuntu:14.04，或者 ubuntu:18.04 来具体指定所需哪个版本的镜像。如果忽略了标签，比如 ubuntu，那将视为 ubuntu:latest。</p><p>仓库名经常以 两段式路径 形式出现，比如 jwilder&#x2F;nginx-proxy，前者往往意味着 Docker Registry 多用户环境下的用户名，后者则往往是对应的软件名。但这并非绝对，取决于所使用的具体 Docker Registry 的软件或服务。</p><p><strong>公开仓库</strong></p><p>Docker Registry 公开服务是开放给用户使用、允许用户管理镜像的 Registry 服务。一般这类公开服务允许用户免费上传、下载公开的镜像，并可能提供收费服务供用户管理私有镜像。</p><p>最常使用的 Registry 公开服务是官方的 Docker Hub，这也是默认的 Registry，并拥有大量的高质量的官方镜像。除此以外，还有 CoreOS 的 Quay.io，CoreOS 相关的镜像存储在这里；Google 的 Google Container Registry，Kubernetes 的镜像使用的就是这个服务。</p><p>由于某些原因，在国内访问这些服务可能会比较慢。国内的一些云服务商提供了针对 Docker Hub 的镜像服务（Registry Mirror），这些镜像服务被称为加速器。常见的有 阿里云加速器、DaoCloud 加速器 等。使用加速器会直接从国内的地址下载 Docker Hub 的镜像，比直接从 Docker Hub 下载速度会提高很多。</p><p>国内也有一些云服务商提供类似于 Docker Hub 的公开服务。比如 时速云镜像仓库、网易云镜像服务、DaoCloud 镜像市场、阿里云镜像库等。</p><p><strong>私有仓库</strong></p><p>除了使用公开服务外，用户还可以在本地搭建私有 Docker Registry。Docker 官方提供了 Docker Registry 镜像，可以直接使用做为私有 Registry 服务。</p><p>开源的 Docker Registry 镜像只提供了 Docker Registry API 的服务端实现，足以支持 docker 命令，不影响使用。但不包含图形界面，以及镜像维护、用户管理、访问控制等高级功能。在官方的商业化版本 Docker Trusted Registry 中，提供了这些高级功能。</p><p>除了官方的 Docker Registry 外，还有第三方软件实现了 Docker Registry API，甚至提供了用户界面以及一些高级功能。比如，VMWare Harbor 和 Sonatype Nexus。</p><p><strong>搭建私有仓库</strong></p><p>创建仓库流程</p><p>1、根据registry镜像创建容器</p><p>下载registry镜像</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker pull registry<br></code></pre></td></tr></table></figure><p>启动仓库容器</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker run -d -p 5000:5000 --restart=always --name registry registry<br><br>--restart 标志会检查容器的退出代码，并据此来决定是否要重启容器，默认是不会重启。<br>--restart的参数 always：无论容器的退出代码是什么，Docker都会自动重启该容器。<br></code></pre></td></tr></table></figure><p>检查容器效果</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">curl 127.0.0.1:5000/v2/_catalog<br></code></pre></td></tr></table></figure><p>2、配置仓库权限</p><p>你如果把192.168.229.128:5000这样的内网地址作为私有仓库地址，这时你会发现无法成功推送镜像。</p><p>这是因为 Docker 默认不允许非HTTPS方式推送镜像。我们可以通过 Docker 的配置选项来取消这个限制</p><p>在&#x2F;etc&#x2F;docker&#x2F;daemon.json中写入如下内容（如果文件不存在请新建该文件）</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">&#123;<br>&quot;registry-mirror&quot;: [<br>&quot;https://registry.docker-cn.com&quot;<br>],<br>&quot;insecure-registries&quot;: [<br>&quot;192.168.229.128:5000&quot;<br>]<br>&#125;<br>注意：该文件必须符合json规范，否则 Docker 将不能启动。<br>私有仓库的ip地址是宿主机的ip，而且ip两侧有双引号<br></code></pre></td></tr></table></figure><p>重启docker服务</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">systemctl restart docker<br></code></pre></td></tr></table></figure><p>3、提交镜像到私有仓库</p><p>标记镜像语法为：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker tag old_image_name:tag ip:5000/new_image_name:tag<br></code></pre></td></tr></table></figure><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker tag nginx:latest 192.168.229.128:5000/nginx:v1.0<br></code></pre></td></tr></table></figure><p>提交镜像语法为：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker push repository_name<br></code></pre></td></tr></table></figure><p>例如</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker push 192.168.229.128:5000/nginx<br></code></pre></td></tr></table></figure><p>4、测试</p><p>下载镜像</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker pull 192.168.229.128:5000/nginx:v1.0<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Container </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pod基本概念</title>
      <link href="/2022/08/01/Pod%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
      <url>/2022/08/01/Pod%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="Pod基本概念"><a href="#Pod基本概念" class="headerlink" title="Pod基本概念"></a><strong>Pod基本概念</strong></h1><p>Pod是一个逻辑抽象的概念，kubernetes创建的最小单元，</p><p>一个Pod有一个容器或多个容器组成。</p><h2 id="Pod特点："><a href="#Pod特点：" class="headerlink" title="Pod特点："></a><strong>Pod特点：</strong></h2><ul><li><p>一个Pod可以理解为一个应用实例，提供服务</p></li><li><p>Pod中容器始终部署在一个Node上</p></li><li><p>Pod中容器共享网络，储存资源</p></li></ul><h3 id="k8s-pod存在的意义"><a href="#k8s-pod存在的意义" class="headerlink" title="k8s-pod存在的意义"></a><strong>k8s-pod存在的意义</strong></h3><p>Pod主要用法：</p><ul><li>运行单个容器：最常见的用法，在这种情况下，可以将Pod看做是单个容器的抽象封装</li></ul><p>​    <img src="data:image/png;base64,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" alt="0"></p><p>​    <img src="data:image/png;base64,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" alt="0"></p><ul><li>运行多个容器：属于边车模式(Sidecar)，通过再Pod中定义专门容器，来执行主业务容器需要的辅助工作，这样的好出是将负载功能同主业务容器解藕，封装多个紧密耦合且需要共享资源的应用程序</li></ul><p>例如：某个主页程序我需要给他添加一个监控服务，我就要去这个主页的配置文件植入相关的监控程序，如果后面我又需要加入一些别的功能，可能并不是这个业务程序本身的一些功能，要是我们在现有的业务更改是可能回影响到现有的业务的稳定的性或者成本，所以我们可以把一些非核心业务的一些东西给解藕(剥离)出来，让他以上面边车的形式来辅助我们主业务，这样会更易于去实现，他们可以独立的进行去管理，能力也可以去重用。我们云原生定义就是，一个容器就跑一个程序。</p><p>​    <img src="data:image/png;base64,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" alt="0"></p><p>我们多容器在日常工作中用于最多的就是</p><ul><li><p>日志收集</p></li><li><p>应用监控</p></li></ul><p>​    <img src="data:image/png;base64,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" alt="0"></p><p>如果有这些需求，你可以运行多个容器：</p><ul><li><p>两个应用之间发生文件交互</p></li><li><p>两个应用需要通过127.0.0.1或者socket通信</p></li><li><p>两个应用需要发生频繁的调用</p></li></ul><p>为什么</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">Q：为什么k8s不直接使用容器作为最小计算单位，而是给出一个新的pod的概念？<br>​<br>A：原因在于容器的设计本身更适合一个容器内只运行一个进程。pod可以更好的适应当前的生产环境。<br>​<br>在Dockerfile创建镜像时，通过ENTRYPOINT命令指定启动容器时运行的第一个进程，这个进程的pid是1<br>1.容器中孤儿进程的管理需要自行实现。<br>在正常的操作系统中，pid为1的进程是init进程，是所有进程的父进程，它的其中一个使命是负责收养孤儿进程，但在容器中，除非我们自己去实现管理孤儿进程的逻辑，否则将无法处理。<br>2.除pid为1 的进程外，额外进程的健康状态需自行管理。<br>​<br>Q：一个pod中运行多个服务可不可以？<br>A：从实现上来说是可以的，但是并不推荐这样。一个pod尽量由一组紧密关联的容器组成，例如该服务进程需要一些额外的agent进程支持等。<br></code></pre></td></tr></table></figure><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220801162310119.png" alt="image-20220801162310119"></p><p>注：如果真的需要在一个容器中运行多个进程，会增加很多程序员的额外负担，pod作为一种更加高级的结构将容器绑定在一起，并且将他们作为一个单元进行管理。但这并不意味着所有的pod都由多个容器组成，一个pod中一个容器的情况也是非常常见的。</p><h3 id="Pod内容器之间如何通行"><a href="#Pod内容器之间如何通行" class="headerlink" title="Pod内容器之间如何通行"></a><strong>Pod内容器之间如何通行</strong></h3><p>我们学多dokcer都知道容器之间是相互隔离的，那么日志&#x2F;监控服务如何拿到主容器的数据呢，这里就用到了k8s的共享存储和共享网络</p><ul><li><p>共享存储：容器通过数据卷共享数据</p></li><li><p>共享网络：引用了一个叫infra container的容器，创建Pod先创建，负责Pod网络管理，自定义的容器都会加入到这个网络中，从而实现网络共享，使用127.0.0.1访问</p></li></ul><p><strong>Demo</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 yaml]# cat Pod.yaml                                        <br>apiVersion: apps/v1<br>kind: Deployment<br>metadata:<br>  name: pod-test<br>spec:<br>  replicas: 3       # Pod副本数3个，意思就是3个Pod<br>  selector:<br>    matchLabels:<br>      app: nginx<br>  template:<br>    metadata:<br>      labels:<br>        app: nginx<br>    spec:<br>      containers:       # 这个是定义容器的<br>      - name: web       # 容器名称<br>        image: nginx:1.18   # 镜像加版本<br>        volumeMounts:       # 添加挂载<br>        - name: log         # 卷的名称，对应下面<br>          mountPath: /data   # 挂载到容器本地的路径<br>      - name: bs        # 容器名称<br>        image: busybox  # 这个镜像是一个集成了三百多个最常用Linux命令和工具的软件。<br>        command:        # 执行命令<br>        - sleep         # 睡眠<br>        - 24h           # 睡眠时间，进程结束容器就自动退出，这里时间设置为24意思是24小时不会睡眠，所以就不会退出。<br>        volumeMounts:       # 添加挂载<br>        - name: log         # 卷的名称，对应下面<br>          mountPath: /data2   # 挂载到容器本地的路径<br>      volumes:          # 创建一个数据卷<br>      - name: log       # 名称为log<br>        emptyDir: &#123;&#125;     # 卷类型<br>[root@vm1 yaml]# kubectl apply -f Pod.yaml <br>deployment.apps/pod-test created<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"> 实时查看创建过程   <br>[root@vm1 ~]# kubectl get pod -w        #  这里可以看到我们 READY这里都显示2了，意思就是有两个容器，而且都在运行着<br>NAME                        READY   STATUS              RESTARTS   AGE<br>pod-test-66bb56448f-2hmhh   0/2     ContainerCreating   0          14s<br>pod-test-66bb56448f-mscj4   0/2     ContainerCreating   0          14s<br>pod-test-66bb56448f-z2d25   0/2     ContainerCreating   0          14s<br>pod-test-66bb56448f-z2d25   2/2     Running             0          16s<br>pod-test-66bb56448f-2hmhh   2/2     Running             0          16s<br>pod-test-66bb56448f-mscj4   2/2     Running             0          17s<br></code></pre></td></tr></table></figure><p><strong>验证Pod之间通信</strong></p><p>进入Pod</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"># 验证共享存储<br># 进入web容器<br>[root@vm1 yaml]# kubectl exec  -it pod-test-66bb56448f-2hmhh -c web -- bash <br>root@pod-test-66bb56448f-2hmhh:/# ls<br>bin   data  docker-entrypoint.d   etc   lib    media  opt   root  sbin  sys  usr<br>boot  dev   docker-entrypoint.sh  home  lib64  mnt    proc  run   srv   tmp  var<br># 竟然data目录创建文件<br>root@pod-test-66bb56448f-2hmhh:/# cd /data/<br>root@pod-test-66bb56448f-2hmhh:/data# ls<br>root@pod-test-66bb56448f-2hmhh:/data# touch test-web<br>root@pod-test-66bb56448f-2hmhh:/data# ls<br>test-web<br>​<br># 进入bs容器，因为busybox镜像没有bash的一个知识，我们需要用sh<br>[root@vm1 ~]#  kubectl exec  -it pod-test-66bb56448f-2hmhh -c bs -- sh   # 进入容器<br>/ # cd /data2/                  # 进入data2目录<br>/data2 # ls                     # 查看到我们刚刚在web镜像创建的文件<br>test-web<br>以上共享存储验证成功<br>​<br>---------------------------------------------------------------------------------------<br># 验证共享网络<br>进入bs容器<br>[root@vm1 ~]#  kubectl exec  -it pod-test-66bb56448f-2hmhh -c bs -- sh <br>/ # netstat -natp               # 查看容器监听的端口，busybox镜像默认是没有任何服务的，所以为什么会监听一个80端口呢，其实这个是监听的nginx的端口<br>Active Internet connections (servers and established)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    <br>tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      -<br>tcp        0      0 :::80                   :::*                    LISTEN      -<br>/ # ifconfig                    # 查看容器ip<br>eth0      Link encap:Ethernet  HWaddr BE:5D:64:A0:3C:9D  <br>          inet addr:10.244.2.53  Bcast:10.244.2.255  Mask:255.255.255.0<br>          UP BROADCAST RUNNING MULTICAST  MTU:1450  Metric:1<br>          RX packets:6 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:0 <br>          RX bytes:480 (480.0 B)  TX bytes:42 (42.0 B)<br>​<br>lo        Link encap:Local Loopback  <br>          inet addr:127.0.0.1  Mask:255.0.0.0<br>          UP LOOPBACK RUNNING  MTU:65536  Metric:1<br>          RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:1000 <br>          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)<br>​<br>/ # ps -ef                    # 查看bs的进程<br>PID   USER     TIME  COMMAND<br>    1 root      0:00 sleep 24h<br>   13 root      0:00 sh<br>   22 root      0:00 ps -ef<br>/ # <br>访问web的nginx<br>/ # wget 127.0.0.1          # 因为没有curl命令，所以我们使用wget把index文件下载下来，在使用cat查看文件内容<br>Connecting to 127.0.0.1 (127.0.0.1:80)<br>saving to &#x27;index.html&#x27;<br>index.html           100% |*************************************************************************************************|   612  0:00:00 ETA<br>&#x27;index.html&#x27; saved<br>/ # cat index.html          # 查看文件内容，这个访问的就是web的nginx<br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;Welcome to nginx!&lt;/title&gt;        # 可以看到是nginx<br>&lt;style&gt;<br>    body &#123;<br>        width: 35em;<br>        margin: 0 auto;<br>        font-family: Tahoma, Verdana, Arial, sans-serif;<br>    &#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;<br>&lt;p&gt;If you see this page, the nginx web server is successfully installed and<br>working. Further configuration is required.&lt;/p&gt;<br>​<br>&lt;p&gt;For online documentation and support please refer to<br>&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;<br>Commercial support is available at<br>&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;<br>​<br>&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br>/ #<br># 网络共享验证成功<br></code></pre></td></tr></table></figure><p>注意：</p><p>不管我们创建多个或者单个容器的Pod，都会在创建Pod之前创建一个 infra container网络共享的容器，在将我们定以的容器加入到这个网络，此容器不对用户开放是在后台工作的。</p><h2 id="Pod管理命令"><a href="#Pod管理命令" class="headerlink" title="Pod管理命令"></a><strong>Pod管理命令</strong></h2><p>创建Pod：</p><ul><li><p>kubectl apply -f Pod.yaml</p></li><li><p>kubctl run nginx –image&#x3D;nginx</p></li></ul><p>查看Pod:</p><ul><li><p>kubectl get pods</p></li><li><p>kubectl describe pod</p></li></ul><p>查看日志：</p><ul><li><p>kubectl logs  [-c CONTAINER]</p></li><li><p>kubectl logs  [-c CONTAINER] -f</p></li></ul><p>进入容器：</p><ul><li>kubectl exec -it  [-c CONTAINER] –bash</li></ul><p>删除Pod：</p><p>kubectl delete pod </p><p>实验</p><p>定义一个Pod，不用deployment控制器去创建不用副本</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"># yaml创建一个Pod<br>[root@vm1 yaml]# cat Pod.demo.yaml      # 单独创建一个Pod没有定义副本，Pod内定义了2个容器<br>apiVersion: v1<br>kind: Pod           # 类型Pod这里我们没有用Deployment<br>metadata:<br>  name: my-pod<br>spec:<br>  containers:   <br>  - name: web-pod       # 第一个容器<br>    image: nginx:1.18<br>  - name: bs            # 第二个容器<br>    image: busybox<br>    command:<br>    - sleep<br>    - 24h<br>[root@vm1 yaml]# kubectl apply -f Pod.demo.yaml     <br>pod/my-pod created<br>[root@vm1 yaml]# kubectl get pod          <br>NAME                        READY   STATUS              RESTARTS   AGE<br>my-pod                      0/2     ContainerCreating   0          3s<br>pod-test-66bb56448f-2hmhh   2/2     Running             0          19h<br>pod-test-66bb56448f-mscj4   2/2     Running             0          19h<br>pod-test-66bb56448f-z2d25   2/2     Running             0          19h<br>[root@vm1 yaml]# kubectl get pod<br>NAME                        READY   STATUS    RESTARTS   AGE<br>my-pod                      2/2     Running   0          36s            # 启动成功一个Pod两个容器<br>pod-test-66bb56448f-2hmhh   2/2     Running   0          19h<br>pod-test-66bb56448f-mscj4   2/2     Running   0          19h<br>pod-test-66bb56448f-z2d25   2/2     Running   0          19h<br>​<br>​<br># 命令行创建一个Pod<br>[root@vm1 yaml]# kubectl run my-pod2 --image=nginx          # 命令行方式创建一个Pod<br>pod/my-pod2 created<br>[root@vm1 yaml]# kubectl get pod<br>NAME                        READY   STATUS              RESTARTS   AGE<br>my-pod                      2/2     Running             0          13m<br>my-pod2                     0/1     ContainerCreating   0          4s<br>pod-test-66bb56448f-2hmhh   2/2     Running             0          19h<br>pod-test-66bb56448f-mscj4   2/2     Running             0          19h<br>pod-test-66bb56448f-z2d25   2/2     Running             0          19h<br>[root@vm1 yaml]# kubectl get pod                # Pod启动成功<br>NAME                        READY   STATUS    RESTARTS   AGE<br>my-pod                      2/2     Running   0          15m<br>my-pod2                     1/1     Running   0          2m14s<br>pod-test-66bb56448f-2hmhh   2/2     Running   0          19h<br>pod-test-66bb56448f-mscj4   2/2     Running   0          19h<br>pod-test-66bb56448f-z2d25   2/2     Running   0          19h<br>​<br># 查看现有的Pod，删除一个Pod，在删除一个有Deployment控制的Pod。<br>[root@vm1 yaml]# kubectl get pod<br>NAME                        READY   STATUS    RESTARTS   AGE<br>my-pod                      2/2     Running   0          15m<br>my-pod2                     1/1     Running   0          2m14s<br>pod-test-66bb56448f-2hmhh   2/2     Running   0          19h<br>pod-test-66bb56448f-mscj4   2/2     Running   0          19h<br>pod-test-66bb56448f-z2d25   2/2     Running   0          19h<br>​<br># 我们删除一个my-pod和Deployment控制的Pod看一下会是什么效果<br>[root@vm1 yaml]# kubectl delete pod my-pod      # Pod<br>pod &quot;my-pod&quot; deleted<br>[root@vm1 yaml]# kubectl delete pod pod-test-66bb56448f-2hmhh       # deployment控制的Pod<br>pod &quot;pod-test-66bb56448f-2hmhh&quot; deleted<br>​<br># 这里可以看到my-pod被删除了，但是pod-test还是3个，但是我们删除的那个pod没有了？为什么呢<br>原因就是Deployment内的replicas定义了Pod有3个如果，单个或者多个被删除或者下线，replicas检查到会重新拉起定义的个数<br>[root@vm1 yaml]# kubectl get pod        <br>NAME                        READY   STATUS    RESTARTS   AGE<br>my-pod2                     1/1     Running   0          12m<br>pod-test-66bb56448f-mscj4   2/2     Running   0          19h<br>pod-test-66bb56448f-vglcw   2/2     Running   0          51s<br>pod-test-66bb56448f-z2d25   2/2     Running   0          19h<br></code></pre></td></tr></table></figure><p>查看Pod的详情信息</p><p>如果我们需要查看这个Pod使用了什么镜像Pod有什么配置什么属性信息，都可以看到，我们可以使用describe</p><ul><li>kubectl describe pod  my-pod2</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 yaml]# kubectl describe pod  my-pod2    <br>Name:         my-pod2       # Pod名称<br>Namespace:    default       # 命名空间<br>Priority:     0<br>Node:         vm2/192.168.10.20         # 运行在那个节点<br>Start Time:   Fri, 15 Jul 2022 16:40:15 +0800           # 启动时间<br>Labels:       run=my-pod2<br>Annotations:  &lt;none&gt;<br>Status:       Running<br>IP:           10.244.1.57<br>IPs:<br>  IP:  10.244.1.57<br>Containers:<br>  my-pod2:<br>    Container ID:   docker://5ec534e4d2697790d232dfd0edc25b8ba4da382ffb57c28bcfec4cd338c6b1c7<br>    Image:          nginx<br>    Image ID:       docker-pullable://nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31<br>    Port:           &lt;none&gt;<br>    Host Port:      &lt;none&gt;<br>    State:          Running<br>      Started:      Fri, 15 Jul 2022 16:40:32 +0800<br>    Ready:          True<br>    Restart Count:  0<br>    Environment:    &lt;none&gt;<br>    Mounts:<br>      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-lll4q (ro)<br>Conditions:<br>  Type              Status<br>  Initialized       True <br>  Ready             True <br>  ContainersReady   True <br>  PodScheduled      True <br>Volumes:<br>  kube-api-access-lll4q:<br>    Type:                    Projected (a volume that contains injected data from multiple sources)<br>    TokenExpirationSeconds:  3607<br>    ConfigMapName:           kube-root-ca.crt<br>    ConfigMapOptional:       &lt;nil&gt;<br>    DownwardAPI:             true<br>QoS Class:                   BestEffort<br>Node-Selectors:              &lt;none&gt;<br>Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s<br>                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s<br>Events:<br>  Type    Reason     Age   From               Message<br>  ----    ------     ----  ----               -------<br>  Normal  Scheduled  20m   default-scheduler  Successfully assigned default/my-pod2 to vm2<br>  Normal  Pulling    20m   kubelet            Pulling image &quot;nginx&quot;<br>  Normal  Pulled     20m   kubelet            Successfully pulled image &quot;nginx&quot; in 15.540698325s<br>  Normal  Created    20m   kubelet            Created container my-pod2<br>  Normal  Started    20m   kubelet            Started container my-pod2<br></code></pre></td></tr></table></figure><p>查看容器的日志信息</p><p>在日常工作中日志是常用的，报错的时候不知道什么情况我们就需要去容器的日志信息</p><ul><li>kubectl logs my-pod2 -n default</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 yaml]# kubectl logs my-pod2 -n default<br>/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration<br>/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh<br>10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf<br>10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh<br>/docker-entrypoint.sh: Configuration complete; ready for start up<br>2022/07/15 08:40:32 [notice] 1#1: using the &quot;epoll&quot; event method<br>2022/07/15 08:40:32 [notice] 1#1: nginx/1.21.5<br>2022/07/15 08:40:32 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6) <br>2022/07/15 08:40:32 [notice] 1#1: OS: Linux 3.10.0-862.el7.x86_64<br>2022/07/15 08:40:32 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 65536:65536<br>2022/07/15 08:40:32 [notice] 1#1: start worker processes<br>2022/07/15 08:40:32 [notice] 1#1: start worker process 31<br>2022/07/15 08:40:32 [notice] 1#1: start worker process 32<br>​<br># 注意还有一种情况<br>[root@vm1 yaml]# kubectl get pod<br>NAME                        READY   STATUS    RESTARTS   AGE<br>my-pod                      2/2     Running   0          18s<br>my-pod2                     1/1     Running   0          29m<br>pod-test-66bb56448f-mscj4   2/2     Running   0          19h<br>pod-test-66bb56448f-vglcw   2/2     Running   0          18m<br>pod-test-66bb56448f-z2d25   2/2     Running   0          19h<br>[root@vm1 yaml]# kubectl logs my-pod        # 这里发现看不了容器日志<br>error: a container name must be specified for pod my-pod, choose one of: [web-pod bs]  # 这里有提醒<br># 是什么原因呢，原因就是这个Pod内有两个容器，我们必须要指定查看那个容器的日志   我们需要在Pod后面加上《-c》指定容器名称查看日志<br>[root@vm1 yaml]# kubectl logs my-pod -c web-pod<br>/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration<br>/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh<br>10-listen-on-ipv6-by-default.sh: Getting the checksum of /etc/nginx/conf.d/default.conf<br>10-listen-on-ipv6-by-default.sh: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh<br>/docker-entrypoint.sh: Configuration complete; ready for start up<br></code></pre></td></tr></table></figure><p>如果想实时查看容器日志我们只需要在最后面在加上一个参数《-f》</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 yaml]# kubectl logs my-pod -c web-pod -f<br>/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration<br>/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh<br>10-listen-on-ipv6-by-default.sh: Getting the checksum of /etc/nginx/conf.d/default.conf<br>10-listen-on-ipv6-by-default.sh: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf<br>/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh<br>/docker-entrypoint.sh: Configuration complete; ready for start up<br>​<br>10.244.0.0 - - [15/Jul/2022:09:16:36 +0000] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;curl/7.29.0&quot; &quot;-&quot;<br>​<br>​<br># 刚刚我在另一个界面访问了这个容器，日志实时的同步了下来<br>curl  10.244.2.57  这个Ip可以在详情内看到<br>[root@vm1 yaml]# kubectl get pod -o wide<br>NAME                        READY   STATUS    RESTARTS   AGE   IP            NODE   NOMINATED NODE   READINESS GATES<br>my-pod                      2/2     Running   0          23m   10.244.2.57   vm3    &lt;none&gt;           &lt;none&gt;<br>my-pod2                     1/1     Running   0          52m   10.244.1.57   vm2    &lt;none&gt;           &lt;none&gt;<br>pod-test-66bb56448f-mscj4   2/2     Running   0          20h   10.244.1.56   vm2    &lt;none&gt;           &lt;none&gt;<br>pod-test-66bb56448f-vglcw   2/2     Running   0          41m   10.244.2.56   vm3    &lt;none&gt;           &lt;none&gt;<br>pod-test-66bb56448f-z2d25   2/2     Running   0          20h   10.244.1.55   vm2    &lt;none&gt;           &lt;none&gt;<br></code></pre></td></tr></table></figure><p>进入终端</p><p>比如我们想进入某个Pod内的容器</p><p>如果Pod内也有多个容器我们也需要加《-c》参数指定容器，如果不指定会默认进入一个默认的容器</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 yaml]# kubectl exec -it my-pod -c web-pod -- bash<br>root@my-pod:/# ls<br>bin  boot  dev  docker-entrypoint.d  docker-entrypoint.sh  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var<br>root@my-pod:/# exit<br>exit<br>[root@vm1 yaml]#<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Service学习笔记</title>
      <link href="/2022/07/21/Service%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/07/21/Service%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="k8s企业应用之容器化迁移"><a href="#k8s企业应用之容器化迁移" class="headerlink" title="k8s企业应用之容器化迁移"></a>k8s企业应用之容器化迁移</h1><h3 id="接下来需要学习的小节"><a href="#接下来需要学习的小节" class="headerlink" title="接下来需要学习的小节"></a><strong>接下来需要学习的小节</strong></h3><ol><li>k8s目前市场发展现状</li><li>k8s CKA认证介绍（新版）</li><li>容器交付流程，在k8s部署项目流程</li><li>容器化java网站项目</li></ol><h3 id="k8s目前市场发展现状"><a href="#k8s目前市场发展现状" class="headerlink" title="k8s目前市场发展现状"></a>k8s目前市场发展现状</h3><p>随着云原生技术的普及，越来越多的企业使用Kubernetes来管理应用，并且集群规模也呈爆发式增长，企业也亟需应对随集群规模增长而带来的各种挑战。同时，为了更好地提供高可用、弹性伸缩的应用，企业也对容器混合云解决方案产生了极大的兴趣。</p><p>纵观容器混合云市场，主要的云服务提供商纷纷推出了自家的解决方案，例如华为云的MCP、Google的Anthos、Vmware的 Tanzu、IBM的 Cloud Pak、Red Hat的ACM for K8s等等。可以说，当前容器混合云市场纷繁嘈杂、百家争鸣，尽管各厂商不遗余力地鼓吹自家解决方案，但有个不争的事实是在容器混合云领域暂未出现领军产品。</p><p>混合云市场的乱象源于两点，一是各厂商均嗅到了商机，发现了这一广阔的蓝海市场，急于在这场竞争中抢占先机C位出道；二是开源界暂无统一的事实标准。根据历史规律，后者是解决这一乱象的关键所在，正像Kubernetes终结容器编排领域的纷争一模一样。</p><p>在开源领域，致力于混合云领域的项目数量与广阔的市场相比，显得极不相称。目前只有Rancher的Fleet、SAP公司力推的Gardener、以及Kubernetes社区的Kubefed。Fleet和Gardener要么缺乏创新，要么格局较低，难成大气，最有可能形成标准的便是被寄予厚望的、也是当前Kubernetes社区唯一的官方项目Kubefed。</p><p>关于k8s 的运维方式，dashboard与kubectl cli哪个更好：</p><p>2年前曾经与某做跨境电商的产品经理聊这个问题，我说linux cli是天花板。 而对方用很不屑的语气说你的命令行敲错了怎么办？ 说用web界面才是王道。草……</p><p>昨天，去高新园与一个做游戏的聊天，对方的观点就比较正。 我们一致认为：命令行是运维人员应当追求的，而web界面是给小白鼠用的。</p><p>不同的人观点不一样，只能选择，不能说服别人去认同你的观点，因为知识体系，工作背景不同。</p><p>举2个例子：<br>客机飞行起飞和降落阶段是人工驾驶、在空中是自动驾驶。 当出现极端天气时 一定是人工去接管自动驾驶系统，机长靠方向盘是最靠谱的。</p><p>昨天也提到阿里云提供了k8s 一键部署，用起来也很一般。 这个问题是这样：<br>对于阿里这种公司，是不可能搞不定一个开源组件的。 他们是业务驱动，如果业务需要深度开发则投入大量人力物力去研究，修改版本。 如果业务不需要深度开发，他们也会做把开源产品简单的包装后，就(侧重点在于简化流程，让小白能傻瓜式的使用)直接拿去卖钱的事情。 例如阿里云的redis、mysql、kafka、对象存储等很多组件就是如此，并不比开源产品性能高多少。</p><p>大公司，也有先安排一两个人去做某个事情的做法，而且比较普遍，不是说大公司的产品，就一定应该如何如何。 需要考虑成本、战略等。</p><p>小公司研发实力虽然在整体不如大公司，在灵活性、某个点的深度，是可以超越大公司的。</p><p>大部分k8s的用户（中小公司），是小白用户，对与网络、架构不需要特殊要求，本身的业务量就很小，开源的是足够用的。<br>少部分特殊场景，例如银行、证券、保险、im（微信这样的体量）、AI（gpu人工智能），需要购买专做云服务创业公司的k8s，据我了解，腾讯、阿里等也购买了不少这种小公司的产品。</p><p>再重申一边：大公司不是搞不定，而是时间成本。 能简单的就简单，能从其它公司买的就花钱去买，而不会什么事情都是自己去干，大公司的程序也不是神，代码也得一行一行去看，坑也得一个一个去踩一遍。 大公司不缺钱，缺时间和机会窗口，要快速反应。</p><p>总结：<br>二八原则。<br>80%的k8s用户对于k8s了解很肤浅，阿里云主要吃的是这一块的用户。<br>20%的k8s用户，对性能等有特殊要求，做微服务的创业公司吃的是这一块的用户。</p><h3 id="k8s-CKA认证介绍"><a href="#k8s-CKA认证介绍" class="headerlink" title="k8s CKA认证介绍"></a>k8s CKA认证介绍</h3><p>关于CKA</p><p>CKA全称为（Certificated Kubernetes Administrator）即为官方认证的Kubernetes管理员。管理员认证（CKA）旨在确保认证持有者具备履行Kubernetes管理员职责的技能，知识和能力。</p><p>那么CKA认证有什么用呢？</p><p>提升专业能力：CKA 是 CNCF 致力于发展 Kubernetes 管理员社区，是促进公司和组织广泛使用 Kubernetes 进行落地实践过程中的关键步骤。</p><p>证明你的实力：通过 CKA 认证的管理人员可迅速建立在就业市场上的信誉和价值。</p><p>申请 KCSP 认证：每个公司一旦有 3 名员工通过 CKA，即可申请 KCSP(KCSP 是由 CNCF和 Linux 基金会发起的，旨在针对在 Kubernetes 的企业应用中拥有丰富经验的服务商认证)。</p><p>公司投标优势：如果公司业务是面向企业的容器化项目，参与投标时提供 CKA 资质证书可提升成功率。</p><p>证书长下面这样子，博主是2021-11-08拿到的证书</p><p>报名</p><p>CKA目前已经开通中文报名通道，考试代号为CKA-CN，官方考试费用目前为2498RMB（2021-11-01），可以通过第三方渠道获取优惠码的方式便宜200~300RMB，在付款的时候输入优惠码，付款金额会变成0，亲测有效，中文报名通道（注册后请先实名认证）：<a href="https://training.linuxfoundation.cn/certificates/1">https://training.linuxfoundation.cn/certificates/1</a></p><p>购买成功后，登录个人中心可以看到相应的考试码，后续预约考试的时候会使用。</p><p>注意事项：</p><p>中文报名通道网站注册后请先实名认证</p><p>考试有效期一年，也就是可以先缴费报名，可以在报名后的一年内的任意一天预约考试，也就是说报名后你有一年的时间来复习，完全不用担心时间不够</p><p>考试的形式是在线考试，考试时间2小时，考试题目17道（都是上机操作题，会给你7~8个K8S集群，然后选择不同集群根据题意进行操作，开卷考试，考试期间可以参考K8S官方文档），满分100分，66分及格。</p><p>有两次考试机会，如果第一次挂了还拥有一次免费的补考机会（前提是第一次预约一定要去，如果第一次没去，那么就没有补考机会）</p><p>考试证件，预约了新版CKA-CN考试有身份证就可以了（方便国内考生），之前还需要护照等有英文名字的证件</p><p>考前复习</p><p>对于一个完全没有接触过K8S的人来说，需要先从容器基础docker开始学习，实践套路一般为通过Vmware安装Linux虚拟机，然后在虚拟机中安装docker和K8S，这部分可以参考我之前的相关文章</p><p>2021-01-05_5分钟在虚拟机中搭建Linux开发环境</p><p>都9102年了，还没听过docker？5分钟带你了解docker的前世今生！</p><p>2021-06-14_K8S原理架构与实战（基础篇）</p><p>注意考试全部是上机操作题，没有理论题，因此复制过程中一定要注意多敲命令，勤加练习，</p><p>复习过程中也可以多参考熟悉K8S官方文档，考试的时候可以参考官方文档，官方文档地址如下</p><p><a href="https://kubernetes.io/zh/docs/home/">https://kubernetes.io/zh/docs/home/</a></p><p>考试权重占比</p><p>集群架构，安装和配置：25%</p><p>• 管理基于角色的访问控制（RBAC）</p><p>• 使用Kubeadm安装基本集群</p><p>• 管理高可用性的Kubernetes集群</p><p>• 设置基础架构以部署Kubernetes集群</p><p>• 使用Kubeadm在Kubernetes集群上执行版本升级</p><p>• 实施etcd备份和还原</p><p>工作负载和调度：15%</p><p>• 了解部署以及如何执行滚动更新和回滚</p><p>• 使用ConfigMaps和Secrets配置应用程序</p><p>• 了解如何扩展应用程序</p><p>• 了解用于创建健壮的、自修复的应用程序部署的原语</p><p>• 了解资源限制如何影响Pod调度</p><p>• 了解清单管理和通用模板工具</p><p>服务和网络：20%</p><p>• 了解集群节点上的主机网络配置</p><p>• 理解Pods之间的连通性</p><p>• 了解ClusterIP、NodePort、LoadBalancer服务类型和端点</p><p>• 了解如何使用入口控制器和入口资源</p><p>• 了解如何配置和使用CoreDNS</p><p>• 选择适当的容器网络接口插件</p><p>存储：10%</p><p>• 了解存储类、持久卷</p><p>• 了解卷模式、访问模式和卷回收策略</p><p>• 理解持久容量声明原语</p><p>• 了解如何配置具有持久性存储的应用程序</p><p>故障排除：30%</p><p>• 评估集群和节点日志</p><p>• 了解如何监视应用程序</p><p>• 管理容器标准输出和标准错误日志</p><p>• 解决应用程序故障</p><p>• 对群集组件故障进行故障排除</p><p>• 排除网络故障</p><p>考试题</p><p>在线练习</p><p>CKA提供了在线练习，整个环境和真实考试一致，也是提供了多套集群供练习，在线练习有时间限制，可以在考试前一周左右进行冲刺，注意在线练习题比考试题要难，练习题如下所示</p><p>往年真题</p><p>CKA题库较少，根据我的实践，考试题和往年试题基本一致，所以如果需要快速通过考试，只需要狂练真题即可，下图为我收集的往年真题，带有答案解析和相应笔记：</p><p>下载地址</p><p>往年真题和练习题下载地址（收集整理耗费了不少精力，所以付费下载，望理解）：<a href="https://download.csdn.net/download/xvktdmjg/37979171">https://download.csdn.net/download/xvktdmjg/37979171</a></p><p>提供有偿一对一培训服务，如需了解，咨询QQ：一零七三八五零五二五</p><p>预约</p><p>预约时间要注意在网络情况比较好的情况预约，并且预约时间和取消预约都需要至少提前一天进行。</p><p>第一次考试一定要参加，如果无法参加请提前取消预约，如果预约了第一次没参加，无法进行第二次考试！</p><p>下面为时间预约步骤</p><p>首先要注册Linux基金会网站并登录，地址： <a href="https://trainingportal.linuxfoundation.org/">https://trainingportal.linuxfoundation.org/</a></p><p>点击右上角Apply Registration Code，输入报名后获得的考试码，然后点击Validate验证，验证通过后点击Redeem</p><p>步骤准备，根据列表完成相应步骤，注意姓名和身份证一致（CKA-CN），姓和名反写，比如 “四 李”；Schedule按钮要等半个小时才能点击</p><p>在等待Schedule的时候可以进行System Requirements检查，注意此处需要安装一个浏览器插件，安装完成后等全部检测项是勾即为通过</p><p>点击Schedule按钮进入如下界面，注意考试项目选择CKA-CN如下图</p><p>点击Next进入时间选择页面，注意这里会选择两次时间，第一次选择你需要预约的时间，然后系统会获取可以考试的时间，然后再在可以考试的时间里面再次选择（整个过程比较慢，需要耐心等待）。</p><p>考试注意事项</p><p>考试采取在线考试的形式，需要打开摄像头与屏幕共享，考试界面如下（如果报名的CKA-CN，则题目是中文），左边部分是题目，右边部分是命令行输入界面，顶部有一排控制选项（和考官实时对话，交卷，暂时离开等）</p><p>考试过程中注意事项如下：</p><p>确保环境安静（封闭环境），周围不能有其他人</p><p>准备好身份证，身份验证时需要</p><p>需要有稳定的网络，考试需要屏幕分享及打开摄像头</p><p>考试过程中需保证保证人在镜头画面中，不能离开镜头</p><p>考试过程中不能喝水吃东西(最佳状态)，如需要离开请申请，注意，离开依然会算考试时间（如非必要，尽量不要离开）</p><p>考试完成后找到Exam Control点击找到相应按钮提交考试即可结束考试，考试结束后24小时之内出考试结果（邮件通知）</p><p>考试技巧</p><p>快捷命令设置</p><p><strong>给kubectl起一个别名，方面在考试的时候快速输入</strong><br>alias k&#x3D;kubectl</p><p><strong>dry-run命令快速输入</strong><br>export do&#x3D;”–dry-run&#x3D;client -o yaml” # like short for dry output. use whatever you like</p><p>做每道题之前一定要记得切换集群，考试页面不能ctrl+c复制，ctrl+v粘贴，ctrl + insert复制，shift+insert粘贴</p><p>每道题编排文件进行相应命名，方面检查时进行区分</p><p>不会做的及时跳过，并且做标记，每道题目下方可以进行标记，左边按钮是此题已完成，右边是此题未完成</p><p>整个考试过程只能打开两个浏览器标签，一个是在线考试标签，另外一个是K8S在线文档标签，不能打开其他标签</p><h2 id="实战篇"><a href="#实战篇" class="headerlink" title="实战篇"></a>实战篇</h2><h3 id="容器交付流程"><a href="#容器交付流程" class="headerlink" title="容器交付流程"></a>容器交付流程</h3><h4 id="1-容器交付流程"><a href="#1-容器交付流程" class="headerlink" title="1.容器交付流程"></a>1.容器交付流程</h4><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/462684-20210925171811116-1426560401.png" alt="img"></p><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/198738-20200224193947186-325076363.png" alt="img"></p><h4 id="2-容器交付实战"><a href="#2-容器交付实战" class="headerlink" title="2.容器交付实战"></a>2.容器交付实战</h4><p><img src="https://cloud-1311712548.cos.ap-guangzhou.myqcloud.com/img/462684-20210925171900111-45876335.png" alt="img"></p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><ul><li>项目代码构成</li><li>依赖的服务</li><li>提供服务的端口</li><li>配置文件</li><li>程序在工作种涉及持久化的文件</li></ul><p>代码项目地址：<a href="https://gitee.com/qianxunqianyu/tom-java-demo">https://gitee.com/qianxunqianyu/tom-java-demo</a></p><p>1、生成网站打包文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">yum install java-1.8.0-openjdk maven git -y``git clone https:``//gitee.com/qianxunqianyu/tom-java-demo``mvn clean package -Dmaven.test.skip=``true` `# 代码编译构建``unzip target/*.war -d target/ROOT # 解压构建文件<br></code></pre></td></tr></table></figure><p>　</p><p><strong>实战开始</strong></p><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220718180448759.png" alt="image-20220718180448759"></p><h4 id="3-制作镜像"><a href="#3-制作镜像" class="headerlink" title="**3.**制作镜像"></a>**3.**制作镜像</h4><p><strong>部署ava环境，下载jdk</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"># Centos yum安装java jdk环境包# 搜索包<br>yum list  | grep java     <br><br># 安装指定版本包<br>yum -y install java-1.8.0-openjdk* maven<br><br># 查看 jdk版本，环境检查<br>[root@vm1 ~]# java -version <br>openjdk version &quot;1.8.0_332&quot;<br>OpenJDK Runtime Environment (build 1.8.0_332-b09)<br>OpenJDK 64-Bit Server VM (build 25.332-b09, mixed mode)<br><br># 检查mvn命令<br>[root@vm1 ~]# mvn<br>mvn       mvnDebug  mvnyjp    <br>[root@vm1 ~]# mvn<br></code></pre></td></tr></table></figure><p>2.下载java项目学习-这里用到的是啊良的哈哈哈</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">git clone https://github.com/lizhenliang/tomcat-java-demo# 因为项目在github上面下载可能会比较慢<br>[root@vm1 /]# git clone https://github.com/lizhenliang/tomcat-java-demo<br>正克隆到 &#x27;tomcat-java-demo&#x27;...<br>remote: Enumerating objects: 549, done.<br>remote: Counting objects: 100% (3/3), done.<br>remote: Compressing objects: 100% (3/3), done.<br>remote: Total 549 (delta 0), reused 2 (delta 0), pack-reused 546<br>接收对象中: 100% (549/549), 5.08 MiB | 2.12 MiB/s, done.<br>处理 delta 中: 100% (213/213), done.<br>[root@vm1 /]# ls | grep tomcat-java-demo<br>tomcat-java-demo<br><br># 查看项目文件（这个就是项目源码包） 这个源码包对于java来说是不能直接部署的-必须经过java编译才行，包括其他语言都是<br>[root@vm1 d]# ls<br>db  Dockerfile  LICENSE  pom.xml  README.md  src<br><br># src 源码文件<br></code></pre></td></tr></table></figure><p>3.编译项目，编译完，项目才能部署</p><p>编译</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">mvn clean package -Dmaven.test.skip=true    # 在项目的目录下<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"># 初次编译会重网上下载依赖包，服务器是在国外，要是本地下载比较慢的话我们可以添加阿里云的加速<br># 进入阿里云阿里云云效 Maven网站<br>https://developer.aliyun.com/mvn/guide<br></code></pre></td></tr></table></figure><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220718191541127.png" alt="image-20220718191541127"></p><p>3.1，进入maven配置文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">vim /etc/maven/settings.xml   # 配置文件目录<br>&lt;mirror&gt;<br>  &lt;id&gt;aliyunmaven&lt;/id&gt;<br>  &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;<br>  &lt;name&gt;阿里云公共仓库&lt;/name&gt;<br>  &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;<br>&lt;/mirror&gt;<br></code></pre></td></tr></table></figure><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220718191944751.png" alt="image-20220718191944751"></p><p>再次编译</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">mvn clean package -Dmaven.test.skip=true<br>..........  # 省略输出<br>[INFO] Total time: 3.270s<br>[INFO] Finished at: Mon Jul 18 19:22:56 CST 2022<br>[INFO] Final Memory: 25M/239M<br>[INFO] ------------------------------------------------------------------------     显示最下面这几行表示编译完成了<br>[root@vm1 tomcat-java-demo]# ls     # 这时在查看目录下面会多一个target文件 <br>db  Dockerfile  LICENSE  pom.xml  README.md  src  target<br></code></pre></td></tr></table></figure><p>target文件目录就有我们打的war包了，</p><ul><li>我们需要把这个包打一个镜像</li><li>把这个镜像推送到镜像仓库中</li><li>使用k8s拉取这个镜像更新项目</li></ul><h5 id="3-1构建镜像"><a href="#3-1构建镜像" class="headerlink" title="3.1构建镜像"></a>3.1构建镜像</h5><p>镜像分类</p><ul><li>基础镜像：操作系统层，例如Centos，ubuntu，alpine</li><li>环境镜像：环境运行层，例如jdk，nginx，python</li><li>项目镜像：应用层， 例如kubernetesui&#x2F;dashboard</li></ul><p>在项目的文件内有一个Dockerfile文本，里面写了如果制作镜像</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">root@vm1 tomcat-java-demo]# cat Dockerfile <br>FROM tomcat <br>LABEL maintainer www.ctnrs.com<br>ADD target/*.war /usr/local/tomcat/webapps/ROOT.war <br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">docker build -t java-demo .   # build镜像，如果默认识别Dockerfile文件，如果是别的名字，就需要-f 指定<br>docker build -f Dockerfile -t java-demo .  # 这样<br></code></pre></td></tr></table></figure><p>过程</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 tomcat-java-demo]# docker build -t java-lsp -f Dockerfile.bak .<br>Sending build context to Docker daemon  49.48MB<br>Step 1/4 : FROM lizhenliang/tomcat<br> ---&gt; 143035d83fdc<br>Step 2/4 : LABEL maintainer www.ctnrs.com<br> ---&gt; Running in b0fe7fd9b4a4<br>Removing intermediate container b0fe7fd9b4a4<br> ---&gt; a3b476842d0e<br>Step 3/4 : RUN rm -rf /usr/local/tomcat/webapps/*<br> ---&gt; Running in a3923846a5a4<br>Removing intermediate container a3923846a5a4<br> ---&gt; 091c7e6e12d4<br>Step 4/4 : ADD target/*.war /usr/local/tomcat/webapps/ROOT.war<br> ---&gt; 680e00bf7826<br>Successfully built 680e00bf7826<br>Successfully tagged java-lsp:latest# 镜像构建完成<br><br>[root@vm1 tomcat-java-demo]# docker images | grep java# 查看我们构建的镜像<br>java-lsp                                                          latest     680e00bf7826   2 minutes ago    406MB<br></code></pre></td></tr></table></figure><p>我们使用docker run运行测试一下</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 tomcat-java-demo]# docker run -d -p 89:8080 --name java.lsp java-lsp# 暴露89端口，tomcat默认监听8080端口<br>402e1f3088f81031393896a641832eab9c220d95f543d11d40add25f558d717a<br><br>[root@vm1 tomcat-java-demo]# docker ps | grep java# 查看docker进程<br>402e1f3088f8   java-lsp                                              &quot;catalina.sh run&quot;        3 minutes ago       Up 3 minutes       0.0.0.0:89-&gt;8080/tcp, :::89-&gt;8080/tcp   java.lsp<br></code></pre></td></tr></table></figure><p>浏览器访问测试</p><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220718201135404.png" alt="image-20220718201135404"></p><h4 id="4-使用控制器部署镜像"><a href="#4-使用控制器部署镜像" class="headerlink" title="4.使用控制器部署镜像"></a>4.使用控制器部署镜像</h4><p><strong>1.使用deployment控制器，写yaml清单</strong></p><p>Deployment</p><p>我们这里使用ingress暴露Pod出去使用域名访问</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 kubernetes]# cat deployment.yaml <br>apiVersion: apps/v1<br>kind: Deployment<br>metadata:<br>  name: tomcat<br>spec:<br>  replicas: 5<br>  selector:<br>    matchLabels:<br>      app: tomcat<br>  template:<br>    metadata:<br>      labels:<br>        app: tomcat<br>    spec:<br>      containers:<br>      - image: lizhenliang/java-demo# 这个镜像是直接拿那个啊良哥哥的，从他的仓库下载，我们郭构建的那个镜像我们拉取不了本地，我看资料应该是需要放到node节点<br>        name: tomcat<br>        resources:<br>          requests:<br>#            cpu: 1<br>#            memory: 1Gi<br>#          limits:<br>#            cpu: 1<br>#            memory: 1Gi<br><br>---<br><br>apiVersion: v1<br>kind: Service<br>metadata:<br>  name: tomcat<br>spec:<br>  selector:<br>    app: tomcat<br>  ports:<br>    - protocol: TCP<br>      port: 8080<br>      targetPort: 8080<br><br>---<br><br><br>apiVersion: networking.k8s.io/v1<br>kind: Ingress<br>metadata:<br>  name: tomcat<br>spec:<br>  rules:<br>  - host: web.wsnbwsnb.com<br>    http:<br>      paths:<br>      - path: /<br>        pathType: Prefix<br>        backend:<br>          service:<br>            name: tomcat<br>            port:<br>              number: 8080<br><br><br>[root@vm1 kubernetes]# kubectl apply -f deployment.yaml                 <br>deployment.apps/tomcat configured<br>service/tomcat unchanged<br>ingress.networking.k8s.io/tomcat created<br><br>查看pod状态，Service,ingress<br>[root@vm1 kubernetes]#  kubectl get pod,svc,deploy,ingress -o wide<br>NAME                          READY   STATUS    RESTARTS   AGE     IP             NODE   NOMINATED NODE   READINESS GATES<br>pod/bs                        1/1     Running   1          2d1h    10.244.1.64    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/tomcat-69dcc89b88-4vv58   1/1     Running   0          7m37s   10.244.2.107   vm3    &lt;none&gt;           &lt;none&gt;<br>pod/tomcat-69dcc89b88-qkw85   1/1     Running   0          7m21s   10.244.1.98    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/tomcat-69dcc89b88-sp88m   1/1     Running   0          9m17s   10.244.1.97    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/tomcat-69dcc89b88-z7kxv   1/1     Running   0          9m17s   10.244.1.96    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/tomcat-69dcc89b88-zndhk   1/1     Running   0          9m17s   10.244.1.95    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/web-84b9b46f96-47vj5      1/1     Running   0          23h     10.244.1.89    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/web-84b9b46f96-9fw54      1/1     Running   0          23h     10.244.1.90    vm2    &lt;none&gt;           &lt;none&gt;<br>pod/web-84b9b46f96-kpdmt      1/1     Running   0          23h     10.244.2.99    vm3    &lt;none&gt;           &lt;none&gt;<br>pod/web-84b9b46f96-wrm8b      1/1     Running   0          23h     10.244.2.98    vm3    &lt;none&gt;           &lt;none&gt;<br>pod/web-84b9b46f96-x8jnj      1/1     Running   0          23h     10.244.2.97    vm3    &lt;none&gt;           &lt;none&gt;<br><br>NAME                 TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE     SELECTOR<br>service/kubernetes   ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP    6d22h   &lt;none&gt;<br>service/tomcat       ClusterIP   10.100.140.175   &lt;none&gt;        8080/TCP   50m     app=tomcat<br>service/web          ClusterIP   10.98.93.11      &lt;none&gt;        8889/TCP   23h     app=nginx<br><br>NAME                     READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS   IMAGES                  SELECTOR<br>deployment.apps/tomcat   5/5     5            5           50m   tomcat       lizhenliang/java-demo   app=tomcat<br>deployment.apps/web      5/5     5            5           23h   nginx        nginx:1.18              app=nginx<br><br>NAME                               CLASS    HOSTS              ADDRESS                       PORTS   AGE<br>ingress.networking.k8s.io/tomcat   &lt;none&gt;   web.wsnbwsnb.com   192.168.10.20,192.168.10.30   80      50m# 我们直接访问这个域名<br></code></pre></td></tr></table></figure><h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><p>修改hosts文件，来解析测试</p><p>windows-以为我电脑联网了用浏览器测试有问题所以用cmd测试</p><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220718225129338.png" alt="image-20220718225129338"></p><p>node节点测试</p><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220718225234108.png" alt="image-20220718225234108"></p><p>如果我们不会去写yaml，我们可以用命令行创建尝试运行临时演示不会部署，同时导出yaml文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">kubectl create deployment java-demo --image=lizhenliang/java-demo --dry-run=client -o yaml &gt; web.yaml<br>[root@vm1 kubernetes]# ls | grep web<br>web.yaml<br>[root@vm1 kubernetes]# cat web.yaml # 这样就生成了一个命令结果上面的一个yaml了<br>apiVersion: apps/v1<br>kind: Deployment<br>metadata:<br>  creationTimestamp: null# 把这个时间戳删除<br>  labels:<br>    app: java-demo<br>  name: java-demo<br>spec:<br>  replicas: 1<br>  selector:<br>    matchLabels:<br>      app: java-demo<br>  strategy: &#123;&#125;<br>  template:<br>    metadata:<br>      creationTimestamp: null# 把这个时间戳删除<br>      labels:<br>        app: java-demo<br>    spec:<br>      containers:<br>      - image: lizhenliang/java-demo<br>        name: java-demo<br>        resources: &#123;&#125;<br>status: &#123;&#125;# 用的时候把这个删除<br><br># 这样就可以用了<br>[root@vm1 kubernetes]# cat web.yaml <br>apiVersion: apps/v1<br>kind: Deployment<br>metadata:<br>  labels:<br>    app: java-demo<br>  name: java-demo<br>spec:<br>  replicas: 1<br>  selector:<br>    matchLabels:<br>      app: java-demo<br>  strategy: &#123;&#125;<br>  template:<br>    metadata:<br>      labels:<br>        app: java-demo<br>    spec:<br>      containers:<br>      - image: lizhenliang/java-demo<br>        name: java-demo<br>        resources: &#123;&#125;<br></code></pre></td></tr></table></figure><p>Service也可以写</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">[root@vm1 /]# kubectl expose deployment tomcat --port=80 --target-port=8080 --type=NodePort --dry-run=client -o yaml &gt; Service.yaml<br>[root@vm1 /]# cat Service.yaml <br>apiVersion: v1<br>kind: Service<br>metadata:<br>  creationTimestamp: null# 删除<br>  name: tomcat<br>spec:<br>  ports:<br>  - port: 80<br>    protocol: TCP<br>    targetPort: 8080<br>  selector:<br>    app: tomcat<br>  type: NodePort<br>status:# 删除<br>  loadBalancer: &#123;&#125;# 删除<br> # 记得把时间戳删除了<br></code></pre></td></tr></table></figure><p>查看监听端口</p>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五种控制器详解</title>
      <link href="/2022/07/20/%E4%BA%94%E7%A7%8D%E6%8E%A7%E5%88%B6%E5%99%A8%E8%AF%A6%E8%A7%A3/"/>
      <url>/2022/07/20/%E4%BA%94%E7%A7%8D%E6%8E%A7%E5%88%B6%E5%99%A8%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="五种控制器详解"><a href="#五种控制器详解" class="headerlink" title="五种控制器详解"></a>五种控制器详解</h1><p><strong>Kubernetes（k8s）Deployment、StatefulSet、DaemonSet、Job、CronJob五种控制器详解</strong></p><p><strong>文章目录</strong><br>一、Deployment控制器概述<br>二、Deployment工作原理<br>1）滚动升级<br>2）版本回滚<br>三、Deployment的资源清单文件详解<br>四、Deployment实战<br>1）示例1<br>2）扩缩容<br>3）镜像更新<br>4）版本回退<br>五、Deployment金丝雀发布（灰度发布）<br>六、有状态、无状态服务区别<br>1）无状态：<br>2）有状态<br>七、PV、PVC、NFS、SC<br>1）PV概述<br>2）PVC概述<br>3）通过NFS实现持久化存储<br>4）基于NFS存储创建PV<br>5）基于NFS-PV创建PVC<br>6）SC（StorageClass：存储类）<br>7）基于动态sc（StorageClass：存储类）创建一个pv<br>八、StatefulSet控制器<br>1）简介<br>2）常规service和无头服务区别<br>3）特点<br>4）组成部分<br>九、DaemonSet控制器<br>十、Job控制器<br>十一、CronJob 控制器<br>十二、总结<br>1）ReplicationController（RC）主要功能<br>2）ReplicaSet主要功能（RS）<br>3）deployment的主要功能<br>4）Sate fulSet控制器<br>5）DaemonSet控制器<br>6）Job&amp;CronJob</p><h3 id="一-、Deployment控制器概述"><a href="#一-、Deployment控制器概述" class="headerlink" title="一)、Deployment控制器概述"></a>一)、Deployment控制器概述</h3><ul><li>一般情况下，我们并不直接创建 Pod，而是通过 Deployment 来创建 Pod，由 Deployment 来负责创建、更新、维护其所管理的所有 Pods。</li></ul><p>ReplicationSet（RS）和ReplicationController（RC）区别</p><ul><li><p>这里就需要说一下ReplicationSet（RS）和ReplicationController（RC），RS是在RC基础上发展来的，在新版的Kubernetes中，已经将RC替换为RS 了，它们两者没有本质的区别，都是用于Pod副本数量的维护与更新的，使得副本数量始终维持在用户定义范围内，即如果存在容器异常退出，此时会自动创建新的Pod进行替代；而且异常多出来的容器也会自动回收。</p></li><li><p>总结不同点在于：RS在RC的基础上支持集合化的selector</p></li><li><p>一般情况下RS也是可以单独使用的，但是一般推荐和Deployment一起使用，这样会使得的Deployment提供的一些回滚更新操作同样用于RS上，因为<strong>RS不支持回滚更新操作，Deployment支持</strong>；</p></li></ul><h3 id="二-、Deployment工作原理"><a href="#二-、Deployment工作原理" class="headerlink" title="二)、Deployment工作原理"></a>二)、Deployment工作原理</h3><p>先看一下Deployment、RS、Pod它们三者之间的关系：</p><p><img src="https://img-blog.csdnimg.cn/956f98633a9044bbb95c6fab15ee34af.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>RS负责控制副本数量，由Deployment来创建具体的Pod。</p><p>Deployment控制器支持两种更新策略：滚动更新（rolling update）和重新创建（recreate），默认为滚动更新。</p><h4 id="1）滚动升级"><a href="#1）滚动升级" class="headerlink" title="1）滚动升级"></a>1）滚动升级</h4><p>滚动升级是默认的更新策略，它在删除一部分旧版本Pod资源的同时，补充创建一部分新版本的Pod对象进行应用升级，其优势是升级期间，容器中应用提供的服务不会中断，但要求应用程序能够应对新旧版本同时工作的情形，例如新旧版本兼容同一个数据库方案等。不过，更新操作期间，不同客户端得到的响应内容可能会来自不同版本的应用。</p><p>Deployment控制器的滚动更新操作并非在同一个ReplicaSet控制器对象下删除并创建Pod资源，而是将它们分置于两个不同的控制器之下：旧控制器的Pod对象数量不断减少的同时，新控制器的Pod对象数量不断增加，直到旧控制器不再拥有Pod对象，而新控制器的副本数量变得完全符合期望值为止，如图所示：</p><p><img src="https://img-blog.csdnimg.cn/ebbee4d0609c4e2490eeff19722f31ed.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>滚动更新时，应用升级期间还要确保可用的Pod对象数量不低于某阈值以确保可以持续处理客户端的服务请求，变动的方式和Pod对象的数量范围将通过spec.strategy.rollingUpdate.maxSurge和spec.strategy.rollingUpdate.maxUnavailable两个属性协同进行定义，它们的功用如图所示：</p><p><img src="https://img-blog.csdnimg.cn/87f8d64c397a4f57988d904fc2670da4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><ul><li>maxSurge：指定升级期间存在的总Pod对象数量最多可超出期望值的个数，其值可以是0或正整数，也可以是一个期望值的百分比；例如，如果期望值为3，当前的属性值为1，则表示Pod对象的总数不能超过4个。</li><li>maxUnavailable：升级期间正常可用的Pod副本数（包括新旧版本）最多不能低于期望数值的个数，其值可以是0或正整数，也可以是一个期望值的百分比；默认值为1，该值意味着如果期望值是3，则升级期间至少要有两个Pod对象处于正常提供服务的状态。</li><li>maxSurge和maxUnavailable属性的值不可同时为0，否则Pod对象的副本数量在符合用户期望的数量后无法做出合理变动以进行滚动更新操作。</li></ul><ol><li>&#96;&#96;&#96;<ul><li>maxUnavailable：和期望ready的副本数比，不可用副本数最大比例（或最大值），<em><strong>*这个值越小，越能保证服务稳定，更新越平滑；*</strong></em></li><li>maxSurge：和期望ready的副本数比，超过期望副本数最大比例（或最大值），<em><strong>*这个值调的越大，副本更新速度越快。*</strong></em><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"><br>   1.蓝绿发布：两套环境交替升级，旧版本保留一定时间便于回滚。<br><br>   2.灰度发布：根据比例将老版本升级，例如80%用户访问是老版本，20%用户访问是新版本。<br><br>   3.滚动发布：按批次停止老版本实例，启动新版本实例。<br><br>#### 2）版本回滚<br><br>Deployment控制器也支持用户保留其滚动更新历史中的旧ReplicaSet对象版本,这赋予了控制器进行应用回滚的能力：用户可按需回滚到指定的历史版本。控制器可保存的历史版本数量由“spec.revisionHistoryLimit”属性进行定义。当然，也只有保存于revision历史中的ReplicaSet版本可用于回滚，因此，用户要习惯性地在更新操作时指定保留旧版本。<br><br>![在这里插入图片描述](https://img-blog.csdnimg.cn/719d6c89978b476089e08d0cd1a7778d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16)<br><br>### 三)、Deployment的资源清单文件详解<br><br>```yaml<br>apiVersion: apps/v1     # 版本号<br>kind: Deployment        # 类型<br>metadata:               # 元数据<br>  name:                 # rs名称<br>  namespace:            # 所属命名空间<br>  labels:               # 标签<br>    controller: deploy<br>spec:                   # 详情描述<br>  replicas:             # 副本数量<br>  revisionHistoryLimit: # 保留历史版本，默认是10<br>  paused:               # 暂停部署，默认是false<br>  progressDeadlineSeconds:      # 部署超时时间(s)，默认是600<br>  strategy:             # 策略<br>    type: RollingUpdates        # 滚动更新策略<br>    rollingUpdate:      # 滚动更新<br>      maxSurge:         # 最大额外可以存在的副本数，可以为百分比，也可以为整数<br>      maxUnavaliable:   # 最大不可用状态的pod的最大值，可以为百分比，也可以为整数<br>  selector:             # 选择器，通过它指定该控制器管理哪些pod<br>    matchLabels:        # Labels匹配规则<br>       app: nginx-pod<br>    matchExpressions:   # Expression匹配规则<br>      - &#123;key: app, operator: In, values: [nginx-pod]&#125;<br>  template:             # 模板，当副本数量不足时，会根据下面的模板创建pod副本<br>    metadata:<br>        labels:<br>          app: nginx-pod<br>    spec:<br>      containers:<br>      - name: nginx<br>        image: nginx:1.17.1<br>        ports:<br>        - containerPort: 80<br></code></pre></td></tr></table></figure></li></ul></li></ol><h3 id="四、Deployment实战"><a href="#四、Deployment实战" class="headerlink" title="四、Deployment实战"></a>四、Deployment实战</h3><h4 id="1）示例1"><a href="#1）示例1" class="headerlink" title="1）示例1"></a>1）示例1</h4><p>创建pc-deployment.yaml，内容如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">pc-deployment</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">dev</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>     <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-pod</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-pod</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.17.1</span><br><br></code></pre></td></tr></table></figure><p>执行以下命令</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl create namespace dev<br>$ kubectl create -f pc-deployment.yaml<br>$ kubectl get deploy -n dev -o wide<br></code></pre></td></tr></table></figure><p>查看deployment控制的rs和pod，发现rs是在deployment之后加了一段字符串，而pod是在rs之后加了一段字符串。</p><p><img src="https://img-blog.csdnimg.cn/f6609e6b7a2246d695a74144cf06ea48.png" alt="在这里插入图片描述"></p><h4 id="2）扩缩容"><a href="#2）扩缩容" class="headerlink" title="2）扩缩容"></a>2）扩缩容</h4><p>方式一：命令行</p><p>格式</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">kubectl scale deploy deploy名称 --replicas=pod数量 -n 命名空间<br></code></pre></td></tr></table></figure><p>过命令行变更pod数量为5个</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl scale deploy pc-deployment --replicas=5 -n dev<br>$ kubectl get pod -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/b1b839e963224f8ea7c6cc36566c3b94.png" alt="在这里插入图片描述"></p><p>方式二：编辑deploy文件</p><p>格式</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">kubectl edit deploy deploy名字 -n 命名空间<br></code></pre></td></tr></table></figure><p>通过编辑deploy文件编辑pod数量为3个</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl edit deploy pc-deployment -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/aa454c2205894a94a94f2ff97fa07d82.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">$ kubectl get pod -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/b933ac07537b444b93bc565c13e3c33e.png" alt="在这里插入图片描述"></p><h4 id="3）镜像更新"><a href="#3）镜像更新" class="headerlink" title="3）镜像更新"></a>3）镜像更新</h4><p>deployment支持两种镜像更新策略：重建更新和滚动更新（默认），可以通过strategy选项进行配置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">strategy：指定新的pod替换旧的pod的策略，支持两个属性：</span><br>  <span class="hljs-string">type：指定策略类型，支持两种策略</span><br>    <span class="hljs-string">Recreate：在创建出新的pod之前会先杀掉所有已存在的pod</span><br>    <span class="hljs-string">RollingUpdate：滚动更新，就是杀死一部分，就启动一部分，在更新过程中，存在两个版本pod</span><br>  <span class="hljs-string">rollingUpdate：当type为RollingUpdate时生效，用于为RollingUpdate设置参数，支持两个属性</span><br>    <span class="hljs-string">maxUnavailable：用来指定在升级过程中不可用pod的最大数量，默认为25%</span><br>    <span class="hljs-string">maxSurge：用来指定在升级过程中可以超过期望的pod的最大数量，默认为25%</span><br></code></pre></td></tr></table></figure><p>1、重建更新</p><p>编辑pc-deployment.yaml，在spec节点下添加更新策略</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">strategy:</span>  <span class="hljs-comment">#策略</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">Recreate</span>  <span class="hljs-comment">#重建更新策略</span><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/5941ab45c28f4aa5a7f83f1b76ef7ea2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f pc-deployment.yaml <br>$ kubectl get pod -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/29ce0a0cd9e84a1bb7938693f9e64d1c.png" alt="在这里插入图片描述"></p><p>创建deploy进行验证</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#首先记录原本的pod名</span><br>$ kubectl get pod -n dev<br><span class="hljs-comment">#更改pod镜像</span><br>$ kubectl <span class="hljs-built_in">set</span> image deploy pc-deployment nginx=nginx:1.17.2 -n dev<br><span class="hljs-comment">#再次查看镜像</span><br>$ kubectl get pod -n dev<br></code></pre></td></tr></table></figure><p>发现pod镜像已经改变了</p><p><img src="https://img-blog.csdnimg.cn/fb4d38594be84f1ebcb6c8de5006d93a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>2、滚动更新<br>编辑pc-deployment.yaml，在spec节点下添加滚动更新策略（也可以把strategy去掉，因为默认滚动更新策略）</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">strategy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">RollingUpdate</span> <span class="hljs-comment">#滚动更新策略</span><br>  <span class="hljs-attr">rollingUpdate:</span><br>    <span class="hljs-attr">maxUnavailable:</span> <span class="hljs-number">25</span><span class="hljs-string">%</span><br>    <span class="hljs-attr">maxSurge:</span> <span class="hljs-number">25</span><span class="hljs-string">%</span><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/e0ffd85c0fc54c57b59910d8d6d795bd.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>执行</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f pc-deployment.yaml <br></code></pre></td></tr></table></figure><p>创建deploy进行验证</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#记录以前的pod</span><br>$ kubectl get pod -n dev<br><span class="hljs-comment">#更新镜像</span><br>$ kubectl <span class="hljs-built_in">set</span> image deploy pc-deployment nginx=nginx:1.17.3 -n dev<br><span class="hljs-comment">#查看pod状态</span><br>$ kubectl get pod -n dev<br>$ kubectl get pod -n dev<br></code></pre></td></tr></table></figure><p>发现pod是旧的一遍停止新的一边创建，最后全变成了新的<br>滚动更新的过程</p><p>3、镜像更新中rs的变化</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#重建deployment</span><br>$ kubectl delete -f pc-deployment.yaml <br><span class="hljs-comment">#添加record参数，表明创建时记录</span><br>$ kubectl create -f pc-deployment.yaml --record<br>$ kubectl get deploy,rs,pod -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/edea98baa36a460d85aa38bcf741a0b3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>发现pod是旧的一遍停止新的一边创建，最后全变成了新的<br>滚动更新的过程</p><p><img src="https://img-blog.csdnimg.cn/02fa31f987f34fc68614edeefe664616.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><strong>3、镜像更新中rs的变化</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#重建deployment</span><br>$ kubectl delete -f pc-deployment.yaml <br><span class="hljs-comment">#添加record参数，表明创建时记录</span><br>$ kubectl create -f pc-deployment.yaml --record<br>$ kubectl get deploy,rs,pod -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/08add79d638e4eb89cfc5f6649d37376.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>打开两个窗口，用于监听rs和pod<br>在2窗口中监听rs，3窗口中监听pod</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#在2窗口中输入</span><br>$ kubectl get rs -n dev -w<br><span class="hljs-comment">#在3窗口中输入</span><br>OBOBOB$ kubectl get pod -n dev -w<br><span class="hljs-comment">#在1窗口中改变pod镜像</span><br>OBOBOB$ kubectl <span class="hljs-built_in">set</span> image deploy pc-deployment nginx=nginx:1.17.2 -n dev<br></code></pre></td></tr></table></figure><p>OBOBOB<br>OBOBOB查看3窗口中pod的变化，发现序号5开头的pod在逐渐暂停，序号7开头的pod在逐渐创建<br>OBOBOB<br><img src="https://img-blog.csdnimg.cn/2165ecaf02fc42d0816bf49427304ff1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>OBOBOB查看2窗口中rs的变化，可以看见序号5开头的rs的pod数在减少，序号7开头的rs的pod数在增加</p><p><img src="https://img-blog.csdnimg.cn/8c4c0a9f20844e0b81f32e6981800c96.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>在1窗口中查看最终rs变化，发现原来的rs依旧存在，只是pod数量变为了0，而后又新产生了一个rs，pod数量为3，其实这就是deployment能够进行版本回退的奥妙所在，后面会详细解释</p><p><img src="https://img-blog.csdnimg.cn/71cede9408ad4c9abc2e410de61faa33.png" alt="在这里插入图片描述"></p><h4 id="4）版本回退"><a href="#4）版本回退" class="headerlink" title="4）版本回退"></a>4）版本回退</h4><p>1、简介</p><p>deployment支持版本升级过程中的暂停，继续功能以及版本回退等诸多功能，下面具体来看<br>kubectl rollout：版本升级相关功能，支持下面的选项：</p><ul><li><p>status：显示当前升级状态</p></li><li><p>history：显示升级历史记录</p></li><li><p>pause：暂停版本升级过程<br>OBOBOB- resume：继续已经暂停的版本升级过程</p></li><li><p>restart：重启版本升级过程<br>OBOBOB- undo：回滚到上一级版本（可以使用–to-revision回滚到指定版本）<br>OBOBOBOBOBOB</p></li></ul><p>#查看升级状态</p><p>OBOBOB&#96;&#96;&#96;bash<br>$ kubectl rollout status deploy pc-deployment -n dev</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"><br>#查看升级历史（注意：如果只显示版本号说明一开始使用yaml创建文件的时候没有加上–record命令）<br><br>```bash<br>$ kubectl rollout history deploy pc-deployment -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/4b710b0ecc7e4ba7ac0a8e68f94bb84c.png" alt="在这里插入图片描述"></p><p>2、版本回滚实验</p><p>#这里使用–to-revision&#x3D;1回滚到1版本，如果省略这个选项，则会回退到上个版本</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl rollout undo deploy pc-deployment --to-revision=1 -n dev<br></code></pre></td></tr></table></figure><p>#查看是否回滚成功，发现5序号开头的rs被启动了</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl get rs -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2630941c37ba4951b1c1e73c2e94ff30.png" alt="在这里插入图片描述"></p><p>可以看到版本7开头的已经回滚到5开头的版本了，这也就是rs依旧存在的原因。</p><h3 id="五、Deployment金丝雀发布（灰度发布）"><a href="#五、Deployment金丝雀发布（灰度发布）" class="headerlink" title="五、Deployment金丝雀发布（灰度发布）"></a>五、Deployment金丝雀发布（灰度发布）</h3><p>deployment支持更新过程中的控制，如”暂停（pause）”或”继续（resume）”更新操作。</p><p>比如有一批新的pod资源创建完成后立即暂停更新过程，此时，仅存在一部分新版本的应用，主体部分还是旧的版本。然后，再筛选一小部分的用户请求路由到新的pod应用，继续观察能否稳定地按期望的方式运行。确定没问题之后再继续完成余下的pod资源滚动更新，否则立即回滚更新操作。这就是所谓的金丝雀发布，其实也叫做灰度发布。</p><p>#更新deployment版本，并配置暂停deployment</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl <span class="hljs-built_in">set</span> image deploy pc-deployment nginx=nginx:1.17.2 -n dev &amp;&amp; kubectl rollout pause deploy pc-deployment -n dev<br></code></pre></td></tr></table></figure><p>#查看rs，发现老版本rs没有减少，新版本rs增加一个</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl get rs -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/a18ccd72fea64a4ca84f223c01b02706.png" alt="在这里插入图片描述"></p><p>#查看更新过程</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl rollout status deploy pc-deployment -n dev<br>$ kubectl get rs -n dev<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/f59f5a14634f42cc817a224c01614b8d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>发现老版本均停止，新版本已经创建好</p><h3 id="六、有状态、无状态服务区别"><a href="#六、有状态、无状态服务区别" class="headerlink" title="六、有状态、无状态服务区别"></a>六、有状态、无状态服务区别</h3><h4 id="1）无状态："><a href="#1）无状态：" class="headerlink" title="1）无状态："></a>1）无状态：</h4><ul><li>上面所说的deployment 认为所有的pod都是一样的</li><li>不用考虑顺序的要求</li><li>不用考虑在哪个node节点上运行</li><li>可以随意扩容和缩容</li></ul><h4 id="2）有状态"><a href="#2）有状态" class="headerlink" title="2）有状态"></a>2）有状态</h4><ul><li>实例之间有差别，每个实例都有自己的独特性，元数据不同，例如etcd，zookeeper</li><li>实例之间不对等的关系，以及依靠外部存储的应用</li></ul><h3 id="七、PV、PVC、NFS、SC"><a href="#七、PV、PVC、NFS、SC" class="headerlink" title="七、PV、PVC、NFS、SC"></a>七、PV、PVC、NFS、SC</h3><h4 id="1）PV概述"><a href="#1）PV概述" class="headerlink" title="1）PV概述"></a>1）PV概述</h4><ul><li><p>PersistentVolume (PV：持久化存储卷)是集群中由管理员提供或使用存储类动态提供的一块存储。它是集群中的资源，就像节点是集群资源一样。</p></li><li><p>PV是与Volumes类似的卷插件，但其生命周期与使用PV的任何单个Pod无关。由此API对象捕获存储的实现细节，不管是NFS、iSCSI还是特定于云提供商的存储系统。</p></li></ul><h4 id="2）PVC概述"><a href="#2）PVC概述" class="headerlink" title="2）PVC概述"></a>2）PVC概述</h4><p>PersistentVolumeClaim（PVC：持久化存储卷声明），PVC 是用户存储的一种声明，PVC 和 Pod 比较类似，Pod 消耗的是节点，PVC 消耗的是 PV 资源，Pod 可以请求 CPU 和内存，而 PVC 可以请求特定的存储空间和访问模式。对于真正使用存储的用户不需要关心底层的存储实现细节，只需要直接使用 PVC 即可。</p><h4 id="3）通过NFS实现持久化存储"><a href="#3）通过NFS实现持久化存储" class="headerlink" title="3）通过NFS实现持久化存储"></a>3）通过NFS实现持久化存储</h4><p>NFS工作原理</p><ul><li><p>首先服务器端启动RPC服务，并开启111端口</p></li><li><p>服务器端启动NFS服务，并向RPC注册端口信息</p></li><li><p>客户端启动RPC（rpcbind服务），向服务端的RPC(rpcbind)服务请求服务端的NFS端口</p></li><li><p>服务端的RPC(rpcbind)服务反馈NFS端口信息给客户端。</p></li><li><p>客户端通过获取的NFS端口来建立和服务端的NFS连接并进行数据的传输。</p></li></ul><p><img src="https://img-blog.csdnimg.cn/68c339a8b3e645f48de381c1faa4e422.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>安装NFS</p><p>1、所有节点安装nfs</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ yum -y install  nfs-utils rpcbind<br></code></pre></td></tr></table></figure><p>2、在master节点创建共享目录并授权</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">mkdir</span> /opt/nfsdata<br><span class="hljs-comment"># 授权共享目录</span><br>$ <span class="hljs-built_in">chmod</span> 666 /opt/nfsdata<br></code></pre></td></tr></table></figure><p>3、编辑exports文件</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cat</span> /etc/exports<br>/opt/nfsdata *(rw,no_root_squash,no_all_squash,<span class="hljs-built_in">sync</span>)<br></code></pre></td></tr></table></figure><p>4、配置生效</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ exportfs -r<br></code></pre></td></tr></table></figure><p>exportfs命令</p><blockquote><p>常用选项<br>-a 全部挂载或者全部卸载<br>-r 重新挂载<br>-u 卸载某一个目录<br>-v 显示共享目录 以下操作在服务端上</p></blockquote><p>5、启动rpc和nfs（客户端只需要启动rpc服务）（注意顺序）</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ systemctl start rpcbind<br>$ systemctl start nfs-server<br>$ systemctl <span class="hljs-built_in">enable</span> rpcbind<br>$ systemctl <span class="hljs-built_in">enable</span> nfs-server<br></code></pre></td></tr></table></figure><p>6、查看</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ showmount -e<br>$ showmount -e 192.168.0.113<br></code></pre></td></tr></table></figure><ul><li>-e 显示NFS服务器的共享列表</li><li>-a 显示本机挂载的文件资源的情况NFS资源的情况</li><li>-v 显示版本号</li></ul><p><img src="https://img-blog.csdnimg.cn/e2b8df67a1604b569669cd7402229515.png" alt="在这里插入图片描述"></p><p>7、客户端</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 启动rpc服务</span><br>$ systemctl start rpcbind<br>$ systemctl <span class="hljs-built_in">enable</span> rpcbind<br><br><span class="hljs-comment"># 创建挂载目录</span><br>$ <span class="hljs-built_in">mkdir</span> /mnt/nfsdata<br><br><span class="hljs-comment"># 挂载</span><br>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;192.168.0.113:/opt/nfsdata /mnt/nfsdata     nfs    defaults  0 1&quot;</span>&gt;&gt; /etc/fstab<br>$ mount -a<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/ab4b067ace56401fa448a282f3b85aeb.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>8、测试</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 客户端执行</span><br>$ <span class="hljs-built_in">touch</span> /mnt/nfsdata/test&#123;1..5&#125;<br>$ ll /mnt/nfsdata/<br><span class="hljs-comment"># 服务端执行</span><br>$ ll /opt/nfsdata/<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/06f26efc16b54a65aa5942649cc7a741.png" alt="在这里插入图片描述"></p><h4 id="4）基于NFS存储创建PV"><a href="#4）基于NFS存储创建PV" class="headerlink" title="4）基于NFS存储创建PV"></a>4）基于NFS存储创建PV</h4><p>查看nfs版本号</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nfs服务端，只能看到大版本</span><br>$ nfsstat -s<br><span class="hljs-comment"># nfs客户端看</span><br>$ nfsstat -m<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/ba8d1ff77a2d43c7bf2123b86729743a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># pv-nfs.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolume</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">bxy-pv</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">bxy-pv-labels</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">capacity:</span><br>    <span class="hljs-attr">storage:</span> <span class="hljs-string">6Gi</span><br>  <span class="hljs-attr">volumeMode:</span> <span class="hljs-string">Filesystem</span><br>  <span class="hljs-attr">accessModes:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteMany</span><br>  <span class="hljs-attr">persistentVolumeReclaimPolicy:</span> <span class="hljs-string">Retain</span><br>  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">bxy-storageclass</span><br>  <span class="hljs-attr">mountOptions:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">hard</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">nfsvers=4.2</span><br>  <span class="hljs-attr">nfs:</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">/opt/nfsdata</span><br>    <span class="hljs-attr">server:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.113</span><br><br></code></pre></td></tr></table></figure><p><strong>spec.storageClassName 字段对应 StorageClass 配置中的 metedata.name 字段</strong></p><ul><li>capacity: #容量</li><li>volumeMode: 存储卷模式(默认值为filesystem,除了支持文件系统外（file system）也支持块设备（raw block devices）)</li><li>accessModes: 访问模式</li><li>ReadWriteMany :（RWO&#x2F;该volume只能被单个节点以读写的方式映射）,ReadOnlyMany (ROX&#x2F;该volume可以被多个节点以只读方式映射), ReadWriteMany (RWX&#x2F;该volume可以被多个节点以读写的方式映射)</li><li>persistentVolumeReclaimPolicy: 回收策略 ，Retain（保留）、 Recycle（回收）或者Delete（删除）</li><li>storageClassName: 存储类(通过设置storageClassName字段进行设置。如果设置了存储类，则此PV只能被绑定到也指定了此存储类的PVC)</li><li>mountOptions: 挂接选项</li><li>path: 我的本地挂载路径为</li><li>server: NFS 文件系统所在服务器的真实 IP</li></ul><p>执行</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f pv-nfs.yaml<br>$ kubectl get pv<br>$ kubectl describe pv bxy-pv<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/3e1e656cd1d94a108c832699b2c78744.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>注意创建完 PV 后，会看到 Status 类型为 Available ，这是因为 PV 还没有和 PVC 绑定，当绑定成功后会自动改成 Bound。</p><h4 id="5）基于NFS-PV创建PVC"><a href="#5）基于NFS-PV创建PVC" class="headerlink" title="5）基于NFS-PV创建PVC"></a>5）基于NFS-PV创建PVC</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext"># nfs-pv-pvc.yaml<br>apiVersion: v1<br>kind: PersistentVolumeClaim<br>metadata:<br>  name: bxy-pvc<br>spec:<br>  accessModes:<br>    - ReadWriteMany<br>  volumeMode: Filesystem<br>  resources:<br>    requests:<br>      storage: 5Gi<br>  storageClassName: bxy-storageclass<br>  selector:<br>    matchLabels:<br>      name: bxy-pv-labels<br></code></pre></td></tr></table></figure><ul><li><p>【注意】storage: 5Gi：我写的是 5G ，但实际绑定成功后会自动改变为 PV 中设置的容量大小 6G。</p></li><li><p>pvc 通过 matchLabels和pv中的label匹配，来关联要使用的存储空间。表明此PVC希望使用Label：name: “bxy-pv-labels”的PV。</p></li></ul><p>执行</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f nfs-pv-pvc.yaml<br>$ kubectl get pvc<br><span class="hljs-comment"># 再查看pv状态</span><br>$ kubectl get pv<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/31a4471f776349498158a8ea9b776cec.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h4 id="6）SC（StorageClass：存储类）"><a href="#6）SC（StorageClass：存储类）" class="headerlink" title="6）SC（StorageClass：存储类）"></a>6）SC（StorageClass：存储类）</h4><p>SC是StorageClass的缩写，表示存储类；这种资源主要用来对pv资源的自动供给提供接口；所谓自动供给是指用户无需手动创建pv，而是在创建pvc时对应pv会由persistentVolume-controller自动创建并完成pv和pvc的绑定；使用sc资源的前提是对应后端存储必须支持restfull类型接口的管理接口，并且pvc必须指定对应存储类名称来引用SC；简单讲SC资源就是用来为后端存储提供自动创建pv并关联对应pvc的接口；如下图：<br><img src="https://img-blog.csdnimg.cn/1e28a2d1bbac4eea94e0b1d498165921.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>【提示】使用sc动态创建pv，对应pvc必须也是属于对应的sc；上图主要描述了用户在创建pvc时，引用对应的sc以后，对应sc会调用底层存储系统的管理接口，创建对应的pv并关联至对应pvc。</p><p>创建sc资源</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">storage.k8s.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StorageClass</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">slow</span><br><span class="hljs-attr">provisioner:</span> <span class="hljs-string">kubernetes.io/glusterfs</span><br><span class="hljs-attr">parameters:</span><br>  <span class="hljs-attr">resturl:</span> <span class="hljs-string">&quot;http://127.0.0.1:8081&quot;</span><br>  <span class="hljs-attr">clusterid:</span> <span class="hljs-string">&quot;630372ccdc720a92c681fb928f27b53f&quot;</span><br>  <span class="hljs-attr">restauthenabled:</span> <span class="hljs-string">&quot;true&quot;</span><br>  <span class="hljs-attr">restuser:</span> <span class="hljs-string">&quot;admin&quot;</span><br>  <span class="hljs-attr">secretNamespace:</span> <span class="hljs-string">&quot;default&quot;</span><br>  <span class="hljs-attr">secretName:</span> <span class="hljs-string">&quot;heketi-secret&quot;</span><br>  <span class="hljs-attr">gidMin:</span> <span class="hljs-string">&quot;40000&quot;</span><br>  <span class="hljs-attr">gidMax:</span> <span class="hljs-string">&quot;50000&quot;</span><br>  <span class="hljs-attr">volumetype:</span> <span class="hljs-string">&quot;replicate:3&quot;</span><br></code></pre></td></tr></table></figure><p>【提示】在创建pvc时用storageClassName字段来指定对应的SC名称即可。上述是官方文档中的一个示例，在创建sc资源时，对应群组是storage.k8s.io&#x2F;v1，类型为StorageClass；provisioner字段用于描述对应供给接口名称；parameters用来定义向对应存储管理接口要传递的参数。</p><h4 id="7）基于动态sc（StorageClass：存储类）"><a href="#7）基于动态sc（StorageClass：存储类）" class="headerlink" title="7）基于动态sc（StorageClass：存储类）"></a>7）基于动态sc（StorageClass：存储类）</h4><p>创建一个pv</p><p>第一步：创建statefueset的命名空间</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">$ cat &lt;&lt; EOF &gt; nginx-ns.yaml<br>apiVersion: v1<br>kind: Namespace<br>metadata:<br>  name: nginx-ss<br>EOF<br>$ kubectl apply -f nginx-ns.yaml<br></code></pre></td></tr></table></figure><p><strong>第二步：创建ServiceAccount，为nfs-client-provisioner授权</strong><br>如果集群启用了RBAC，则必须执行如下命令授权provisioner。(k8s1.6+默认开启)</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs YAML"><span class="hljs-string">$</span> <span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nfs-rbac.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner</span><br>  <span class="hljs-comment"># replace with namespace where provisioner is deployed</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span>        <span class="hljs-comment">#根据实际环境设定namespace,下面类同</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRole</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner-runner</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br><span class="hljs-attr">rules:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span> [<span class="hljs-string">&quot;&quot;</span>]<br>    <span class="hljs-attr">resources:</span> [<span class="hljs-string">&quot;persistentvolumes&quot;</span>]<br>    <span class="hljs-attr">verbs:</span> [<span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;list&quot;</span>, <span class="hljs-string">&quot;watch&quot;</span>, <span class="hljs-string">&quot;create&quot;</span>, <span class="hljs-string">&quot;delete&quot;</span>]<br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span> [<span class="hljs-string">&quot;&quot;</span>]<br>    <span class="hljs-attr">resources:</span> [<span class="hljs-string">&quot;persistentvolumeclaims&quot;</span>]<br>    <span class="hljs-attr">verbs:</span> [<span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;list&quot;</span>, <span class="hljs-string">&quot;watch&quot;</span>, <span class="hljs-string">&quot;update&quot;</span>]<br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span> [<span class="hljs-string">&quot;storage.k8s.io&quot;</span>]<br>    <span class="hljs-attr">resources:</span> [<span class="hljs-string">&quot;storageclasses&quot;</span>]<br>    <span class="hljs-attr">verbs:</span> [<span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;list&quot;</span>, <span class="hljs-string">&quot;watch&quot;</span>]<br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span> [<span class="hljs-string">&quot;&quot;</span>]<br>    <span class="hljs-attr">resources:</span> [<span class="hljs-string">&quot;events&quot;</span>]<br>    <span class="hljs-attr">verbs:</span> [<span class="hljs-string">&quot;create&quot;</span>, <span class="hljs-string">&quot;update&quot;</span>, <span class="hljs-string">&quot;patch&quot;</span>]<br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRoleBinding</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">run-nfs-client-provisioner</span><br><span class="hljs-attr">subjects:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner</span><br>    <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br>    <span class="hljs-comment"># replace with namespace where provisioner is deployed</span><br><span class="hljs-attr">roleRef:</span><br>  <span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRole</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner-runner</span><br>  <span class="hljs-attr">apiGroup:</span> <span class="hljs-string">rbac.authorization.k8s.io</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Role</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">leader-locking-nfs-client-provisioner</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br>    <span class="hljs-comment"># replace with namespace where provisioner is deployed</span><br><span class="hljs-attr">rules:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span> [<span class="hljs-string">&quot;&quot;</span>]<br>    <span class="hljs-attr">resources:</span> [<span class="hljs-string">&quot;endpoints&quot;</span>]<br>    <span class="hljs-attr">verbs:</span> [<span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;list&quot;</span>, <span class="hljs-string">&quot;watch&quot;</span>, <span class="hljs-string">&quot;create&quot;</span>, <span class="hljs-string">&quot;update&quot;</span>, <span class="hljs-string">&quot;patch&quot;</span>]<br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">RoleBinding</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">leader-locking-nfs-client-provisioner</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br><span class="hljs-attr">subjects:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner</span><br>    <span class="hljs-comment"># replace with namespace where provisioner is deployed</span><br>    <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br><span class="hljs-attr">roleRef:</span><br>  <span class="hljs-attr">kind:</span> <span class="hljs-string">Role</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">leader-locking-nfs-client-provisioner</span><br>  <span class="hljs-attr">apiGroup:</span> <span class="hljs-string">rbac.authorization.k8s.io</span><br><span class="hljs-string">EOF</span><br><br></code></pre></td></tr></table></figure><p><strong>第三步：创建nfs的nfs-client-provisioner</strong></p><p>nfs-client-provisioner 是k8s简易的NFS外部提供者(provisioner)，本身不提供NFS，做为NFS的客户端为StorageClass提供存储。</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs YAML"><span class="hljs-string">$</span> <span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nfs-deployment-provisioner.yaml</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span><br>  <span class="hljs-attr">strategy:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">Recreate</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">nfs-client-provisioner</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nfs-client-provisioner</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">serviceAccountName:</span> <span class="hljs-string">nfs-client-provisioner</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-provisioner</span><br>          <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/external_storage/nfs-client-provisioner:latest</span><br>          <span class="hljs-attr">volumeMounts:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-root</span><br>              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/persistentvolumes</span> <span class="hljs-comment">#容器内挂载点</span><br>          <span class="hljs-attr">env:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">PROVISIONER_NAME</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">fuseim.pri/ifs</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">NFS_SERVER</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.113</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">NFS_PATH</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">/opt/nfsdata</span><br>      <span class="hljs-attr">volumes:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nfs-client-root</span> <span class="hljs-comment">#宿主机挂载点</span><br>          <span class="hljs-attr">nfs:</span><br>            <span class="hljs-attr">server:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.113</span><br>            <span class="hljs-attr">path:</span> <span class="hljs-string">/opt/nfsdata</span><br><span class="hljs-string">EOF</span><br><span class="hljs-string">$</span> <span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">nfs-deployment-provisioner.yaml</span><br><span class="hljs-string">$</span> <span class="hljs-string">kubectl</span> <span class="hljs-string">get</span> <span class="hljs-string">deploy</span> <span class="hljs-string">-n</span> <span class="hljs-string">nginx-ss</span><br></code></pre></td></tr></table></figure><p><strong>第四步：基于sc创建动态存储</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs YAML"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nginx-sc.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">storage.k8s.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StorageClass</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-nfs-storage</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br><span class="hljs-attr">provisioner:</span> <span class="hljs-string">fuseim.pri/ifs</span>  <span class="hljs-comment"># or choose another name, must match deployment&#x27;s env PROVISIONER_NAME&#x27;</span><br><span class="hljs-attr">reclaimPolicy:</span> <span class="hljs-string">Retain</span>        <span class="hljs-comment">#回收策略：Retain（保留）、 Recycle（回收）或者Delete（删除）</span><br><span class="hljs-attr">volumeBindingMode:</span> <span class="hljs-string">Immediate</span>    <span class="hljs-comment">#volumeBindingMode存储卷绑定策略</span><br><span class="hljs-attr">allowVolumeExpansion:</span> <span class="hljs-literal">true</span>    <span class="hljs-comment">#pvc是否允许扩容</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><p>volumeBindingMode存储卷绑定策略</p><ul><li><p>Immediate：创建 PVC 后立即创建后端存储卷，并且立即绑定新创建的 PV 和 PVC。</p></li><li><p>WaitForFirstConsumer：当 PVC 被 Pod 使用时，才触发 PV 和后端存储的创建，同时实现 PVC&#x2F;PV 的绑定，启用该配置后，Storage Class 中的 Zone 和 Region 将不再生效，而是使用 Pod 调度所在节点的 zone 和 region 创建文件系统，保证文件系统能被 Pod 挂载。）</p></li></ul><p>StorageClass的定义包含四个部分：</p><ul><li>provisioner：该字段指定使用存储卷类型，不同的存储卷提供者类型这里要修改成对应的值。【注意】provisioner必须和上面得Deployment的YAML文件中PROVISIONER_NAME的值保持一致。</li><li>parameters：指定 provisioner 的选项，比如 glusterfs 支持 resturl、restuser 等参数。</li><li>mountOptions：指定挂载选项，当 PV 不支持指定的选项时会直接失败。比如 NFS 支持 hard 和 nfsvers&#x3D;4.2 等选项。</li><li>reclaimPolicy：指定回收策略，同 PV 的回收策略。Retain（保留）、 Recycle（回收）或者Delete（删除）</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs BASH">$ kubectl apply -f nginx-sc.yaml<br>$ kubectl get sc -n nginx-ss<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/047ab4ba7e374b0195c3763562034cc8.png" alt="在这里插入图片描述"></p><h3 id="八-、StatefulSet控制器"><a href="#八-、StatefulSet控制器" class="headerlink" title="八)、StatefulSet控制器"></a>八)、StatefulSet控制器</h3><h4 id="1）简介"><a href="#1）简介" class="headerlink" title="1）简介"></a><strong>1）简介</strong></h4><ul><li><p>StatefulSet是用来管理有状态应用的工作负载API对象，实例之间有不对等关系，以及实例对外部数据有依赖关系的应用，称为”有状态应用“。</p></li><li><p>StatefulSet本质上是Deployment的一种变体，在v1.9版本中已成为GA版本，它为了解决有状态服务的问题，它所管理的Pod拥有固定的Pod名称，启停顺序，在StatefulSet中，Pod名字称为网络标识(hostname)，还必须要用到共享存储。</p></li><li><p>在Deployment中，与之对应的服务是service，而在StatefulSet中与之对应的headless service，headless service，即无头服务，与service的区别就是它没有Cluster IP，解析它的名称时将返回该Headless Service对应的全部Pod的Endpoint列表。</p></li></ul><p>除此之外，StatefulSet在Headless Service的基础上又为StatefulSet控制的每个Pod副本创建了一个DNS域名，这个域名的格式为：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">$(podname).(headless server name)<br>FQDN：$(podname).(headless server name).namespace.svc.cluster.local<br></code></pre></td></tr></table></figure><h4 id="2）常规service和无头服务区别"><a href="#2）常规service和无头服务区别" class="headerlink" title="2）常规service和无头服务区别"></a>2）常规service和无头服务区别</h4><ul><li>service：一组Pod访问策略，提供cluster-IP群集之间通讯，还提供负载均衡和服务发现。</li><li>Headless service 无头服务，不需要cluster-IP，直接绑定具体的Pod的IP。</li></ul><h4 id="3）特点"><a href="#3）特点" class="headerlink" title="3）特点"></a>3）特点</h4><ul><li>Pod一致性：包含次序（启动、停止次序）、网络一致性。此一致性与Pod相关，与被调度到哪个node节点无关；</li><li>稳定的次序：对于N个副本的StatefulSet，每个Pod都在[0，N)的范围内分配一个数字序号，且是唯一的；</li><li>稳定的网络：Pod的hostname模式为( statefulset 名 称 ) − (statefulset名称)-(statefulset名称)−(序号)；</li><li>稳定的存储：通过VolumeClaimTemplate为每个Pod创建一个PV。删除、减少副本，不会删除相关的卷。</li></ul><h4 id="4）组成部分"><a href="#4）组成部分" class="headerlink" title="4）组成部分"></a>4）组成部分</h4><ul><li>Headless Service：用来定义Pod网络标识( DNS domain)；</li><li>volumeClaimTemplates ：存储卷申请模板，创建PVC，指定pvc名称大小，将自动创建pvc，且pvc必须由存储类供应；</li></ul><p><strong>上面【1-4】都得执行，这里是第五步。</strong><br>此处是基于SC，上面已经创建过了SC，这里就直接创建StatefulSet了</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nginx-ss.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StatefulSet</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">web</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">nginx-ss</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span> <span class="hljs-comment">#必须匹配 .spec.template.metadata.labels</span><br>  <span class="hljs-attr">serviceName:</span> <span class="hljs-string">&quot;nginx&quot;</span>  <span class="hljs-comment">#声明它属于哪个Headless Service.</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span> <span class="hljs-comment">#副本数</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span> <span class="hljs-comment"># 必须配置 .spec.selector.matchLabels</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">terminationGracePeriodSeconds:</span> <span class="hljs-number">10</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.17.1</span><br>        <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">web</span><br>        <span class="hljs-attr">volumeMounts:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-pvc</span><br>          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/usr/share/nginx/html</span><br><br>  <span class="hljs-attr">volumeClaimTemplates:</span>   <span class="hljs-comment">#可看作pvc的模板</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-pvc</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">accessModes:</span> [ <span class="hljs-string">&quot;ReadWriteOnce&quot;</span> ]<br>      <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">&quot;nginx-nfs-storage&quot;</span>  <span class="hljs-comment">#存储类名，就是上面nginx-sc.yaml metadata.name</span><br>      <span class="hljs-attr">resources:</span><br>        <span class="hljs-attr">requests:</span><br>          <span class="hljs-attr">storage:</span> <span class="hljs-string">1Gi</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><p>这里的storageClassName必须与上面SC里面的metadata.name一样。<br>执行命令</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f nginx-ss.yaml<br>$ kubectl get pods -n nginx-ss<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/aaac0aaf854d46659e499a6e887f7f17.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>上述例子中：</p><ul><li>名为 nginx 的 Headless Service 用来控制网络域名。</li><li>名为 web 的 StatefulSet 有一个 Spec，它表明将在独立的 3 个 Pod 副本中启动 nginx 容器。</li><li>volumeClaimTemplates 将通过 PersistentVolumes 驱动提供的 PersistentVolumes 来提供稳定的存储。</li></ul><p>【问题】Kubernetes v1.20 (opens new window)开始，默认删除了 metadata.selfLink 字段，然而，部分应用仍然依赖于这个字段，例如上面的nfs-deployment-provisioner.yaml。其实上面创建pod是没成功的。报错如下：<br><img src="https://img-blog.csdnimg.cn/606e7793c2a64babb386bb77dc3ee55a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>【解决】<br>通过配置 apiserver 启动参数中的 –feature-gates 中的 RemoveSelfLink&#x3D;false，可以重新启用 metadata.selfLink 字段。</p><p>修改 &#x2F;etc&#x2F;kubernetes&#x2F;manifests&#x2F;kube-apiserver.yaml 文件，并在其启动参数中增加一行 – –feature-gates&#x3D;RemoveSelfLink&#x3D;false，如下第 43行所示：</p><p><img src="https://img-blog.csdnimg.cn/704fc256714246469fa6432f59d434ae.png" alt="在这里插入图片描述"></p><p>重新加载配置，如果一次未加载成功，多执行几次。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f /etc/kubernetes/manifests/kube-apiserver.yaml<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/1493b70a3e054e31acf4c04906a2deaf.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>加载完配置后，我们再看pod创建情况。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl get pvc -n nginx-ss<br>$ kubectl get pods -n nginx-ss<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/4823c1402fb0438bbd279ac492bf23de.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a-S5rGf5a2k5b2xMDA3,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>最后命令总结：</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 清除，只需要删除命名空间就行</span><br>$ kubectl delete -f nginx-ns.yaml<br><span class="hljs-comment"># 重新执行</span><br>$ kubectl apply -f nginx-ns.yaml<br>$ kubectl apply -f nfs-rbac.yaml<br>$ kubectl apply -f nfs-deployment-provisioner.yaml<br>$ kubectl apply -f nginx-sc.yaml<br>$ kubectl apply -f nginx-ss.yaml<br><span class="hljs-comment"># 检测</span><br>$ kubectl get pvc -n nginx-ss<br>$ kubectl get pods -n nginx-ss<br></code></pre></td></tr></table></figure><h3 id="九-、DaemonSet控制器"><a href="#九-、DaemonSet控制器" class="headerlink" title="九)、DaemonSet控制器"></a>九)、DaemonSet控制器</h3><blockquote><p>DaemonSet 确保全部（或者一些）Node 上<strong>运行一个 Pod 的副本</strong>，通常用于实现系统级后台任务。比如ELK服务</p></blockquote><p>创建DaemonSet</p><blockquote><p>DaemonSet的描述文件和Deployment非常相似，只需要修改Kind，并去掉副本数量的配置即可。</p></blockquote><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nginx-daemonset.yaml</span> <br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">DaemonSet</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-daemonset</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.13.12</span><br>        <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f nginx-daemonset.yaml<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/796df00f34a740fc84a7259ae28cb211.png" alt="在这里插入图片描述"></p><p>在每个node节点上都运行了一个pod副本</p><h3 id="十）、Job控制器"><a href="#十）、Job控制器" class="headerlink" title="十）、Job控制器"></a>十）、Job控制器</h3><p>Job控制器用于调配pod对象运行一次性任务，容器中的进程在正常运行结束后不会对其进行重启，而是将pod对象置于completed状态。若容器中的进程因错误而终止，则需要依据配置确定重启与否，未运行完成的pod对象因其所在的节点故障而意外终止后会被重新调度。</p><p>简单示例</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">job-demo.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Job</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">job-demo</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">job-demo</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">Never</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">counter</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">busybox</span><br>        <span class="hljs-attr">command:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;bin/sh&quot;</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;-c&quot;</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;for i in 9 8 7 6 5 4 3 2 1; do echo $i; done&quot;</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><p>Pod模板中的spec.restartPolicy默认为Always，这对job控制器来说只能设定为Never或OnFailure。</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl apply -f job-test.yaml<br></code></pre></td></tr></table></figure><h3 id="十一）、CronJob-控制器"><a href="#十一）、CronJob-控制器" class="headerlink" title="十一）、CronJob 控制器"></a>十一）、CronJob 控制器</h3><ul><li><p>CronJob其实就是在Job的基础上加上了时间调度，我们可以：在给定的时间点运行一个任务，也可以周期性地在给定时间点运行。这个实际上和我们Linux中的crontab就非常类似了。</p></li><li><p>一个CronJob对象其实就对应中crontab文件中的一行，它根据配置的时间格式周期性地运行一个Job，格式和crontab也是一样的。</p></li></ul><p>crontab的格式如下：</p><ul><li>分 时 日 月 星期 要运行的命令 第1列分钟0～59 第2列小时0～23） 第3列日1～31 第4列月1～12 第5列星期0～7（0和7表示星期天） 第6列要运行的命令</li></ul><p>现在，我们用CronJob来管理我们上面的Job任务</p><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">cronjob-demo.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">CronJob</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">cronjob-demo</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">schedule:</span> <span class="hljs-string">&quot;*/1 * * * *&quot;</span><br>  <span class="hljs-attr">jobTemplate:</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">template:</span><br>        <span class="hljs-attr">spec:</span><br>          <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">OnFailure</span><br>          <span class="hljs-attr">containers:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">hello</span><br>            <span class="hljs-attr">image:</span> <span class="hljs-string">busybox</span><br>            <span class="hljs-attr">args:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;bin/sh&quot;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;-c&quot;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;for i in 9 8 7 6 5 4 3 2 1; do echo $i; done&quot;</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><p>执行</p><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ kubectl get <span class="hljs-built_in">jobs</span><br>$ kubectl get cronjobs.batch<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/07a838dd44f745e8846987594553858a.png" alt="在这里插入图片描述"></p><h3 id="十二）、总结"><a href="#十二）、总结" class="headerlink" title="十二）、总结"></a>十二）、总结</h3><h4 id="1）ReplicationController（RC）主要功能"><a href="#1）ReplicationController（RC）主要功能" class="headerlink" title="1）ReplicationController（RC）主要功能"></a>1）ReplicationController（RC）主要功能</h4><ul><li>ReplicationController用来确保容器应用的副本数始终保持在用户定义的副本数，即如果有容器异常退出，会自动创建新的Pod来替代；而如果异常多出来的容器也会自动回收。</li></ul><h4 id="2）ReplicaSet主要功能（RS）"><a href="#2）ReplicaSet主要功能（RS）" class="headerlink" title="2）ReplicaSet主要功能（RS）"></a>2）ReplicaSet主要功能（RS）</h4><ul><li><p>在新版本的Kubernetes中建议使用ReplicaSet来取ReplicationController。ReplicaSet跟ReplicationController没有本质的不同，只是名字不一样，并且ReplicaSet支持集合式的selector。</p></li><li><p>虽然ReplicaSet可以独立使用，但一般还是建议使用 Deployment 来自动管理ReplicaSet，这样就无需担心跟其他机制的不兼容问题（比如ReplicaSet不支持rolling-update但Deployment支持）。</p></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">用户期望的pod副本数量<br>标签选择器，判断哪个pod归自己管理<br>当现存的pod数量不足，会根据pod资源模板进行新建<br></code></pre></td></tr></table></figure><h4 id="3）deployment的主要功能"><a href="#3）deployment的主要功能" class="headerlink" title="3）deployment的主要功能"></a>3）deployment的主要功能</h4><ol><li>管理无状态应用</li><li>管理Pod和ReplicaSet</li><li>具有上线部署、副本设定、滚动升级、回滚等功能</li><li>提供声明式更新，例如只更新一个新的Image</li><li>应用场景：web服务</li></ol><h4 id="4）SatefulSet控制器"><a href="#4）SatefulSet控制器" class="headerlink" title="4）SatefulSet控制器"></a>4）SatefulSet控制器</h4><ol><li>管理有状态应用</li><li>kind：service</li><li>解决Pod独立生命周期，保持Pod启动顺序和唯一性</li><li>稳定，唯一的网络标识符，持久存储（例如：etcd配置文件，节点地址发生变化，将无法使用）</li><li>有序，优雅的部署和扩展、删除和终止（例如：mysql主从关系，先启动主，再启动从），有序，滚动更新</li><li>应用场景：数据库</li></ol><h4 id="5）DaemonSet控制器"><a href="#5）DaemonSet控制器" class="headerlink" title="5）DaemonSet控制器"></a>5）DaemonSet控制器</h4><ol><li>它用于确保集群中的每一个节点只运行特定的pod副本。</li><li>6）Job&amp;CronJob</li><li>Job只要完成就立即退出，不需要重启或重建。</li><li>CronJob其实就是在Job的基础上加上了时间调度。</li></ol><h4 id="文章作者-寒江孤影007"><a href="#文章作者-寒江孤影007" class="headerlink" title="文章作者: @寒江孤影007"></a>文章作者: @寒江孤影007</h4><h4 id="文章链接-https-blog-csdn-net-qq-35745940-article-details-120339730"><a href="#文章链接-https-blog-csdn-net-qq-35745940-article-details-120339730" class="headerlink" title="文章链接: https://blog.csdn.net/qq_35745940/article/details/120339730"></a>文章链接: <a href="https://blog.csdn.net/qq_35745940/article/details/120339730">https://blog.csdn.net/qq_35745940/article/details/120339730</a></h4>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>资源对象对应关系*-*</title>
      <link href="/2022/07/20/%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/"/>
      <url>/2022/07/20/%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="KUBERNETES"><a href="#KUBERNETES" class="headerlink" title="KUBERNETES"></a>KUBERNETES</h1><h2 id="资源对应关系"><a href="#资源对应关系" class="headerlink" title="资源对应关系"></a>资源对应关系</h2><p>KUBERNETES资源对象POD、REPLICASET、DEPLOYMENT、SERVICE之间的关系</p><p>Pod、ReplicaSet、Deployment、Service之间的关系如下图</p><p><img src="https://www.freesion.com/images/916/c134ca8843e17bd2df184580e3226304.JPEG" alt="img"></p><h3 id="Pod："><a href="#Pod：" class="headerlink" title="Pod："></a><strong>Pod：</strong></h3><p>Pod是一个或多个容器的组合，这些容器共享存储、网络和命名空间，以及如何运行的规范。Pod是Kubernetes的最小可部署单元。Pod的中文译词是豌豆荚，docker容器就像是豆子运行在豌豆荚内。</p><h3 id="ReplicaSet："><a href="#ReplicaSet：" class="headerlink" title="ReplicaSet："></a><strong>ReplicaSet：</strong></h3><p>先说下Replication Controller。Replication Controller的作用是确保Pod以指定的副本个数运行。<br>ReplicaSet是Replication Controller升级版。ReplicaSet和Replication Controller之间的唯一区别是对选择器支持。Replication Controller只支持基于等式的selector（env&#x3D;dev或environment!&#x3D;qa），但ReplicaSet还支持新的，基于集合的selector（version in (v1.0,v2.0)或env notin (dev, qa)）。<br>在yaml文件中通过spec.replicas声明pod的副本数。</p><h3 id="Deployment："><a href="#Deployment：" class="headerlink" title="Deployment："></a><strong>Deployment：</strong></h3><p>Deployment用于管理Pod、ReplicaSet，可实现滚动升级和回滚应用、扩容和缩容。</p><h3 id="Service："><a href="#Service：" class="headerlink" title="Service："></a><strong>Service：</strong></h3><p>试想一个问题，ReplicaSet定义了pod的数量是2，当一个pod由于某种原因停止了，ReplicaSet会新建一个pod，以确保运行中的pod数量始终是2。但每个pod都有自己的ip，前端请求不知道这个新pod的ip是什么，那前端的请求如何发送到新pod中呢？<br>答案是使用Service<br>k8s的Service定义了一个服务的访问入口地址，前端的应用通过这个入口地址访问其背后的一组由Pod副本组成的集群实例，来自外部的访问请求被负载均衡到后端的各个容器应用上。Service与其后端Pod副本集群之间则是通过Label Selector实现关联。<br>请说人话：前端请求不是直接发送给Pod，而是发送到Service，Service再将请求转发给pod。</p><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结</strong>：</h3><p>Pod被ReplicaSet管理，ReplicaSet控制pod的数量；ReplicaSet被Deployment管理，Deployment控制pod应用的升级、回滚，当然也能控制pod的数量。Service提供一个统一固定入口，负责将前端请求转发给Pod。</p><h2 id="实践环节"><a href="#实践环节" class="headerlink" title="实践环节"></a><strong>实践环节</strong></h2><h3 id="定于yaml文件"><a href="#定于yaml文件" class="headerlink" title="定于yaml文件"></a>定于yaml文件</h3><p>定义一个myapp.yaml文件</p><pre><code>apiVersion: apps/v1# 声明一个Deployment资源对象kind: Deploymentmetadata:  name: deployment-myappspec:# 通过replicas声明pod个数是2  replicas: 2# 通过标签选择被控制的pod  selector:    matchLabels:      app: myapp# 在template中定义pod  template:    metadata:# 给pod打上标签app=myapp      labels:        app: myapp    spec:      containers:# 声明容器名称，注意不是pod名称，pod名称应该定义在metadata中      - name: myapp        image: ikubernetes/myapp:v1        ports:        - name: http          containerPort: 80# 在一个yaml文件中通过---分割多个资源对象---apiVersion: v1# 声明一个Service资源对象kind: Servicemetadata:  name: service-myappspec:# service-myapp将选择标签包含app=myapp的podOBOBOB  selector:    app: myapp  ports:  - name: http# Service监听端口OBOBOB    port: 80# 转发到后端Pod的端口号    targetPort: 80OBOBOB```### 部署这个资源清单OBOBOBkubectl apply -f myapp.yaml先看一个很有意思的图片![img](https://www.freesion.com/images/558/ec6ac1ba5ef8dc55b4ab7561cc6af3de.JPEG)OBOBOB- myapp.yaml文件声明了deployment的名称，没声明ReplicaSet、Pod的名称。但kubernetes会自动给ReplicaSet、Pod起名称。- Deployment名称是deployment-myapp- ReplicaSet名称是deployment-myapp-5fdb5f69f，实际上是Deployment名称加上pod-template的hash值- Pod名称是deployment-myapp-5fdb5f69f-njrb6、deployment-myapp-5fdb5f69f-whpwg，实际上是ReplicaSet的名称加上一个hash值。使用 kubectl describe svc service-myapp  命令看下service-myapp的详细信息。![img](https://www.freesion.com/images/782/f127c934b2ab99b65bc607e5f67d8e66.JPEG)可以看到service-myapp的ip地址是10.97.41.88。发送到10.97.41.88:80的请求会被转发给10.244.1.5:80或10.244.2.2:80看下图：![img](https://www.freesion.com/images/165/27a35923b2da3ce9583f8afebe748125.JPEG)先直接请求pod，获取pod的hostname- curl 10.244.1.5:80/hostname.html- curl 10.244.2.2:80/hostname.html然后请求service-myapp，service-myapp会把请求负载给后端的pod- curl 10.97.41.88:80/hostname.html还有一个很有意思的事情。pod能ping通，但是servic却ping不通![img](https://www.freesion.com/images/431/b2724ab5e8ae801e9577d0e3fa6f6a0f.JPEG)OBOBOB这是为什么呢？OBOBOB答案：因为Service其实是iptables或ipvs的转发规则，这规则不支持ICMP协议，所以就ping不通。</code></pre>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloud </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
